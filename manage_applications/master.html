<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.6.1">
<title>Manage applications</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/* Asciidoctor default stylesheet | MIT License | http://asciidoctor.org */
/* Remove comment around @import statement below when using as a custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section,summary{display:block}
audio,canvas,video{display:inline-block}
audio:not([controls]){display:none;height:0}
[hidden],template{display:none}
script{display:none!important}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
a{background:transparent}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
input[type="search"]{-webkit-appearance:textfield;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;box-sizing:content-box}
input[type="search"]::-webkit-search-cancel-button,input[type="search"]::-webkit-search-decoration{-webkit-appearance:none}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*:before,*:after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto;tab-size:4;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.center{margin-left:auto;margin-right:auto}
.spread{width:100%}
p.lead,.paragraph.lead>p,#preamble>.sectionbody>.paragraph:first-of-type p{font-size:1.21875em;line-height:1.6}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0;direction:ltr}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:none}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #ddddd8;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite:before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media only screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede}
table thead,table tfoot{background:#f7f8f7;font-weight:bold}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt,table tr:nth-of-type(even){background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{display:table-cell;line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.clearfix:before,.clearfix:after,.float-group:before,.float-group:after{content:" ";display:table}
.clearfix:after,.float-group:after{clear:both}
*:not(pre)>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background-color:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed;word-wrap:break-word}
*:not(pre)>code.nobreak{word-wrap:normal}
*:not(pre)>code.nowrap{white-space:nowrap}
pre,pre>code{line-height:1.45;color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;text-rendering:optimizeSpeed}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background-color:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button:before,b.button:after{position:relative;top:-1px;font-weight:400}
b.button:before{content:"[";padding:0 3px 0 2px}
b.button:after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header:before,#header:after,#content:before,#content:after,#footnotes:before,#footnotes:after,#footer:before,#footer:after{content:" ";display:table}
#header:after,#content:after,#footnotes:after,#footer:after{clear:both}
#content{margin-top:1.25em}
#content:before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #ddddd8}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #ddddd8;padding-bottom:8px}
#header .details{border-bottom:1px solid #ddddd8;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span:before{content:"\00a0\2013\00a0"}
#header .details br+span.author:before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark:before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber:after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #ddddd8;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #efefed;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media only screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background-color:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #efefed;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #efefed;left:auto;right:0}}
@media only screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:100%;background-color:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
.sect1{padding-bottom:.625em}
@media only screen and (min-width:768px){.sect1{padding-bottom:1.25em}}
.sect1+.sect1{border-top:1px solid #efefed}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor:before,h2>a.anchor:before,h3>a.anchor:before,#toctitle>a.anchor:before,.sidebarblock>.content>.title>a.anchor:before,h4>a.anchor:before,h5>a.anchor:before,h6>a.anchor:before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock>caption.title{white-space:nowrap;overflow:visible;max-width:0}
.paragraph.lead>p,#preamble>.sectionbody>.paragraph:first-of-type p{color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>.paragraph:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:initial}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #ddddd8;color:rgba(0,0,0,.6)}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock pre:not(.highlight),.listingblock pre[class="highlight"],.listingblock pre[class^="highlight "],.listingblock pre.CodeRay,.listingblock pre.prettyprint{background:#f7f7f8}
.sidebarblock .literalblock pre,.sidebarblock .listingblock pre:not(.highlight),.sidebarblock .listingblock pre[class="highlight"],.sidebarblock .listingblock pre[class^="highlight "],.sidebarblock .listingblock pre.CodeRay,.sidebarblock .listingblock pre.prettyprint{background:#f2f1f1}
.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{-webkit-border-radius:4px;border-radius:4px;word-wrap:break-word;padding:1em;font-size:.8125em}
.literalblock pre.nowrap,.literalblock pre[class].nowrap,.listingblock pre.nowrap,.listingblock pre[class].nowrap{overflow-x:auto;white-space:pre;word-wrap:normal}
@media only screen and (min-width:768px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:.90625em}}
@media only screen and (min-width:1280px){.literalblock pre,.literalblock pre[class],.listingblock pre,.listingblock pre[class]{font-size:1em}}
.literalblock.output pre{color:#f7f7f8;background-color:rgba(0,0,0,.9)}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.listingblock>.content{position:relative}
.listingblock code[data-lang]:before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:#999}
.listingblock:hover code[data-lang]:before{display:block}
.listingblock.terminal pre .command:before{content:attr(data-prompt);padding-right:.5em;color:#999}
.listingblock.terminal pre .command:not([data-prompt]):before{content:"$"}
table.pyhltable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.pyhltable td{vertical-align:top;padding-top:0;padding-bottom:0;line-height:1.45}
table.pyhltable td.code{padding-left:.75em;padding-right:0}
pre.pygments .lineno,table.pyhltable td:not(.code){color:#999;padding-left:0;padding-right:.5em;border-right:1px solid #ddddd8}
pre.pygments .lineno{display:inline-block;margin-right:.25em}
table.pyhltable .linenodiv{background:none!important;padding-right:0!important}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock blockquote p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote:before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.5em;margin-right:.5ex;text-align:right}
.quoteblock .quoteblock{margin-left:0;margin-right:0;padding:.5em 0;border-left:3px solid rgba(0,0,0,.6)}
.quoteblock .quoteblock blockquote{padding:0 0 0 .75em}
.quoteblock .quoteblock blockquote:before{display:none}
.verseblock{margin:0 1em 1.25em 1em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract{margin:0 0 1.25em 0;display:block}
.quoteblock.abstract blockquote,.quoteblock.abstract blockquote p{text-align:left;word-spacing:0}
.quoteblock.abstract blockquote:before,.quoteblock.abstract blockquote p:first-of-type:before{display:none}
table.tableblock{max-width:100%;border-collapse:separate}
table.tableblock td>.paragraph:last-child p>p:last-child,table.tableblock th>p:last-child,table.tableblock td>p:last-child{margin-bottom:0}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>thead>tr>.tableblock,table.grid-all>tbody>tr>.tableblock{border-width:0 1px 1px 0}
table.grid-all>tfoot>tr>.tableblock{border-width:1px 1px 0 0}
table.grid-cols>*>tr>.tableblock{border-width:0 1px 0 0}
table.grid-rows>thead>tr>.tableblock,table.grid-rows>tbody>tr>.tableblock{border-width:0 0 1px 0}
table.grid-rows>tfoot>tr>.tableblock{border-width:1px 0 0 0}
table.grid-all>*>tr>.tableblock:last-child,table.grid-cols>*>tr>.tableblock:last-child{border-right-width:0}
table.grid-all>tbody>tr:last-child>.tableblock,table.grid-all>thead:last-child>tr>.tableblock,table.grid-rows>tbody>tr:last-child>.tableblock,table.grid-rows>thead:last-child>tr>.tableblock{border-bottom-width:0}
table.frame-all{border-width:1px}
table.frame-sides{border-width:0 1px}
table.frame-topbot{border-width:1px 0}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{display:table-cell;line-height:1.6;background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
td>div.verse{white-space:pre}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{margin-right:.25em}
ul.inline{margin:0 auto .625em auto;margin-left:-1.375em;margin-right:0;padding:0;list-style:none;overflow:hidden}
ul.inline>li{list-style:none;float:left;margin-left:1.375em;display:block}
ul.inline>li>*{display:block}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist>table tr>td:first-of-type{padding:.4em .75em 0 .75em;line-height:1;vertical-align:top}
.colist>table tr>td:first-of-type img{max-width:initial}
.colist>table tr>td:last-of-type{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left,.imageblock[style*="float: left"]{margin:.25em .625em 1.25em 0}
.imageblock.right,.imageblock[style*="float: right"]{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em 0;border-width:1px 0 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;text-indent:-1.05em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background-color:#00fafa}
.black{color:#000}
.black-background{background-color:#000}
.blue{color:#0000bf}
.blue-background{background-color:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background-color:#fa00fa}
.gray{color:#606060}
.gray-background{background-color:#7d7d7d}
.green{color:#006000}
.green-background{background-color:#007d00}
.lime{color:#00bf00}
.lime-background{background-color:#00fa00}
.maroon{color:#600000}
.maroon-background{background-color:#7d0000}
.navy{color:#000060}
.navy-background{background-color:#00007d}
.olive{color:#606000}
.olive-background{background-color:#7d7d00}
.purple{color:#600060}
.purple-background{background-color:#7d007d}
.red{color:#bf0000}
.red-background{background-color:#fa0000}
.silver{color:#909090}
.silver-background{background-color:#bcbcbc}
.teal{color:#006060}
.teal-background{background-color:#007d7d}
.white{color:#bfbfbf}
.white-background{background-color:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background-color:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note:before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip:before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning:before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution:before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important:before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background-color:rgba(0,0,0,.8);-webkit-border-radius:100px;border-radius:100px;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]:after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background-color:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@media print{@page{margin:1.25cm .75cm}
*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare):after,a[href^="https:"]:not(.bare):after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]:after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #ddddd8!important;padding-bottom:0!important}
.sect1{padding-bottom:0!important}
.sect1+.sect1{border:0!important}
#header>h1:first-child{margin-top:1.25rem}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em 0}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span:before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]:before{display:block}
#footer{background:none!important;padding:0 .9375em}
#footer-text{color:rgba(0,0,0,.6)!important;font-size:.9em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
</style>
</head>
<body class="article">
<div id="header">
<h1>Manage applications</h1>
</div>
<div id="content">
<div class="sect1">
<h2 id="managing-applications">Managing applications</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Review the following topics to learn more about creating, deploying, and managing your applications.
This guide assumes familiarity with Kubernetes concepts and terminology.
Key Kubernetes terms and components are not defined.
For more information about Kubernetes concepts, see <a href="https://kubernetes.io/docs/home/">Kubernetes Documentation</a>.</p>
</div>
<div class="paragraph">
<p>The application management functions provide you with unified and simplified options for constructing and deploying applications and application updates.
With these functions, your developers and DevOps personnel can create and manage applications across environments through channel and subscription-based automation.</p>
</div>
<div class="paragraph">
<p>See the following topics:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#application-management-lifecycle">Application management lifecycle</a></p>
</li>
<li>
<p><a href="#application-model-and-definitions">Application model and definitions</a></p>
</li>
<li>
<p><a href="#managing-applications-with-the-console">Managing applications with the console</a></p>
</li>
<li>
<p><a href="#application-resources">Application resources</a></p>
</li>
<li>
<p><a href="#creating-and-managing-channels">Creating and managing channels</a></p>
</li>
<li>
<p><a href="#creating-and-managing-subscriptions">Creating and managing subscriptions</a></p>
</li>
<li>
<p><a href="#creating-and-managing-placement-rules">Creating and managing placement rules</a></p>
</li>
<li>
<p><a href="#managing-application-resources">Creating and managing application resources</a></p>
</li>
<li>
<p><a href="#managing-deployables-with-a-rolling-update">Managing deployables with a rolling update</a></p>
</li>
<li>
<p><a href="#deploying-by-using-application-resources">Deploying by using application resources</a></p>
</li>
<li>
<p><a href="#managing-applications-with-the-console">Managing applications with the console</a></p>
</li>
<li>
<p><a href="#application-resource-samples">Application resource samples</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="application-management-lifecycle">Application management lifecycle</h3>
<div class="paragraph">
<p>The application model is based on subscribing to one or more Kubernetes resource repositories (<em>channel</em> resource) that contains resources that are deployed on managed clusters.</p>
</div>
<div class="paragraph">
<p>The <em>subscription</em> component uses a <em>placement rule</em> resource to define the managed clusters where the Kubernetes resource will be deployed.</p>
</div>
<div class="paragraph">
<p>The last piece in the application model is the <em>application</em> resource that references one or more repositories subscriptions.
The purpose for the application is to group deployed Kubernetes resources and provide data aggregation that is easy to understand and manage.</p>
</div>
<div class="paragraph">
<p>Learn more about the Application lifecycle from the following topics:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#application-model-and-definitions">Application model and definitions</a></p>
</li>
<li>
<p><a href="#applications-console">Applications console</a></p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="application-model-and-definitions">Application model and definitions</h4>
<div class="paragraph">
<p>The Application model consists of the following Kubernetes custom resources: channels, subscription, placement rules, and applications.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Channels (<code>channel.apps.open-cluster-management.io</code>) define the source repositories that a cluster can subscribe to with a subscription and can be the following types: GitHub repositories, Helm release registries, objectstores, and resource template (deployable) namespace on the hub cluster.
Channels require individual namespaces, except GitHub channels, which can share a namespace with another GitHub channel.</p>
</li>
<li>
<p>Subscriptions (<code>subscription.apps.open-cluster-management.io</code>) allow clusters to subscribe to a source repository (channel) that can be the following types: GitHub repository, Helm release registry, objectstore, or resource template (deployable) namespace.
Subscriptions can be applied locally to the hub or to managed-clusters.</p>
</li>
<li>
<p>Placement rules (<code>placementrule.apps.open-cluster-management.io</code>) define the target clusters where subscriptions deploy and maintain the Kubernetes resources.
You can use placement rules to help you facilitate the multi-cluster deployment.
Placement rules can be shared across subscriptions.</p>
</li>
<li>
<p>Applications (<code>application.app.k8s.io</code>) in Red Hat Advanced Cluster Management for Kubernetes are used for grouping Kubernetes resources that make up an application.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For more information about creating and managing application resources, see:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#creating-and-managing-channels">Creating and managing channels</a></p>
</li>
<li>
<p><a href="#creating-and-managing-subscriptions">Creating and managing subscriptions</a></p>
</li>
<li>
<p><a href="#creating-and-managing-placement-rules">Creating and managing placement rules</a></p>
</li>
<li>
<p><a href="#managing-application-resources">Creating and managing application resources</a></p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="applications-console">Applications console</h4>
<div class="paragraph">
<p>The console includes an applications dashboard for managing the application lifecycle.
You can use the console dashboard to create and manage applications.
You can also view the status of your applications.
The dashboard includes enhanced capabilities, which your developers and operations personnel can use to create, deploy, update, manage, visualize, and monitor applications across your clusters.</p>
</div>
<div class="paragraph">
<p>See the following application console capabilities:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Use the topology view to visualize deployed applications across your clusters, including any associated channels and subscriptions.</p>
</li>
<li>
<p>Access a topology view that encompasses the new application resource definitions, including channels, subscriptions, and placement rules.</p>
</li>
<li>
<p>View individual status in the context of an application, including deployments, updates, and subscriptions.</p>
</li>
<li>
<p>Add and edit channels, subscriptions, placement rules, and applications.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For more information, see <a href="#managing-applications-with-the-console">Managing applications with the console</a>.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="application-resources">Application resources</h3>
<div class="paragraph">
<p>Within Red Hat Advanced Cluster Management for Kubernetes, applications are composed of multiple application resources.
The foundational resources for Red Hat Advanced Cluster Management for Kubernetes applications are the <code>application</code> resource and the <code>deployable</code> resource.</p>
</div>
<div class="paragraph">
<p>In addition, you can use channel, subscription, and placement rule resources to help you deploy, update, and manage your overall applications.</p>
</div>
<div class="paragraph">
<p>Both single and multi-cluster applications use the same Kubernetes specifications, but multi-cluster applications involve more automation of the deployment and application management lifecycle.</p>
</div>
<div class="paragraph">
<p>All of the application component resources for Red Hat Advanced Cluster Management for Kubernetes applications are defined in YAML file spec sections.
When you need to create or update an application component resource, you need to create or edit the appropriate spec section to include the labels for defining your resource.</p>
</div>
<div class="paragraph">
<p>View the following application resource sections:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#creating-and-managing-channels">Creating and managing channels</a></p>
</li>
<li>
<p><a href="#creating-and-managing-subscriptions">Creating and managing subscriptions</a></p>
</li>
<li>
<p><a href="#creating-and-managing-placement-rules">Creating and managing placement rules</a></p>
</li>
<li>
<p><a href="#managing-application-resources">Creating and managing application resources</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If you have applications that require secret resources to operate, you can use subscriptions to deploy the secrets to the managed clusters where the resources are needed.</p>
</div>
<div class="paragraph">
<p>If you have applications that require Kubernetes resources or Helm charts from channels that require authorization, such as entitled GitHub repositories, you can use secrets to provide access to these channels.
You can include a reference to a secret within your subscriptions to provide your subscriptions the required credentials to access secure channels.
With this access, your subscriptions can access Kubernetes resources and Helm charts for deployment from these channels while maintaining data security.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Channels:</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Channels (<code>channel.apps.open-cluster-management.io</code>) provide you with improved continuous integration and continuous delivery capabilities for creating and managing your Red Hat Advanced Cluster Management for Kubernetes applications.
Channels are custom resource definitions that can help you streamline deployments and separate cluster access.</p>
</div>
<div class="paragraph">
<p>For more information about creating and managing channels, see <a href="#creating-and-managing-channels">Creating and managing channels</a>.
See <a href="#channel-samples">Channel samples</a> for sample YAML files.</p>
</div>
<div class="paragraph">
<p>Channels define a namespace within the hub cluster and point to a physical place where resources are stored for deployment, such as an object store, Kubernetes namespace, Helm repository, or GitHub repository.
Clusters can subscribe to channels for identifying the deployables to deploy to each cluster.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Deployables within a channel can be accessed by only the clusters that subscribe to that channel.</p>
<div class="paragraph">
<p>The placement, overrides, and dependencies for deployables are defined within the spec for the deployables.
The placement for deployables can also be defined within a subscription, such as for multi-cluster deployments.</p>
</div>
</li>
<li>
<p>Secrets are Kubernetes resources that you can use to store authorization and other sensitive information, such as passwords, OAuth tokens, and SSH keys.</p>
<div class="paragraph">
<p>By storing this information as secrets, you can separate the information from the application components that require the information to improve your data security.
See <a href="#managing-secrets">Managing secrets</a>.
See <a href="#secret-samples">Secret samples</a> for sample YAML files.</p>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>For <code>Namespace</code> and <code>ObjectBucket</code> channel types, the spec for each channel can define conditions that a deployable must match to be included in the channel.
These conditions are defined as Kubernetes labels for the channel, such as the source namespace, package name, labels, and annotations.
A deployable must have the same labels for the deployable to be included in the channel.
A deployable can be included in a channel only when the deployable is labeled with the same labels as the channel.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Subscriptions:</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>As with channels, subscriptions (<code>subscription.apps.open-cluster-management.io</code>) provide you with improved continuous integration and continuous delivery capabilities for application management.
For information about creating and managing subscriptions, see <a href="#creating-and-managing-subscriptions">Creating and managing subscriptions</a>.
See <a href="#subscription-samples">Subscription samples</a> for sample YAML files.</p>
</div>
<div class="paragraph">
<p>Subscriptions are sets of definitions that identify Helm charts, deployables, and other Kubernetes resources within channels by using annotations, labels, and versions.
Subscriptions can point to a channel or storage location for identifying new or updated deployables.
The subscription operator can then download the subscribed Helm chart, deployable, or secret directly from the storage location to target managed clusters without checking the Hub cluster first.
With a subscription, the subscription operator can monitor the channel for new or updated resources instead of the Hub cluster.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Placement rules:</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Placement rules (<code>placementrule.apps.open-cluster-management.io</code>) define the target clusters where deployables can be deployed.
Use placement rules to help you facilitate the multi-cluster deployment of your deployables.
For more information about creating and managing placement rules, see <a href="#creating-and-managing-placement-rules">Creating and managing placement rules</a>.
See <a href="#placement-rule-samples">Placement rule samples</a> for sample YAML files.</p>
</div>
<div class="paragraph">
<p>The custom resource definition (CRD) and controller for placement rules replaces the placement policies that were used for applications in previous versions of Red Hat Advanced Cluster Management for Kubernetes.
Placement policies are still used for governance and risk policies.</p>
</div>
<div class="paragraph">
<p>Placement rules can be defined for subscriptions and for deployables.
Define the placement rule at the subscription level for multi-cluster deployments.
Define the placement rule for a specific deployable for single-cluster deployments or to override placement settings.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Applications:</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Applications (<code>Application.app.k8s.io</code>) in Red Hat Advanced Cluster Management for Kubernetes are used for viewing the application components.
See <a href="#application-resource-samples">Application resource samples</a> for sample YAML files.</p>
</div>
<div class="sect3">
<h4 id="creating-and-managing-channels">Creating and managing channels</h4>
<div class="paragraph">
<p>Create and use channels when you need to improve the continuous integration and delivery capabilities for creating and managing your Red Hat Advanced Cluster Management for Kubernetes applications.
Channels are custom resource definitions that can help you streamline deployments and separate cluster access.
Samples for all resources, including channels, are located in the <a href="#application-resource-samples">Application resource samples</a> documentation.</p>
</div>
<div class="paragraph">
<p>Learn more about channels, then see the following tasks:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Create a channel</p>
</li>
<li>
<p>Update a channel</p>
</li>
<li>
<p>Delete a channel</p>
</li>
<li>
<p>Managing deployments with channels</p>
</li>
<li>
<p>Channel status and synchronization</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Channels (<code>channel.apps.open-cluster-management.io</code>) define a namespace within the hub cluster and point to a physical place where resources are stored for deployment.
There are four types of channels.
Each channel differs based on the type of source location where resources are stored:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Kubernetes namespace (<code>Namespace</code>) + Uses deployables to store Kubernetes resource templates.
Subscription for this type of channel retrieves and deploys the template.
The namespaces that the channel monitors for new or updated deployables must be on the hub cluster.</p>
</li>
<li>
<p>Object store (<code>ObjectBucket</code>) + Stores Kubernetes resource YAML files.
Each YAML file includes the template portion for one resource, not the full deployable object.
An object store can be populated with a deployable object that is on the hub cluster or directly from a continuous integration pipeline, or by including the required YAML files into the object store.</p>
</li>
<li>
<p>Helm repository (<code>HelmRepo</code>) + Stores Helm charts.
For information about how to structure your charts, see <a href="https://helm.sh/docs/">Helm documentation</a>.</p>
</li>
<li>
<p>GitHub repository (<code>GitHub</code>) + Stores Kubernetes resources YAML files and unpackaged Helm charts.
These resources do not need to be wrapped or represented as deployables.
The channel controllers synchronize resources as deployables automatically.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Channels are created on the hub cluster by pointing to the location where resources are stored, such as a bucket within an object store, a Helm repository, a GitHub repository, or a namespace on the hub cluster.
Channels are defined with a <code>Channel</code> custom resource definition (CRD).</p>
</div>
<div class="paragraph">
<p>Channels reside in their own namespace for role-based access control.
The channel namespace is made available to a subscription operator on managed clusters when the cluster subscribes to the channel.
The operator can then get the secrets to access the actual channel.
The operator needs this access to check whether a deployable meets the channel requirements.</p>
</div>
<div class="paragraph">
<p>For more information about deployables and other application resources, see <a href="#application-resources">Application resources</a>.</p>
</div>
<div class="paragraph">
<p>The channel type can be specified with the <code>spec.sourceNamespaces</code> and <code>spec.type</code> fields of a channel spec.
When a channel is created and pointing to a source, the channel controller maintains the promotion of the deployables at the source.
The controller also synchronizes the source and channel namespaces.</p>
</div>
<div class="sect4">
<h5 id="create-a-channel">Create a channel</h5>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Compose your channel definition YAML content.
To create or update a channel resource, you must first compose the YAML file that defines the resource.
For more information about the YAML structure, including the required fields, see <a href="#channel-yaml-structure">Channel definition YAML structure</a>.</p>
</li>
<li>
<p>Ensure that you create your channel in a unique namespace.
All channels need an individual namespace, except GitHub channels, which can share a namespace with another channel.</p>
</li>
<li>
<p>Optional.
If you are creating an <code>Namespace</code> type channel, create the namespace on your hub cluster.
You can define the namespace as part of your YAML definition or use the Kubernetes command line interface (<code>kubectl</code>) tool to create the namespace.</p>
<div class="paragraph">
<p>To use the Kubernetes CLI tool, run the following command.
Replace <code>namespace name</code> with the name for your new namespace.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>kubectl create namespace &lt;namespace name&gt;</pre>
</div>
</div>
</li>
<li>
<p>Optional.
If you need or want to use a Kubernetes Secret for authenticating the access to a repository or chart by the channel, create the Kubernetes Secret resource.
You can use the Kubernetes command line interface (<code>kubectl</code>) tool to create the Kubernetes Secret by running the following command:</p>
<div class="listingblock">
<div class="content">
<pre> kubectl create secret &lt;secret name&gt; generic --from-literal=user --from-literal=password=</pre>
</div>
</div>
<div class="paragraph">
<p>You can use a secret for authentication with only <code>HelmRepo</code>, <code>ObjectBucket</code>, and <code>GitHub</code> type channels.
To associate a secret with a channel, include the <code>spec.secretRef.name</code> setting in your channel YAML definition.</p>
</div>
</li>
<li>
<p>Create the channel within Red Hat Advanced Cluster Management for Kubernetes.
You can use the console, the Kubernetes command line interface (<code>kubectl</code>) tool, or REST API:</p>
<div class="ulist">
<ul>
<li>
<p>To use the console,</p>
<div class="olist lowerroman">
<ol class="lowerroman" type="i">
<li>
<p>From the Navigation menu, click <strong>Manage applications</strong>.
The <strong>Overview</strong> tab for all applications opens.</p>
</li>
<li>
<p>Click the <strong>Resources</strong> tab.</p>
</li>
<li>
<p>Scroll to the <em>Resource pipeline</em> section.
From the list of buttons, find and click <strong>Channel</strong>.
The <em>Create a Channel</em> editor is displayed.</p>
</li>
<li>
<p>Enter the YAML content to define your channel or directly update the default YAML template to meet your requirements.</p>
</li>
<li>
<p>When you are finished, click <strong>Save</strong> to create the channel.
Your new channel displays within the <strong>Resource pipeline</strong> for the corresponding applications.</p>
</li>
</ol>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>Alternatively, you can select to create a channel when you are working with a specific application.</p>
</div>
<div class="olist lowerroman">
<ol class="lowerroman" type="i">
<li>
<p>From the <strong>Overview</strong> tab for all applications, click the application from the <strong>All applications</strong> list.
The <strong>Overview</strong> tab for that application opens.</p>
</li>
<li>
<p>Click the <strong>Resources</strong> tab for that application.</p>
</li>
<li>
<p>Scroll to the <em>Resource pipeline</em> section.
From the list of buttons to the right of the resource summary cards, click <strong>Channel</strong>.
The <em>Create a Channel</em> editor is displayed.</p>
</li>
<li>
<p>Enter the YAML content to define your channel or directly update the default YAML template to meet your requirements.</p>
</li>
<li>
<p>When you are finished, click <strong>Save</strong> to create the channel.
Your new channel displays within the <strong>Resource pipeline</strong> for the application.</p>
<div class="ulist">
<ul>
<li>
<p>To use the Kubernetes CLI tool,</p>
</li>
</ul>
</div>
</li>
<li>
<p>Compose and save your channel YAML file with your preferred editing tool.</p>
</li>
<li>
<p>Run the following command to apply your file to an apiserver.
Replace <code>filename</code> with the name of your file:</p>
<div class="listingblock">
<div class="content">
<pre>kubectl apply -f filename.yaml</pre>
</div>
</div>
</li>
<li>
<p>Verify that your channel resource is created, by running the following command:</p>
<div class="listingblock">
<div class="content">
<pre>kubectl get Channel</pre>
</div>
</div>
<div class="paragraph">
<p>Ensure that your new channel is listed in the resulting output.
 ** To use REST API, you need to use the <a href="../apis/channels.json">channel POST API</a>.</p>
</div>
</li>
</ol>
</div>
</li>
</ol>
</div>
</div>
<div class="sect4">
<h5 id="update-a-channel">Update a channel</h5>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Compose the definition updates for your channel.
For more information about the YAML structure, including the required fields, see <a href="#channel-yaml-structure">Channel definition YAML structure</a>.</p>
</li>
<li>
<p>Update the definition.
You can use the console, the Kubernetes command line interface (<code>kubectl</code>) tool, or REST API:</p>
<div class="ulist">
<ul>
<li>
<p>To use the console,</p>
<div class="olist lowerroman">
<ol class="lowerroman" type="i">
<li>
<p>Open the console.</p>
</li>
<li>
<p>From the Navigation menu, click <strong>Manage applications</strong>.
The <strong>Overview</strong> tab for all applications opens.</p>
</li>
<li>
<p>Click the <strong>Resources</strong> tab.</p>
</li>
<li>
<p>Scroll down the page to <strong>Resource pipeline</strong> section.
Click the <strong>YAML</strong> edit icon for channel that you want to update.
The <strong>Edit channel</strong> window opens.</p>
</li>
<li>
<p>Edit the YAML for the channel.</p>
</li>
<li>
<p>When you are finished, click <strong>Save</strong> to update the channel.</p>
</li>
</ol>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>You can also use the console search to find and edit a channel:</p>
</div>
<div class="olist lowerroman">
<ol class="lowerroman" type="i">
<li>
<p>From the Navigation menu, click <strong>Search</strong>.</p>
</li>
<li>
<p>Within the search box, filter by <code>kind:channel</code> to view all channels.</p>
</li>
<li>
<p>Within the list of all channels, click the channel that you want to update.
The YAML for the channel is displayed.</p>
</li>
<li>
<p>Click <strong>Edit</strong> to enable editing the YAML content.</p>
</li>
<li>
<p>When you are finished your edits, click <strong>Save</strong>.
Your changes are saved and applied automatically.</p>
<div class="ulist">
<ul>
<li>
<p>To use the Kubernetes CLI tool, the steps are the same as for creating a channel.</p>
</li>
<li>
<p>To use REST API, use the <a href="../apis/channels.json">channel PATCH API</a>.</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
</li>
</ol>
</div>
</div>
<div class="sect4">
<h5 id="delete-a-channel">Delete a channel</h5>
<div class="paragraph">
<p>To delete a channel, you can use the console, the Kubernetes command line interface (<code>kubectl</code>) tool, or REST API.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>To use the console, use the console search to find and delete a channel:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Open the console.</p>
</li>
<li>
<p>Click the <em>Search</em> icon in the <em>Header</em> to open the <em>Search</em> page.</p>
</li>
<li>
<p>Within the search box, filter by <code>kind:channel</code> to view all channels.</p>
</li>
<li>
<p>Within the list of all channels, select the <em>Options</em> menu for the channel that you want to delete.
Click <strong>Delete channel</strong>.</p>
</li>
<li>
<p>When the list of all channels is refreshed, the channel is no longer displayed.</p>
</li>
</ol>
</div>
</li>
<li>
<p>To use the Kubernetes CLI tool,</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Run the following command to delete the channel from a target namespace.
Replace <code>name</code> and <code>namespace</code> with the name of your channel and your target namespace:</p>
<div class="listingblock">
<div class="content">
<pre>kubectl delete Channel &lt;name&gt; -n &lt;namespace&gt;</pre>
</div>
</div>
</li>
<li>
<p>Verify that your channel is deleted by running the following command:</p>
<div class="listingblock">
<div class="content">
<pre>kubectl get Channel &lt;name&gt;</pre>
</div>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>To use REST API, use the <a href="../apis/channels.json">channel DELETE API</a>.</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="managing-deployments-with-channels">Managing deployments with channels</h5>
<div class="paragraph">
<p>You can use channels and subscriptions to manage the continuous delivery of deployables, such as Helm charts and Kubernetes deployable objects, to your managed clusters or other namespaces.</p>
</div>
<div class="paragraph">
<p>When a channel points to a Helm repository, the channel operator creates a deployable to represent each Helm release that is found in the repository.</p>
</div>
<div class="paragraph">
<p>For Kubernetes deployable objects, you can add the objects to a channel by wrapping them as deployables.</p>
</div>
<div class="paragraph">
<p>Within the deployable definition you can directly specify a channel where the deployable is to be promoted.
You can also specify the required Kubernetes labels for the deployable to match the gate requirements for a channel to have the deployable automatically added to a channel.
When the channel controller detects that the deployable includes the required Kubernetes labels, the controller promotes the deployable to the channel.</p>
</div>
<div class="paragraph">
<p>When creating a <code>Namespace</code> and <code>ObjectBucket</code> channel, you can set the channel gate requirements within the <code>spec.gates</code> section of the channel definition.
These requirements are Kubernetes annotations that a deployable must include before the deployable can be promoted to the channel.
For instance, you can specify annotations for development approvals, test and quality assurance approval, and to indicate a deployable is ready for deployment to a production environment cluster.
These gate requirements can be any field and value, such as the source namespace, package name, labels, and annotations.
A deployable can be promoted in a channel only when the deployable definition includes the matching fields and values.
When a deployable meets the defined requirements, the deployable is automatically promoted to the channel and deployed to any managed clusters that subscribe to the channel.
Gate requirements do not apply for <code>HelmRepo</code> and <code>GitHub</code> channel types.</p>
</div>
<div class="paragraph">
<p>For channels that do not include gate requirements, the channel controller promotes the latest version of a deployable to the channel.</p>
</div>
<div class="paragraph">
<p>Clusters can subscribe to channels for identifying the deployables to deploy to each cluster.
Deployables that are promoted to a channel can be accessed by only the subscriptions for that channel.
When channels and subscriptions exist, the channels and subscriptions work together to retrieve deployables from the channel source and place the deployables at the destination.
The destination is typically a managed cluster, which is abstracted as a namespace.
A managed cluster or namespace can subscribe to multiple channels for identifying the deployables to deploy to the cluster.
Channels ensure that the correct deployable is available for retrieval.
Subscriptions ensure that the deployable is retrieved and placed on the destination namespaces or clusters.
For retrieving a deployable, the subscription operator checks the annotation limits and determines whether to retrieve and apply the deployable to the managed cluster.</p>
</div>
</div>
<div class="sect4">
<h5 id="channel-status-and-synchronization">Channel status and synchronization</h5>
<div class="paragraph">
<p>Channels do not have a status, while a subscription that subscribes to a channel does have a status.
The status for a subscription reports whether the subscription is successfully propagated on the hub cluster, and whether the subscription successfully created or applied a deployable template or created the helmRelease CR.
The status for the deployables that are deployed through the use of channels and subscriptions are reported separately from the subscription.</p>
</div>
<div class="paragraph">
<p>Since channels do not have a status, the resources that are promoted to a channel namespace are not always synchronized with the actual channel storage.</p>
</div>
<div class="paragraph">
<p>When a deployable is included within a channel or updated, the subscription operator for the channel detects the new or updated deployable automatically.
You do not need to issue any notification from the hub cluster to the target managed clusters.</p>
</div>
<div class="paragraph">
<p>For a subscription to a namespace type channel, resources are synchronized for a managed cluster only while the cluster can access the channel namespace.
Since the channel source exists on the hub cluster, the subscription can only pull the resources from the source when access to the hub cluster exists.</p>
</div>
<div class="paragraph">
<p>For subscriptions to Helm repository and object store type channels, the subscription watches the channel source repositories for new or updated Helm charts or deployables.
The subscriptions do not need to communicate with the hub cluster unless the source repository is on the hub cluster.
If subscriptions are set up to pull the latest version for a Helm release or deployable object, and new versions are included in the repository types, the subscriptions can retrieve the versions.</p>
</div>
</div>
<div class="sect4">
<h5 id="creating-and-managing-deployable-resources">Creating and managing deployable resources</h5>
<div class="paragraph">
<p>Deployables (<code>deployable.apps.open-cluster-management.io</code>) are Kubernetes resources that wrap or represent other resources to prevent actions from being run against the resources by Kubernetes and other controllers before the resources are placed on target clusters.
By wrapping the resources, deployables can be directly deployed to one or more target clusters from the storage locations that include the deployables.
When the deployables are on the target cluster or clusters, the resources are unwrapped so that required actions can then run against the resources.</p>
</div>
<div class="paragraph">
<p>This topic only applies to the channel namespace.
You can create deployables to represent Helm releases or to use as a template to wrap Kubernetes resources for deployment to target clusters for constructing or updating applications.
You can create and manage subscriptions to identify, retrieve, and deploy new and updated resources to managed clusters.
By using subscriptions, you can improve the continuous delivery capabilities of your application management.
Samples for all resources are located in the <a href="#application-resource-samples">Application resource samples</a> documentation.</p>
</div>
<div class="paragraph">
<p>Learn more about deployments, then see the following tasks:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Create a deployable</p>
</li>
<li>
<p>Update a deployable</p>
</li>
<li>
<p>Delete a deployable</p>
</li>
<li>
<p>Promote a deployable to a channel</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The deployable controller acts as the default propagation engine and synchronizes local instances of the deployable.
The controller follows the cluster and cluster-namespace model.</p>
</div>
<div class="paragraph">
<p>You do not need to wrap or represent all resources as deployables before you deploy the resources.
Depending on the resource type and the type of channel where you promote the resource, you might not need to create a deployable for the resource.
For instance, you do not need to directly create deployables for resources that are included in Helm repository and GitHub repository channels.
For more information, see <a href="#creating-and-managing-channels">Creating and managing channels</a>.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">
To use REST API, you need to use the <a href="../apis/deployables.json">deployable POST API</a>.
</td>
</tr>
</table>
</div>
<div class="sect5">
<h6 id="create-a-deployable">Create a deployable</h6>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Compose the definition YAML content for your deployable.</p>
</li>
<li>
<p>Create the deployable within Red Hat Advanced Cluster Management for Kubernetes.
You can use Kubernetes command line interface (<code>kubectl</code>) tool or REST API:</p>
<div class="ulist">
<ul>
<li>
<p>To use the Kubernetes CLI tool, complete the following steps:</p>
<div class="olist lowerroman">
<ol class="lowerroman" type="i">
<li>
<p>Compose and save your deployable YAML file with your preferred editing tool.</p>
</li>
<li>
<p>Run the following command to apply your file to an apiserver.
Replace <code>filename</code> with the name of your file:</p>
<div class="listingblock">
<div class="content">
<pre>kubectl apply -f filename.yaml</pre>
</div>
</div>
<div class="paragraph">
<p>Alternatively, you can use a <code>create</code> command to create a deployable.
For instance, you can use the command when you want a name generated and do not want to specifically name the deployable.</p>
</div>
</li>
<li>
<p>Verify that your deployable is created, by running the following command:</p>
<div class="listingblock">
<div class="content">
<pre>kubectl get Deployable</pre>
</div>
</div>
<div class="paragraph">
<p>Ensure that your new deployable is listed in the resulting output.</p>
</div>
</li>
</ol>
</div>
</li>
</ul>
</div>
</li>
</ol>
</div>
</div>
<div class="sect5">
<h6 id="update-a-deployable">Update a deployable</h6>
<div class="paragraph">
<p>To update a deployable with a new version, you can change the deployed resource in managed clusters by changing the deployable resource in the source location on your Hub cluster.
The change is started immediately with a rolling update.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Compose the definition updates for your deployable.</p>
</li>
<li>
<p>Update the definition.
You can use the console, the Kubernetes command line interface (<code>kubectl</code>) tool, or REST API:</p>
<div class="ulist">
<ul>
<li>
<p>To use the console search to find and edit a deployable,</p>
<div class="olist lowerroman">
<ol class="lowerroman" type="i">
<li>
<p>Open the console.</p>
</li>
<li>
<p>Click the <em>Search</em> icon in the Header to open the <em>Search</em> page.</p>
</li>
<li>
<p>Within the search box, filter by <code>kind:deployable</code> to view all deployables.</p>
</li>
<li>
<p>Within the list of all deployables, click the deployable that you want to update.
The YAML for that deployable is displayed.</p>
</li>
<li>
<p>Click <strong>Edit</strong> to enable editing the YAML content.</p>
</li>
<li>
<p>When you are finished your edits, click <strong>Save</strong>.
Your changes are saved and applied automatically.</p>
</li>
</ol>
</div>
</li>
<li>
<p>To use the Kubernetes CLI tool, complete the following steps:</p>
<div class="olist lowerroman">
<ol class="lowerroman" type="i">
<li>
<p>Run the following command against the source deployable:</p>
<div class="listingblock">
<div class="content">
<pre>kubectl edit deployables.app.ibm.com &lt;deployableName&gt;</pre>
</div>
</div>
</li>
<li>
<p>Update any fields or annotations that you need to change.</p>
</li>
</ol>
</div>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>When your changes are saved, the changes can be automatically detected by the channel controller for any channel that subscribes to the deployable.
If the updated deployable no longer meets the channel requirements, the deployable is removed from the channel.
If the deployable still meets the requirements, the updated version can be deployed to any destination clusters where the version was previously deployed.</p>
</div>
</div>
<div class="sect5">
<h6 id="delete-a-deployable">Delete a deployable</h6>
<div class="paragraph">
<p>To delete a deployable, delete the source Kubernetes resource or Helm release from the default namespace where the resource or Helm release is stored.
When you delete the source deployable, any instance of that deployable within a channel is deleted and the deployable is no longer available for deployment.</p>
</div>
<div class="paragraph">
<p>If the deployable was deployed to a managed cluster through a subscription, the deployable is not removed from the managed cluster.
The deployable remains on the managed cluster until the subscription is deleted or is updated to remove or replace the subscribed deployable.
When the subscription is deleted or updated, the deleted deployable is deleted from the managed clusters where it was deployed.</p>
</div>
<div class="paragraph">
<p>You can use the console, the Kubernetes command line interface (<code>kubectl</code>) tool, or REST API to delete a deployable:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>To use the console search to find and delete a deployable,</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Open the console.</p>
</li>
<li>
<p>Click the <em>Search</em> icon in the Header to open the <em>Search</em> page.</p>
</li>
<li>
<p>Within the search box, filter by <code>kind:deployable</code> to view all deployables.</p>
</li>
<li>
<p>Within the list of all deployables, find the row for the deployable that you want to delete.
For that row, expand the <em>Options</em> menu and click <strong>Delete deployable</strong>.
A confirmation window opens.</p>
</li>
<li>
<p>Confirm the removal to delete the deployable.
When the list of all deployables is refreshed, the deployable is no longer included.</p>
</li>
<li>
<p>When the list of all deployables is refreshed, the deployable is no longer displayed.</p>
</li>
</ol>
</div>
</li>
<li>
<p>To use the Kubernetes CLI tool to delete a deployable, complete the following steps:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Run the following command to delete the deployable from a target namespace.
Replace <code>name</code> and <code>namespace</code> with the name of your deployable and your target namespace:</p>
<div class="listingblock">
<div class="content">
<pre>kubectl delete Deployable &lt;name&gt; -n &lt;namespace&gt;</pre>
</div>
</div>
</li>
<li>
<p>Verify that your deployable is deleted by running the following command:</p>
<div class="listingblock">
<div class="content">
<pre>kubectl get Deployable &lt;name&gt;</pre>
</div>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>If you want to only remove a deployable from a specific application, you can update the application to remove the content that defines the deployable.
For more information about updating an application, see <a href="#managing-application-resources">Creating and managing application resources</a>.</p>
</li>
<li>
<p>If you only need to remove the deployable for a specific channel, edit the subscription to no longer include the deployable.
You can also change the defined annotations for the deployable to remove the deployable.
If you change the annotations of the source Kubernetes resource or Helm release so that the deployable no longer meets the required annotations for the channel, the deployable is removed from the channel.
A deployable that is included in a channel must continue to meet the requirements for a channel to remain in that channel.
For instance, the annotations for the deployable must match the defined annotations for the channel (<code>spec.gate.annotations</code>).</p>
</li>
</ul>
</div>
</div>
<div class="sect5">
<h6 id="promote-deployable">Promote a deployable to a channel</h6>
<div class="paragraph">
<p>Before a deployable can be retrieved by a subscription for deployment to a target cluster, the deployable must be included within a channel.
The subscription operator only watches a subscribed channel for new and updated versions of a subscribed deployable.
If the deployable is not within a channel, the deployable cannot be detected and deployed by using a subscription.</p>
</div>
<div class="paragraph">
<p>To promote a deployable to a channel, you can use either of the following methods:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Point the deployable to a specific channel by configuring the <code>spec.channels</code> field with the correct annotations to identify the channel.</p>
</li>
<li>
<p>Include the deployable in the target source location for the channel.
If the deployable has the same <code>spec.gate.annotation</code> values for the channel, the deployable is promoted.
In this case, the deployable does not need to point to a specific channel with the  <code>spec.channels</code> field.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For the channel, the source and <code>spec.gate.annotations</code> must be defined.
For example, if a channel is pointing to the default namespace that includes a deployable, the channel controller checks whether the deployable meets the annotation requirements for the channel.</p>
</div>
</div>
</div>
<div class="sect4">
<h5 id="managing-secrets">Managing secrets</h5>
<div class="paragraph">
<p>You can create Kubernetes secret resources to store authorization credentials and other sensitive information for your subscriptions and application components.
By storing this information as secrets, you can separate the information from the application components that require the information to improve your data security.
Samples for all resources, including secrets, are located in the <a href="#application-resource-samples">Application resource samples</a> documentation.</p>
</div>
<div class="paragraph">
<p>Secrets (<code>Secret</code>) are Kubernetes resources that you can use to store authorization and other sensitive information, such as passwords, OAuth tokens, and SSH keys.
By storing this information as secrets, you can separate the information from the subscriptions and other application components that require the information to avoid exposing sensitive information to help encrypt your data and better control data security within your application lifecycle.</p>
</div>
<div class="paragraph">
<p>You can deploy and use secrets on target managed clusters or reference secrets from subscriptions to access channels that require authorization.</p>
</div>
<div class="paragraph">
<p>If you need to deploy Kubernetes resources or Helm charts to your managed clusters from channels that require authorization, such as entitled GitHub repositories, your subscriptions can reference secrets to provide access to these channels.</p>
</div>
<div class="paragraph">
<p>For instance, if you need to deploy a Helm chart from an entitled GitHub repository, you can create a secret that includes the credentials for accessing the repository.
This secret must be created within the namespace of the channel for the entitled repository.
You can then create a subscription to the channel and include a reference to the secret that is within the channel namespace.
By including the credentials in the secret and referencing the secret through the subscription, you do not need to include the credentials directly within the subscription definition.
The subscription can then pull the secret and use the encrypted credentials within the secret to access the subscribed Helm chart for deployment.</p>
</div>
<div class="paragraph">
<p>You can also deploy Kubernetes secrets from channels to target managed clusters through subscriptions when you have applications on your clusters that require access to services or data sources that require authorization or other sensitive information.
For instance, you might want to include image pull secrets, which include credentials for a Docker image registry, on your clusters.
By including image pull secrets in a managed cluster namespace where a subscription to a Helm chart or deployed Pod is included, the Helm chart or pod can then use the pull secret automatically.</p>
</div>
<div class="paragraph">
<p>When you create and include a secret within a channel for deployment to managed clusters, that secret can be deployed to only the same namespace on the target managed clusters as the channel namespace.</p>
</div>
<div class="paragraph">
<p>When you use Kubernetes secrets with your subscriptions to access channel sources or deploy secrets through subscriptions, the secret and all related data in rest and data in transit remain encrypted.
The Kubernetes secrets are created with the specified data values encrypted.
Transport Layer Security (TLS) is used to encrypt the data in transit.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#create-a-secret">Create a Secret</a></p>
</li>
<li>
<p><a href="#update-a-secret">Update a Secret</a></p>
</li>
<li>
<p><a href="#delete-a-secret">Delete a Secret</a></p>
</li>
</ul>
</div>
<div class="sect5">
<h6 id="create-a-secret">Create a secret</h6>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Compose the definition YAML content for your secret resource.
Samples for all resources, including secrets are located in the <a href="#application-resource-samples">Application resource samples</a> documentation.</p>
</li>
<li>
<p>Create the secret within Red Hat Advanced Cluster Management for Kubernetes.
You can use Kubernetes command line interface (<code>kubectl</code>) tool or REST API:</p>
<div class="ulist">
<ul>
<li>
<p>To use the Kubernetes CLI tool, complete the following steps:</p>
<div class="olist lowerroman">
<ol class="lowerroman" type="i">
<li>
<p>Compose and save your secret YAML file with your preferred editing tool.</p>
</li>
<li>
<p>Run the following command to apply your file to an apiserver.
Replace <code>filename</code> with the name of your file:</p>
<div class="listingblock">
<div class="content">
<pre>kubectl apply -f filename.yaml</pre>
</div>
</div>
<div class="paragraph">
<p>Alternatively, you can use a <code>create secret</code> command to create a secret.
For instance, you can use the command when you want a name generated and do not want to specifically name the secret.</p>
</div>
</li>
<li>
<p>Verify that your secret is created, by running the following command:</p>
<div class="listingblock">
<div class="content">
<pre>kubectl get secrets</pre>
</div>
</div>
<div class="paragraph">
<p>Ensure that your new secret is listed in the resulting output.</p>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>To use REST API, you need to use the Kubernetes API.
For more information, see <a href="https://kubernetes.io/docs/concepts/configuration/secret/">Secrets</a>.</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div class="sect6">
<h7 id="limitations">Limitations</h7>
<div class="ulist">
<ul>
<li>
<p>A secret resource must be included within the same namespace as the channel and subscription that are used to store and deploy the secret.</p>
</li>
<li>
<p>If you are using the secret as an image pull secret, the secret must be in the same namespace as the pod on the managed cluster where the secret is used.
A pod can reference only image pull secrets that are in the same namespace.</p>
</li>
<li>
<p>A secret resource is restricted to 1 Mib based on Kubernetes standards.</p>
</li>
<li>
<p>A subscription cannot detect changes to a secret and pull the updated secret from a channel and deploy the updated secret to managed clusters.
Updates to secrets are only retrieved by a subscription when the subscription needs to directly reference the secret, such as when the subscription detects a new or changed version of the subscribed Kubernetes resource or Helm chart.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect5">
<h6 id="update-a-secret">Update a secret</h6>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Compose the definition updates for your secret.</p>
</li>
<li>
<p>Update the definition.
You can use the console, the Kubernetes command line interface (<code>kubectl</code>) tool, or REST API:</p>
<div class="ulist">
<ul>
<li>
<p>To use the console search to find and edit a secret,</p>
<div class="olist lowerroman">
<ol class="lowerroman" type="i">
<li>
<p>Open the console.</p>
</li>
<li>
<p>From the main menu, click <strong>Search</strong>.</p>
</li>
<li>
<p>Within the search box, filter by <code>kind:secret</code> to view all secrets.</p>
</li>
<li>
<p>Within the list of all secrets, click the secret that you want to update.
The YAML for that secret is displayed.</p>
</li>
<li>
<p>Click <strong>Edit</strong> to enable editing the YAML content.</p>
</li>
<li>
<p>When you are finished your edits, click <strong>Save</strong>.
Your changes are saved and applied automatically.</p>
</li>
</ol>
</div>
</li>
<li>
<p>To use the Kubernetes CLI tool, complete the following steps:</p>
<div class="olist lowerroman">
<ol class="lowerroman" type="i">
<li>
<p>Run the following command against the source secret:     `     kubectl edit secrets &lt;name&gt;    `</p>
</li>
<li>
<p>Update any fields or annotations that you need to change.</p>
</li>
</ol>
</div>
</li>
<li>
<p>To use REST API, you need to use the Kubernetes API.
For more information, see <a href="https://kubernetes.io/docs/concepts/configuration/secret/">Secrets</a>.</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>When your changes are saved, the changes are not automatically detected.
The updated version is not deployed to any destination clusters where the version was previously deployed until the secret is required.</p>
</div>
</div>
<div class="sect5">
<h6 id="delete-a-secret">Delete a secret</h6>
<div class="paragraph">
<p>You can use the console, the Kubernetes command line interface (<code>kubectl</code>) tool, or REST API to delete a secret:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>To use the console search to find and delete a secret,</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Open the console.</p>
</li>
<li>
<p>From the main menu, click <strong>Search</strong>.</p>
</li>
<li>
<p>Within the search box, filter by <code>kind:secret</code> to view all secrets.</p>
</li>
<li>
<p>Within the list of all secrets, select the action menu for the secret that you want to delete.
Click <strong>Delete secret</strong>.</p>
</li>
<li>
<p>When the list of all secrets is refreshed, the secret is no longer displayed.</p>
</li>
</ol>
</div>
</li>
<li>
<p>To use the Kubernetes CLI tool to delete a secret, complete the following steps:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Run the following command to delete the secret from a target namespace.
Replace <code>name</code> and <code>namespace</code> with the name of your secret and your target namespace:</p>
<div class="listingblock">
<div class="content">
<pre>   kubectl delete secret &lt;name&gt; -n &lt;namespace&gt;</pre>
</div>
</div>
</li>
<li>
<p>Verify that your deployable is deleted by running the following command:</p>
<div class="listingblock">
<div class="content">
<pre>   kubectl get secrets &lt;name&gt;</pre>
</div>
</div>
</li>
</ol>
</div>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="creating-and-managing-subscriptions">Creating and managing subscriptions</h4>
<div class="paragraph">
<p>You can create and manage subscriptions to identify, retrieve, and deploy new and updated resources to managed clusters.
By using subscriptions, you can improve the continuous delivery capabilities of your application management.
Samples for all resources, including subscriptions, are located in the <a href="#application-resource-samples">Application resource samples</a> documentation.</p>
</div>
<div class="paragraph">
<p>Learn more about subscriptions, then see the following tasks:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Creating a subscription</p>
</li>
<li>
<p>Matching a subscription to an application</p>
</li>
<li>
<p>Updating a subscription</p>
</li>
<li>
<p>Deleting a subscription</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Subscriptions (<code>subscription.apps.open-cluster-management.io</code>) are Kubernetes resources that serve as sets of definitions for identifying Kubernetes resources (in GitHub, Objectstores, or hub cluster deployables), and Helm charts within channels by using annotations, labels, and versions.</p>
</div>
<div class="paragraph">
<p>Subscription resources can point to a channel for identifying new and updated Helm charts or Kubernetes resources for deployment.
The subscription operator then watches the channel for new and updated charts and deployables.</p>
</div>
<div class="paragraph">
<p>When a new or updated Helm chart or Kubernetes resource is detected, the subscription operator downloads the Helm release version for the specified Helm chart version or the specified Kubernetes resource.
The subscription operator can download these objects directly, or as deployables, from the storage location to target managed clusters without checking the hub cluster first.</p>
</div>
<div class="paragraph">
<p>Subscriptions can filter the deployables that are promoted to a channel to select specific deployables.
For instance, the subscription can filter the deployables to select a specific deployable version.
For this case, the subscription operator checks the <code>version</code> parameter to identify the deployable version to select.</p>
</div>
<div class="sect4">
<h5 id="creating-a-subscription">Creating a subscription</h5>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Compose the definition YAML content for your subscription.
For more information about YAML structure and samples, see <a href="#application-resource-samples">Application resource samples</a> documentation.</p>
</li>
<li>
<p>Create the subscription within Red Hat Advanced Cluster Management for Kubernetes.
You can use the console, the Kubernetes CLI (<code>kubectl</code>) tool, or REST API:</p>
<div class="ulist">
<ul>
<li>
<p>To use the console:</p>
<div class="olist lowerroman">
<ol class="lowerroman" type="i">
<li>
<p>Open the console.</p>
</li>
<li>
<p>From the Navigation menu, click <strong>Manage applications</strong>.
The <strong>Overview</strong> tab for all applications opens.</p>
</li>
<li>
<p>Click the <strong>Resources</strong> tab.</p>
</li>
<li>
<p>Scroll to the <em>Resource pipeline</em> section.
From the list of buttons to the right of the resource summary cards, click <strong>Susbcription</strong>.
The <em>Create a Susbcription</em> editor is displayed.</p>
</li>
<li>
<p>Enter the YAML content to define your subscription or directly update the default YAML template to meet your requirements.</p>
</li>
<li>
<p>When you are finished, click <strong>Save</strong> to create the subscription.
Your new subscription displays within the <strong>Resource pipeline</strong> for the corresponding applications and channels.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Alternatively, you can select to create a subscription when you are working with a specific application.</p>
</div>
<div class="olist lowerroman">
<ol class="lowerroman" type="i">
<li>
<p>From the <strong>Overview</strong> tab for all applications, click the application from the <strong>All applications</strong> list.
The <strong>Overview</strong> tab for that application opens.</p>
</li>
<li>
<p>Click the <strong>Resources</strong> tab for that application.</p>
</li>
<li>
<p>Scroll to the <em>Resource pipeline</em> section.
From the list of buttons to the right of the resource summary cards, click <strong>Susbcription</strong>.
The <em>Create a Susbcription</em> editor is displayed.</p>
</li>
<li>
<p>Enter the YAML content to define your subscription or directly update the default YAML template to meet your requirements.</p>
</li>
<li>
<p>When you are finished, click <strong>Save</strong> to create the subscription.
Your new subscription displays within the <strong>Resource pipeline</strong> for the corresponding applications and channels.</p>
</li>
</ol>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>NOTE: The subscription might not initially display in your resource pipeline for any application.
For the subscription to be associated with an application, you need to include the appropriate values in your subscription definition to match the required values that are defined by the application definition.
For more information, see <a href="#matching-a-subscription-to-an-application">Matching a subscription to an application</a>.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>To use the Kubernetes CLI tool:</p>
<div class="olist lowerroman">
<ol class="lowerroman" type="i">
<li>
<p>Run the following command to apply your file to an apiserver.
Replace <code>filename</code> with the name of your file:</p>
<div class="listingblock">
<div class="content">
<pre>kubectl apply -f filename.yaml</pre>
</div>
</div>
</li>
<li>
<p>Verify that your subscription resource is created, by running the following command:</p>
<div class="listingblock">
<div class="content">
<pre>kubectl get Subscription</pre>
</div>
</div>
<div class="paragraph">
<p>Ensure that your new subscription is listed in the resulting output.</p>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>To use REST API, you need to use the <a href="../apis/subscriptions.json">subscription POST API</a>.</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>After your subscription is created, your subscription can have one of the following statuses:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>Subscribed</code> (managed clusters only) The subscription has successfully subscribed to the specified resources and the resources are deployed.</p>
</li>
<li>
<p><code>Propagated</code> (hub cluster only) The subsequent subscriptions based on your specified <code>spec.placement</code> setting are generated for deployment to the appropriate managed clusters, if any.
However, the subscriptions might not actually be deployed.</p>
</li>
<li>
<p><code>Failed</code> The subscription failed to subscribe to the specified resources.</p>
</li>
<li>
<p>No status The subscription operator is either not online, or the <code>spec.placement</code> setting for the subscription is missing.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If you created the subscription for a multi-cluster environment, the subscription is created on the Hub cluster.
Depending on your <code>spec.placement</code> settings, the subsequent placement of your subscription on other clusters is different.
If you include more than one placement setting within the <code>spec.placement</code> section, the subscription operator uses the following priority to select the placement setting to use:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>spec.placement.placementRef</code></p>
<div class="paragraph">
<p>The subscription is placed on the clusters that are identified by the specified <code>PlacementRule</code> resource.</p>
</div>
</li>
<li>
<p><code>spec.placement.clusters</code></p>
<div class="paragraph">
<p>The subscription is placed on the clusters that are specified as the value for this field.</p>
</div>
</li>
<li>
<p><code>spec.placement.clusterSelector</code></p>
<div class="paragraph">
<p>The subscription is placed on the clusters that match the specified label selector that is defined as the value for this field.</p>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>If you created your subscription on a stand-alone cluster or a cluster that you want to manage directly, the subscription is created on only that cluster.
Depending on the value that you set for the <code>spec.placement.local</code> field within the subscription definition, the subsequent behavior of your subscription is different.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>true</code></p>
<div class="paragraph">
<p>The subscription synchronizes with the specified channel that is local to that cluster.</p>
</div>
</li>
<li>
<p><code>false</code></p>
<div class="paragraph">
<p>The subscription does not subscribe to any resources from the specified channel.</p>
</div>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="matching-a-subscription-to-an-application">Matching a subscription to an application</h5>
<div class="paragraph">
<p>To associate a subscription with an application, both the subscription and application must be in the same namespace so that the subscription can retrieve Helm charts, deployables, or other resources from a channel.</p>
</div>
<div class="paragraph">
<p>Within the application resource definition, the definition must include <code>spec.componentKinds</code> settings to indicate that the application uses a subscription.
The definition must also include <code>spec.selector</code> settings to define the labels (<code>matchLabels</code>) or expressions (<code>matchExpressions</code>) to use to match the application with the subscription.</p>
</div>
<div class="paragraph">
<p>Within the subscription resource definition, the definition must include the required values to match the labels or expressions that are defined by the application.</p>
</div>
<div class="paragraph">
<p>When the subscription is associated with an application, the subscription uses the <code>spec.placement</code> settings for the subscription or deployable to deploy any subscribed charts, deployables or other Kubernetes resources for the application.</p>
</div>
<div class="paragraph">
<p>For more information about the resource definition for an application, see <a href="#managing-application-resources">Creating and managing application resources</a>.</p>
</div>
</div>
<div class="sect4">
<h5 id="updating-a-subscription">Updating a subscription</h5>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Compose the definition YAML content for your subscription.</p>
</li>
<li>
<p>Create the subscription within Red Hat Advanced Cluster Management for Kubernetes.
You can use the console, the Kubernetes CLI (<code>kubectl</code>) tool, or REST API:</p>
<div class="ulist">
<ul>
<li>
<p>To use the console:</p>
<div class="olist lowerroman">
<ol class="lowerroman" type="i">
<li>
<p>Open the console.</p>
</li>
<li>
<p>From the Navigation menu, click <strong>Manage applications</strong>.
The <strong>Overview</strong> tab for all applications opens.</p>
</li>
<li>
<p>Click the <strong>Resources</strong> tab.</p>
</li>
<li>
<p>Scroll down the page to <strong>Resource pipeline</strong> section.
Expand the row for the application that uses the subscription that you want to edit.</p>
</li>
<li>
<p>For the subscription that you want to update, click the <strong>Edit</strong> icon for the YAML.
The <strong>Edit subscription</strong> window opens.</p>
</li>
<li>
<p>Edit the YAML.</p>
</li>
<li>
<p>When you are finished, click <strong>Save</strong> to update the subscription.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Alternatively, you can select to update the subscription when you are working with a specific application.</p>
</div>
<div class="olist lowerroman">
<ol class="lowerroman" type="i">
<li>
<p>From the <strong>Overview</strong> tab for all applications, click the application from the <strong>All applications</strong> list.
The <strong>Overview</strong> tab for that application opens.</p>
</li>
<li>
<p>Click the <strong>Resources</strong> tab for that application.</p>
</li>
<li>
<p>Scroll down the page to <strong>Resource pipeline</strong> section.</p>
</li>
<li>
<p>For the subscription that you want to update, click the <strong>Edit</strong> icon for the YAML.
The <strong>Edit subscription</strong> window opens.</p>
</li>
<li>
<p>Edit the YAML.</p>
</li>
<li>
<p>When you are finished, click <strong>Save</strong> to update the subscription.</p>
</li>
</ol>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>You can also use the console search to find and edit a subscription:</p>
</div>
<div class="olist lowerroman">
<ol class="lowerroman" type="i">
<li>
<p>Click the <strong>Search</strong> icon in the Header.</p>
</li>
<li>
<p>Within the search box, filter by <code>kind:subscription</code> to view all subscriptions.</p>
</li>
<li>
<p>Within the list of all subscriptions, click the subscription that you want to update.
The YAML for the subscription is displayed.</p>
</li>
<li>
<p>Click <strong>Edit</strong> to enable editing the YAML content.</p>
</li>
<li>
<p>When you are finished your edits, click <strong>Save</strong>.
Your changes are saved and applied automatically.</p>
<div class="ulist">
<ul>
<li>
<p>To use the Kubernetes CLI tool, the steps are the same as for creating a subscription.</p>
</li>
<li>
<p>To use REST API, use the <a href="../apis/subscriptions.json">subscription PATCH API</a>.</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
</li>
</ol>
</div>
</div>
<div class="sect4">
<h5 id="deleting-subscriptions">Deleting subscriptions</h5>
<div class="paragraph">
<p>To delete a subscription, you can use the console, the Kubernetes command line interface (<code>kubectl</code>) tool, or REST API.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>To use the console, use the console search to find and delete a subscription:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Open the console.</p>
</li>
<li>
<p>Click the <strong>Search</strong> icon in the Header.</p>
</li>
<li>
<p>Within the search box, filter by <code>kind:subscription</code> to view all subscriptions.</p>
</li>
<li>
<p>Within the list of all subscriptions, expand the <em>Options</em> menu for the subscription that you want to delete.
Click <strong>Delete subscription</strong>.</p>
</li>
<li>
<p>When the list of all subscriptions is refreshed, the subscription is no longer displayed.</p>
</li>
</ol>
</div>
</li>
<li>
<p>To use the Kubernetes CLI tool:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Run the following command to delete the subscription from a target namespace.
Replace <code>name</code> and <code>namespace</code> with the name of your subscription and your target namespace:</p>
<div class="listingblock">
<div class="content">
<pre>kubectl delete Subscription &lt;name&gt; -n &lt;namespace&gt;</pre>
</div>
</div>
</li>
<li>
<p>Verify that your subscription is deleted by running the following command:</p>
<div class="listingblock">
<div class="content">
<pre>kubectl get Subscription &lt;name&gt;</pre>
</div>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>To use REST API, use the <a href="../apis/subscriptions.json">subscription DELETE API</a>.</p>
</li>
</ul>
</div>
<div class="sect5">
<h6 id="package-overrides">Package overrides</h6>
<div class="paragraph">
<p>Package overrides for a subscription override values for the Helm chart or Kubernetes resource that is subscribed to by the subscription.</p>
</div>
<div class="paragraph">
<p>To configure a package override, specify the field within the Kubernetes resource spec to override as the value for the <code>path</code> field.
Specify the replacement value as the value for the <code>value</code> field.</p>
</div>
<div class="paragraph">
<p>For example, if you need to override the values field within the spec for a Helm release (<code>HelmRelease.app.ibm.com</code>) for a subscribed Helm chart, you need to set the value for the <code>path</code> field in your subscription definition to <code>spec</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>packageOverrides:
- packageName: nginx-ingress
  packageOverrides:
  - path: spec
    value: my-override-values</pre>
</div>
</div>
<div class="paragraph">
<p>The contents for the <code>value</code> field are used to override the values within the <code>spec</code> field of the <code>HelmRelease</code> spec.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>For a Helm release, override values for the <code>spec</code> field are merged into the Helm release <code>values.yaml</code> file to override the existing values.
This file is used to retrieve the configurable variables for the Helm release.</p>
</li>
<li>
<p>If you need to override the release name for a Helm release, include the <code>packageOverride</code> section within your definition.
Define the <code>packageAlias</code> for the Helm release by including the following fields:</p>
<div class="ulist">
<ul>
<li>
<p><code>packageName</code> to identify the Helm chart.</p>
</li>
<li>
<p><code>packageAlias</code> to indicate that you are overriding the release name.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>By default, if no Helm release name is specified, the Helm chart name is used to identify the release.
In some cases, such as when there are multiple releases subscribed to the same chart, conflicts can occur.
The release name must be unique among the subscriptions within a namespace.
If the release name for a subscription that you are creating is not unique, an error occurs.
You must set a different release name for your subscription by defining a <code>packageOverride</code>.
If you want to change the name within an existing subscription, you must first delete that subscription and then recreate the subscription with the preferred release name.</p>
</div>
<div class="paragraph">
<p>+</p>
</div>
<div class="listingblock">
<div class="content">
<pre>packageOverrides:
- packageName: nginx-ingress
  packageAlias: my-helm-release-name</pre>
</div>
</div>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="creating-and-managing-placement-rules">Creating and managing placement rules</h4>
<div class="paragraph">
<p>You can create and manage placement rules to define where and how Helm charts and deployables are deployed.
Placement rules help you facilitate multi-cluster deployments of your deployables.
Samples for all resources, including placement rules, are located in the <a href="#application-resource-samples">Application resource samples</a> documentation.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Create a placement rule</p>
</li>
<li>
<p>Assign a placement rule</p>
</li>
<li>
<p>Placement rule status</p>
</li>
<li>
<p>Update a placement rule</p>
</li>
<li>
<p>Delete a placement rule</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The custom resource definition (CRD) and controller for placement rules replaces the placement policies that were used for applications in previous versions of Red Hat Advanced Cluster Management for Kubernetes.
Placement policies are still used for governance and risk policies.</p>
</div>
<div class="paragraph">
<p>Placement rules can be defined for subscriptions and for deployables.
Define the placement rule at the subscription level for multi-cluster deployments.
Define the placement rule for a specific deployable for single-cluster deployments or to override placement settings.</p>
</div>
<div class="sect4">
<h5 id="create-a-placement-rule">Create a placement rule</h5>
<div class="paragraph">
<p>Placement rules can be defined for subscriptions and for deployables.
Define the placement rule at the subscription level for multi-cluster deployments.
Define the placement rule for a specific deployable for single-cluster deployments or to override placement settings.</p>
</div>
<div class="paragraph">
<p><strong>Prerequisite:</strong> Be sure the <code>endpoint-appmgr</code> is running.
You can run <code>oc get pods -n multicluster-endpoint</code> to check for pods.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Compose the definition YAML content for your placement rule.
Samples for all resources, including placement rules, are located in the <a href="#application-resource-samples">Application resource samples</a> documentation.</p>
</li>
<li>
<p>Create the placement rule within Red Hat Advanced Cluster Management for Kubernetes.
You can define a placement rule as a separate resource or define the rule within the definition for a deployable or subscription.
As a best practice, define placement rules as a separate resource when the rule might need to be referenced by multiple resources.</p>
<div class="paragraph">
<p>For more information about creating the definition for a deployable or subscriptions, see:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#creating-and-managing-deployable-resources">Creating and managing deployable resources</a></p>
</li>
<li>
<p><a href="#creating-and-managing-subscriptions">Creating and managing subscriptions</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>To create a placement rule as a separate resource, you can use the console, the Kubernetes CLI (<code>kubectl</code>) tool, or REST API:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>To use the console:</p>
<div class="olist lowerroman">
<ol class="lowerroman" type="i">
<li>
<p>Open the console.</p>
</li>
<li>
<p>From the Navigation menu, click <strong>Manage applications</strong>.
The <strong>Overview</strong> tab for all applications opens.</p>
</li>
<li>
<p>Click the <strong>Resources</strong> tab.</p>
</li>
<li>
<p>Scroll to the <em>Resource pipeline</em> section.
From the list of buttons, find and click <strong>Placement Rule</strong>.
The <em>Create a placement rule</em> editor is displayed.</p>
</li>
<li>
<p>Enter the YAML content to define your placement rule or directly update the default YAML template to meet your requirements.</p>
</li>
<li>
<p>When you are finished adding or editing the YAML, click <strong>Save</strong> to create the placement rule.</p>
</li>
<li>
<p>From the list of resource summary cards, click the <em>PLACEMENT RULES</em> card.
The <em>Search</em> dashboard is displayed and lists all placement rules that are used by the applications that are selected on the <em>Applications</em> dashboard.
Your new placement rule does not display in this list until the rule is referenced by a subscription that is used by an application.
To verify that your new placement rule is created, enter <code>kind:placementrule</code> in the search box and run your search.
Ensure that your new rule is displayed in the search results list.</p>
</li>
</ol>
</div>
</li>
<li>
<p>To use the Kubernetes CLI tool:</p>
<div class="olist lowerroman">
<ol class="lowerroman" type="i">
<li>
<p>Run the following command to apply your file to an apiserver.
Replace <code>filename</code> with the name of your file:</p>
<div class="listingblock">
<div class="content">
<pre>kubectl apply -f filename.yaml</pre>
</div>
</div>
</li>
<li>
<p>Verify that your placement rule is created, by running the following command:</p>
<div class="listingblock">
<div class="content">
<pre>kubectl get PlacementRule</pre>
</div>
</div>
<div class="paragraph">
<p>Ensure that your new placement rule is listed in the resulting output.</p>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>To use REST API, you need to use the <a href="../apis/placementrules.json">placement rule POST API</a>.</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
</div>
<div class="sect4">
<h5 id="assign-a-placement-rule">Assign a placement rule</h5>
<div class="paragraph">
<p>You can assign a placement rule to a deployable or subscription.
To assign a placement rule, you need to update the spec for the deployable or subscription to reference the placement rule.</p>
</div>
<div class="paragraph">
<p>Include the following <code>placement</code> fields in your deployable or subscription spec with the values to reference the placement rule:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>placement:
  placementRef:
    name:
    kind: PlacementRule</pre>
</div>
</div>
<div class="paragraph">
<p>Include the name of your placement rule as the value for the <code>name</code> field.</p>
</div>
<div class="paragraph">
<p>For more information about updating the definition for a deployable or subscription, see:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#creating-and-managing-deployable-resources">Creating and managing deployable resources</a></p>
</li>
<li>
<p><a href="#creating-and-managing-subscriptions">Creating and managing subscriptions</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>When a placement rule is assigned to a subscription, you can view the assignment on the Applications dashboard within the console.
To view the assignment:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Open the console.</p>
</li>
<li>
<p>From the Navigation menu, click <strong>Manage applications</strong>.
The <strong>Overview</strong> tab for all applications opens.</p>
</li>
<li>
<p>Click the <strong>Resources</strong> tab.</p>
</li>
<li>
<p>Scroll to the <strong>Resource pipeline</strong> section.
Within the table that lists your applications, expand the row for the application that includes the subscription that is assigned the placement rule.</p>
</li>
<li>
<p>From the expanded view for the application, you can see the available subscriptions for each channel.
The details for each subscription include any assigned placement rule.
If needed, you can select to view or edit the YAML for the placement rule, subscription, and channel from this resource pipeline table.</p>
</li>
</ol>
</div>
</div>
<div class="sect4">
<h5 id="placement-rule-status">Placement rule status</h5>
<div class="paragraph">
<p>When a placement rule is created and in use, you can view the status details for the rule.
This status is appended to the YAML definition for a placement rule and indicates the target clusters where the rule is used for placing deployables.
For more information about the available status fields, see <a href="#placement-rule-sample-files">Placement rule status definition</a>.</p>
</div>
<div class="paragraph">
<p>To view the status fields for a placement rule, you can use the console, the Kubernetes command line interface (<code>kubectl</code>) tool, or REST API.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>To use the console,</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Open the console.</p>
</li>
<li>
<p>Click the <strong>Search</strong> icon in the Header.</p>
</li>
<li>
<p>Within the search box, filter by <code>kind:placementrule</code> to view all placement rules.</p>
</li>
<li>
<p>Within the list of all placement rules, click the placement rule that you want review.
The YAML for that rule is displayed.</p>
</li>
<li>
<p>Review the fields and values within the <code>status</code> section of the YAML content.</p>
</li>
</ol>
</div>
</li>
<li>
<p>To use the Kubernetes CLI tool, run the following command.
Replace <code>name</code> and <code>namespace</code> with the name of the placement rule and the target namespace:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Run the following command</p>
<div class="listingblock">
<div class="content">
<pre>kubectl get PlacementRule &lt;name&gt; -n &lt;namespace&gt;</pre>
</div>
</div>
</li>
<li>
<p>Review the fields and values within the <code>status</code> section of the YAML content.</p>
</li>
</ol>
</div>
</li>
<li>
<p>To use REST API, you need to use the <a href="../apis/placementrules.json">placement rule GET API</a>.</p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="update-a-placement-rule">Update a placement rule</h5>
<div class="paragraph">
<p>To update a placement rule that is a separate resource, you can use the console, the Kubernetes command line interface (<code>kubectl</code>) tool, or REST API.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>To use the console to edit a placement rule, complete the following steps:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Open the console.</p>
</li>
<li>
<p>Click the <strong>Search</strong> icon in the Header.</p>
</li>
<li>
<p>Within the search box, filter by <code>kind:placementrule</code> to view all placement rules.</p>
</li>
<li>
<p>Within the list of all placement rules, click the placement rule that you want to update.
The YAML for the rule is displayed.</p>
</li>
<li>
<p>Click <strong>Edit</strong> to enable editing the YAML content.</p>
</li>
<li>
<p>When you are finished your edits, click <strong>Save</strong>.
Your changes are saved and applied automatically.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Alternatively, you can select to edit the YAML from the Applications dashboard resource pipeline table.</p>
</div>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>From the Navigation menu, click <strong>Manage applications</strong>.
The <strong>Overview</strong> tab for all applications opens.</p>
</li>
<li>
<p>Click the <strong>Resources</strong> tab.</p>
</li>
<li>
<p>Scroll to the <strong>Resource pipeline</strong> section.
Within the table that lists your applications, expand the row for the application that includes the subscription that is assigned the placement rule.</p>
</li>
<li>
<p>From the expanded view for the application, you can see the available subscriptions for each channel.
The details for each subscription include any assigned placement rule.
Click the link for the placement rule to open the <em>Edit placement rule</em> editor.
The YAML for the rule is displayed.</p>
</li>
<li>
<p>When you are finished your edits, click <strong>Save</strong>.
Your changes are saved and applied automatically.</p>
</li>
</ol>
</div>
</li>
<li>
<p>To use the Kubernetes CLI tool, the steps are the same as for creating a placement rule.</p>
</li>
<li>
<p>To use REST API, you need to use the <a href="../apis/placementrules.json">placement rule PATCH API</a>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>To update a placement rule that is defined within the definition for a deployable or subscription, the steps are the same as for updating that resource.
For more information, see:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#creating-and-managing-deployable-resources">Creating and managing deployable resources</a></p>
</li>
<li>
<p><a href="#creating-and-managing-subscriptions">Creating and managing subscriptions</a></p>
</li>
</ul>
</div>
</div>
<div class="sect4">
<h5 id="delete-a-placement-rule">Delete a placement rule</h5>
<div class="paragraph">
<p>To delete a placement rule that is a separate resource, you can use the console, the Kubernetes command line interface (<code>kubectl</code>) tool, or REST API.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>To use the console, use the console search to find and delete a placement rule:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Open the console.</p>
</li>
<li>
<p>Click the <strong>Search</strong> icon in the Header.</p>
</li>
<li>
<p>Within the search box, filter by <code>kind:placementrule</code> to view all placement rules.</p>
</li>
<li>
<p>Within the list of all placement rules, expand the <em>Options</em> menu for the placement rule that you want to delete.
Click <strong>Delete placement rules</strong>.</p>
</li>
<li>
<p>When the list of all placement rules is refreshed, the placement rule is no longer displayed.</p>
</li>
</ol>
</div>
</li>
<li>
<p>To use the Kubernetes CLI tool, complete the following steps:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Run the following command to delete the placement rule from a target namespace.
Replace <code>name</code> and <code>namespace</code> with the name of your placement rule and your target namespace:</p>
<div class="listingblock">
<div class="content">
<pre>kubectl delete PlacementRule &lt;name&gt; -n &lt;namespace&gt;</pre>
</div>
</div>
</li>
<li>
<p>Verify that your placement rule resource is deleted by running the following command:</p>
<div class="listingblock">
<div class="content">
<pre>kubectl get PlacementRule &lt;name&gt;</pre>
</div>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>To use REST API, you need to use the placement rule DELETE API:</p>
<div class="ulist">
<ul>
<li>
<p><a href="../apis/placementrules.json">Placement rule APIs</a>.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>To delete a placement rule that is defined within the definition for a deployable or subscription, edit the definition for that resource to remove the placement rule definition.
The steps are the same as for updating that resource.
For more information, see:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#creating-and-managing-deployable-resources">Creating and managing deployable resources</a></p>
</li>
<li>
<p><a href="#creating-and-managing-subscriptions">Creating and managing subscriptions</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect3">
<h4 id="managing-application-resources">Creating and managing application resources</h4>
<div class="paragraph">
<p>Create application resources to group and view the application components that make up your overall Red Hat Advanced Cluster Management for Kubernetes multi-cluster applications.
Samples for all resources are located in the <a href="#application-resource-samples">Application resource samples</a> documentation.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Create an application</p>
</li>
<li>
<p>Matching an application to a subscription</p>
</li>
<li>
<p>Update an application</p>
</li>
<li>
<p>Delete an application</p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="create-an-application">Create an application</h5>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Compose your application definition YAML content.
To create or update an application resource, you must first compose the YAML file that defines the resource.</p>
</li>
<li>
<p>Create the application within Red Hat Advanced Cluster Management for Kubernetes.
You can use the console, the Kubernetes command line interface (<code>kubectl</code>) tool, or REST API:</p>
<div class="ulist">
<ul>
<li>
<p>To use the console,</p>
<div class="olist lowerroman">
<ol class="lowerroman" type="i">
<li>
<p>Open the console.</p>
</li>
<li>
<p>From the Navigation menu, click <strong>Manage applications</strong>.
The <strong>Overview</strong> tab for all applications opens.</p>
</li>
<li>
<p>Click <strong>New application</strong>.
The <em>Create application</em> window opens.</p>
</li>
<li>
<p>Update or replace the default YAML content within the editor to define your application.</p>
</li>
<li>
<p>When you are finished adding and editing the YAML, click <strong>Save</strong> to create the application.
Your new application displays within the list of applications on the <strong>Overview</strong> tab.</p>
</li>
</ol>
</div>
</li>
<li>
<p>To use the Kubernetes CLI tool,</p>
<div class="olist lowerroman">
<ol class="lowerroman" type="i">
<li>
<p>Compose and save your application YAML file with your preferred editing tool.</p>
</li>
<li>
<p>Run the following command to apply your file to an apiserver.
Replace <code>filename</code> with the name of your file:</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">kubectl apply -f filename.yaml</code></pre>
</div>
</div>
</li>
<li>
<p>Verify that your application resource is created by running the following command:</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">kubectl get Application</code></pre>
</div>
</div>
<div class="paragraph">
<p>Ensure that your new application is listed in the resulting output.</p>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>To use REST API, use the <a href="../apis/application.json">application POST API</a>.</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
</div>
<div class="sect4">
<h5 id="matching-an-application-to-a-subscription">Matching an application to a subscription</h5>
<div class="paragraph">
<p>To associate a subscription with an application, both the subscription and application must be in the same namespace so that the subscription can retrieve Helm charts, deployables, or other resources from a channel to deploy for an application.</p>
</div>
<div class="paragraph">
<p>Within the application resource definition, the definition must include <code>spec.componentKinds</code> settings to indicate that the application uses a subscription.
The definition must also include <code>spec.selector</code> settings to define the labels (<code>matchLabels</code>) or expressions (<code>matchExpressions</code>) to use to match the application with the subscription.</p>
</div>
<div class="paragraph">
<p>Within the subscription resource definition, the definition must include the required values to match the labels or expressions that are defined by the application.</p>
</div>
<div class="paragraph">
<p>When the subscription is associated with an application, the subscription uses the <code>spec.placement</code> settings for the subscription or deployable to deploy any subscribed charts, deployables or other Kubernetes resources for the application.</p>
</div>
<div class="paragraph">
<p>For more information about the resource definition for an application, see <a href="#managing-application-resources">Creating and managing application resources</a>.</p>
</div>
</div>
<div class="sect4">
<h5 id="update-an-application">Update an application</h5>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Compose your application definition updates.
Samples for all resources are located in the <a href="#application-resource-samples">Application resource samples</a> documentation.</p>
</li>
<li>
<p>Update the application definition.
You can use the console, the Kubernetes command line interface (<code>kubectl</code>) tool, or REST API:</p>
<div class="ulist">
<ul>
<li>
<p>To use the console, complete the following steps:</p>
<div class="olist lowerroman">
<ol class="lowerroman" type="i">
<li>
<p>Open the console.</p>
</li>
<li>
<p>From the Navigation menu, click <strong>Manage applications</strong>.
The <strong>Overview</strong> tab for all applications opens.</p>
</li>
<li>
<p>Within the list of all applications, find the row for the application that you want to update.
For that row expand the <em>Options</em> menu and click <strong>Edit application</strong>.
The <em>Edit application</em> window opens.</p>
</li>
<li>
<p>Update the YAML content for the application.</p>
</li>
<li>
<p>When you are finished your edits, click <strong>Close editor</strong>.
Your changes are saved and applied automatically.</p>
</li>
</ol>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>You can also use the console search to find and edit an application:</p>
</div>
<div class="olist lowerroman">
<ol class="lowerroman" type="i">
<li>
<p>Click the <em>Search</em> icon in the Header to open the <em>Search</em> page.</p>
</li>
<li>
<p>Within the search box, filter by <code>kind:application</code> to view all applications.</p>
</li>
<li>
<p>Within the list of all applications, click the application that you want to update.
The <em>Overview</em> page for that application opens.</p>
</li>
<li>
<p>Click <strong>Edit app</strong>.
The <em>Edit application</em> window opens.</p>
</li>
<li>
<p>Update the YAML content for the application.</p>
</li>
<li>
<p>When you are finished your edits, click <strong>Close editor</strong>.
Your changes are saved and applied automatically.</p>
<div class="ulist">
<ul>
<li>
<p>To use the Kubernetes CLI tool, the steps are the same as for creating an application.</p>
</li>
<li>
<p>To use REST API, use the <a href="../apis/application.json">application PATCH API</a>.</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
</li>
</ol>
</div>
</div>
<div class="sect4">
<h5 id="delete-an-application">Delete an application</h5>
<div class="paragraph">
<p>To delete an application, you can use the console, the Kubernetes command line interface (<code>kubectl</code>) tool, or REST API:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>To use the console, complete the following steps:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Open the console.</p>
</li>
<li>
<p>From the Navigation menu, click <strong>Manage applications</strong>.
The <strong>Overview</strong> tab for all applications opens.</p>
</li>
<li>
<p>Within the list of all applications, find the row for the application that you want to delete.
For that row expand the <em>Options</em> menu and click <strong>Delete application</strong>.
A confirmation window opens.</p>
</li>
<li>
<p>Confirm the removal to delete the application.
When the list of all applications is refreshed, the application is no longer included.</p>
</li>
<li>
<p>When the list of all applications is refreshed, the application is no longer displayed.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>You can also use the console search to find and delete an application:</p>
</div>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>From the Navigation menu, click <strong>Search</strong>.</p>
</li>
<li>
<p>Within the search box, filter by <code>kind:application</code> to view all applications.</p>
</li>
<li>
<p>Within the list of all applications, expand the <em>Options</em> menu for the application that you want to delete.
Click <strong>Delete application</strong>.
A confirmation window opens.</p>
</li>
<li>
<p>Confirm the removal to delete the application.
When the list of all applications is refreshed, the application is no longer included.</p>
</li>
<li>
<p>When the list of all applications is refreshed, the application is no longer displayed.</p>
</li>
</ol>
</div>
</li>
<li>
<p>To use the Kubernetes CLI tool, complete the following steps:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Run the following command to delete the application from a target namespace.
Replace <code>name</code> and <code>namespace</code> with the name of your application and your target namespace:</p>
<div class="listingblock">
<div class="content">
<pre>kubectl delete Application &lt;name&gt; -n &lt;namespace&gt;</pre>
</div>
</div>
</li>
<li>
<p>Verify that your application resource is deleted by running the following command:</p>
<div class="listingblock">
<div class="content">
<pre>kubectl get Application &lt;name&gt;</pre>
</div>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>To use REST API, use the <a href="../apis/application.json">application DELETE API</a>.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect3">
<h4 id="managing-deployables-with-a-rolling-update">Managing deployables with a rolling update</h4>
<div class="paragraph">
<p>If you want to roll out an update for a subscription to your managed clusters, you can configure the deployment to occur on only a percentage of your managed clusters at a time.
When the deployment on those clusters is successful, the deployment is rolled out incrementally to the remaining clusters.</p>
</div>
<div class="paragraph">
<p>When you run a percentage rollout, the rolling update happens on only the specified percentage of clusters.
As the deployment completes on one cluster, the deployment begins on another cluster while maintaining the percentage of clusters that are made unavailable.
If an error occurs during the deployment to one cluster, the deployment to that cluster is stopped.
The cluster remains unavailable until the error is resolved and the deployment can complete on that cluster.
Meanwhile, the overall deployment continues on the remaining clusters.
The cluster or clusters where an error occurred are still counted towards the percentage of clusters where the rolling update occurs.
If the number of clusters where occurred matches the specified percentage for the rolling update, the overall rollout for the deployment is stopped until the errors are resolved.</p>
</div>
<div class="paragraph">
<p>With a percentage rollout, you can phase in a deployment to your clusters to find any bugs or issues during the rollout before the deployment begins on all clusters.
For instance, you can use a percentage rollout when you need to deploy a patch to your clusters.
You can start your deployment with a rollout of the patch to 10% of your clusters to view the success of the deployment as the rolling update occurs.
When the deployment is successful on a cluster, the deployment continues to another cluster to reach the 10% of clusters until the overall deployment reaches 100% completion.
By limiting the deployment to only a percentage of clusters you can determine earlier whether a deployment is failing and stop the deployment to correct any issues.</p>
</div>
<div class="paragraph">
<p>The rolling update for a deployment runs on the hub cluster.
The deployment rollout occurs for the managed cluster namespaces that exist on the hub cluster.
When the rolling update is completed, the updates can be propagated to the actual managed clusters, such as by using an existing subscription for each managed cluster.
The managed cluster namespaces that are updated are defined by the placement rule for the subscription or deployable.</p>
</div>
<div class="paragraph">
<p>You can configure a percentage rollout for a subscription or directly for a deployable resource.</p>
</div>
<div class="paragraph">
<p>A rolling update for a subscription uses the rolling update feature that is included in the Kubernetes resource definition.
To configure this feature for a deploying a subscription, you need to create or update the following Kubernetes resources:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>The initial subscription resource.</p>
<div class="paragraph">
<p>This resource is used to define and deploy the initial resource that later updated through the rolling update.
As part of the definition for this initial resource, you need to identify that a rolling update is used for deploying updates.
You also need to identify the percentage of clusters to be updated at a time, the associated target resource, and the placement rule that identifies the target clusters.</p>
</div>
</li>
<li>
<p>The target subscription resource.</p>
<div class="paragraph">
<p>This resource defines the version of the subscription that is being deployed through the rolling update.</p>
</div>
</li>
<li>
<p>The placement rule for the initial subscription resource.</p>
<div class="paragraph">
<p>This placement rule identifies the clusters where the initial and target resource is deployed.
The rolling update does not target any clusters that are not defined by the placement rule.
+  <strong>Note:</strong> This placement rule must be associated with only the initial resource.
The rolling update uses only the placement rule that is associated with the initial resource.
Do not include parameters in the target subscription resource to associate that resource with a placement rule.</p>
</div>
</li>
</ol>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Limitations and known issues
</td>
</tr>
</table>
</div>
<div class="ulist">
<ul>
<li>
<p>For a subscription rolling update, the initial and target subscription must be included within the same namespace.</p>
</li>
<li>
<p>Target subscriptions cannot define any placement rule.
The initial subscription must define the placement rule for the rolling update.</p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="configuring-a-rolling-update-for-a-subscription">Configuring a rolling update for a subscription</h5>
<div class="paragraph">
<p>If you have existing subscriptions that you want to configure to use a rolling update, you need to create your target subscription and update your initial existing subscription to include the required annotations.</p>
</div>
<div class="sect5">
<h6 id="deploy_pre">Prerequisites</h6>
<div class="ulist">
<ul>
<li>
<p>You have an initial subscription that points to the initial version of a Kubernetes resource or Helm chart and a placement rule for defining the resource or chart deployment.</p>
<div class="paragraph">
<p>This initial subscription serves as the channel subscription and includes the settings for defining the channel and package information for the subscription.</p>
</div>
<div class="paragraph">
<p>For more information about how to define a subscription, see <a href="#creating-and-managing-subscriptions">Creating and managing subscriptions</a>.</p>
</div>
<div class="paragraph">
<p>For more information about how to define a placement rule, see <a href="#creating-and-managing-placement-rules">Creating and managing placement rules</a>.</p>
</div>
</li>
<li>
<p>The subscription that points to the initial resource or chart version is deployed to your target managed clusters and has been used to deploy the initial version of the resource or chart to the same target managed clusters.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>At this stage no rolling update is configured and any change to the initial version at the source is then deployed to all managed clusters.</p>
</div>
</div>
<div class="sect5">
<h6 id="procedure_deploy">Procedure</h6>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create the target subscription resource YAML definition to point to the newer version of the resource or chart to deploy.
This definition must use the same definition structure as any subscription application resource kind.
However, this target subscription must not include the annotations for defining a rolling update and must not define any placement rule.</p>
</li>
<li>
<p>Update the initial subscription YAML definition to include the following annotations to indicate that a rolling update is used for updating the subscription:</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">annotations:
  apps.open-cluster-management.io/rollingupdate-target:
  apps.open-cluster-management.io/rollingupdate-maxunavailable:</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>The <code>apps.open-cluster-management.io/rollingupdate-target</code> annotation identifies the target subscription.</p>
</li>
<li>
<p>The <code>apps.open-cluster-management.io/rollingupdate-maxunavailable</code> annotation identifies the maximum percentage of clusters that can be deployed at a time and rendered unavailable during the update.
The actual number of clusters is determined by rounding down to an absolute value.
By default, the maximum percentage is 25%.</p>
</li>
<li>
<p>The definition does not include any other configurations for the managing the rolling update.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For example, the following snippet of a YAML definition shows sample values for these annotations:</p>
</div>
<div class="paragraph">
<p>+</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">metadata:
annotations:
    apps.open-cluster-management.io/rollingupdate-target: target-subscription-name
    apps.open-cluster-management.io/rollingupdate-maxunavaialble: 30
name: initial-subscription-name
namespace: default</code></pre>
</div>
</div>
<div class="paragraph">
<p>+
In the preceding example, the rolling update includes 30% of clusters.</p>
</div>
<div class="paragraph">
<p>+
You can use the Kubernetes CLI (kubectl) tool to add the annotations to an existing subscription instead of directly modifying the YAML definition.
Use the following command to add the annotations to a subscription:</p>
</div>
<div class="paragraph">
<p>+</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">kubectl annotate --overwrite subscriptions.apps.open-cluster-management.io sub-orig -n ns-sub-1 apps.open-cluster-management.io/rollingupdate-target=sub-target apps.open-cluster-management.io/rollingupdate-maxunavaialble=30</code></pre>
</div>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>With the subscription resources created or updated, the rolling update begins and the new target subscription and updated initial subscription are deployed to the managed clusters.
Then, the target subscription that is on the managed clusters is used to detect the new version of the resource or chart for deployment.</p>
</div>
<div class="paragraph">
<p>See subscription samples in <a href="#application-resource-samples">Application resource samples</a>.</p>
</div>
</div>
</div>
<div class="sect4">
<h5 id="deploying-by-using-application-resources">Deploying by using application resources</h5>
<div class="paragraph">
<p>To set up and use channels, subscriptions, and placement rules for deployments, complete the following procedure:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>If the channel to represent the object store, Kubernetes namespace, or Helm repository does not exist, create a channel.</p>
<div class="paragraph">
<p>Ensure that you define any labels or annotations that deployables need before they are promoted to the channel.
For more information, see <a href="#creating-and-managing-channels">Creating and managing channels</a>.</p>
</div>
</li>
<li>
<p>Create your deployables.
For more information, see <a href="#creating-and-managing-deployable-resources">Creating and managing deployable resources</a>.</p>
</li>
<li>
<p>If your target cluster or clusters are not subscribed to the channel, create the subscription.
For more information, see <a href="#creating-and-managing-subscriptions">Creating and managing subscriptions</a>.</p>
</li>
<li>
<p>Define the placement rule for the deployables that are to be deployed from the channel.
For more information, see <a href="#creating-and-managing-placement-rules">Creating and managing placement rules</a>.
A placement rule can be defined for a subscription and for deployables.</p>
<div class="ulist">
<ul>
<li>
<p>Define the placement rule for a subscription to have the rule apply to multiple deployables and clusters.</p>
</li>
<li>
<p>Define the placement rule for a deployable to prevent the rule from applyin to all deployables for the subscription, or when you want to override a subscription-level placement rule.</p>
</li>
<li>
<p>If you are referencing a placement rule, you can also include override settings for a deployable to override some placement rule values with values specific to the deployable.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Optional.
If you created the placement rule as a stand-alone resource, edit the definition for your subscription or deployables to reference your placement rule.</p>
</li>
<li>
<p>Edit the definition for your deployables and your channel to ensure that deployables are promoted to the channel.
For more information, see the <em>Promoting a deployable to a channel</em> section.</p>
</li>
<li>
<p>Use the console to monitor the status of the deployment to the target cluster or clusters for the channel.</p>
</li>
</ol>
</div>
</div>
<div class="sect4">
<h5 id="promoting-a-deployable-to-a-channel">Promoting a deployable to a channel</h5>
<div class="paragraph">
<p>To promote a deployable, which is a <em>resource template</em>, to a channel, you can use any of the following methods:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Point the deployable to a specific channel by configuring the <code>spec.channels</code> field within the deployable definition with the correct annotations to identify the channel.</p>
<div class="paragraph">
<p>The <code>spec.channels</code> parameter is available for deployable (<code>deployable.apps.open-cluster-management.io</code>) resources to identify the channels where the deployable is to be promoted.
The following example shows a deployable that defines the channels where the deployable is to be included:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">  apiVersion: apps.open-cluster-management.io/v1
  kind: Deployable
  metadata:
    name: deployable1
    namespace: default
    spec:
      template:
      placement:
      overrides:
      dependencies:
      channels:
      - mychannel
      - otherchannel</code></pre>
</div>
</div>
</li>
<li>
<p>Update the channel definition to identify the deployables to include in the channel.
Use the <code>spec.package</code> and <code>spec.packageFilter</code> fields to specify the deployables.</p>
<div class="paragraph">
<p>As an example, the following channel automatically pulls the most recent, or latest, <code>nginx</code> chart when a new chart is published to the source Helm repository for the channel.
The chart deployable must have a matching version <code>1.x</code> to be promoted to the channel.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">  apiVersion: apps.open-cluster-management.io/v1
  kind: Channel
  metadata:
    name: predev-ch
    namespace: ns-ch
    labels:
      app: nginx-app-details
  spec:
    type: HelmRepo
    pathname: https://kubernetes-charts.storage.googleapis.com/
  ---
  apiVersion: apps.open-cluster-management.io/v1
  kind: Subscription
  metadata:
    name: nginx
    namespace: ns-sub-1
    labels:
      app: nginx-app-details
  spec:
    channel: ns-ch/predev-ch
    name: nginx-ingress
    packageFilter:
      version: "1.36.x"
    placement:
      placementRef:
        kind: PlacementRule
        name: towhichcluster</code></pre>
</div>
</div>
</li>
<li>
<p>Update the subscription definition to identify the deployables.
The configuration for promoting a deployable to a channel can also be specified within the subscription definition.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The following example subscription indicates that the most recent <code>nginx</code> version <code>1.x</code> chart is to be promoted through the channel for deployment with the subscription.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>```yaml
apiVersion: apps.open-cluster-management.io/v1
kind: Subscription
metadata:
   name: mydevsub
   namespace: myspace
spec:
 source: https://kubernetes-charts.storage.googleapis.com/
 package: nginx
 packageFilter:
   version: 1.x
 placement:
   clusters:
   - name: mydevcluster1
```</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Update the channel definition to specify channel gate requirements, and update the definitions for your deployables to include the fields and values to match the gate requirements.</p>
<div class="paragraph">
<p>Channel gate requirements are defined within the <code>spec.gate</code> section of a channel definition.
If the deployable has the fields to match the channel <code>spec.gate</code> values, the deployable is promoted to the channel.
In this case, the deployable does not need to point to a specific channel with the <code>spec.channels</code> field.</p>
</div>
<div class="paragraph">
<p>In the previous example, <code>packageFilter.version: "1.36.x"</code> indicates the specific <code>nginx</code> version <code>1.36.x</code> chart is promoted through the channel for deployment with the subscription.</p>
</div>
</li>
</ul>
</div>
<div class="sect5">
<h6 id="deploying-with-a-percentage-roll-out">Deploying with a percentage roll out</h6>
<div class="paragraph">
<p>If you want to roll out a deployment to your target managed clusters instead of deploying to all target clusters, you can configure the deployment of a deployable or chart to only a percentage of your managed clusters at a time.</p>
</div>
<div class="paragraph">
<p>For instance, you might want to roll out a deployment when you need to deploy an update but you do not want to affect all clusters at once.
When the deployment is successful on a cluster, the deployment is rolled out to another cluster.</p>
</div>
<div class="paragraph">
<p>For more information, see <a href="#managing-deployables-with-a-rolling-update">Managing deployables with a rolling update</a>.</p>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="managing-applications-with-the-console">Managing applications with the console</h4>
<div class="paragraph">
<p>You can use the console to create, manage, view details, and troubleshoot application resources, including applications, deployables, channels, subscriptions, and placement rules.
Samples for all resources are located in the <a href="#application-resource-samples">Application resource samples</a> documentation.</p>
</div>
<div class="paragraph">
<p>The console includes different tools that each provide different application management capabilities.
These capabilities allow you to easily create, find, update, deploy, and monitor applications resources.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#applications-dashboards">Applications dashboards</a></p>
</li>
<li>
<p><a href="#search">Search</a></p>
</li>
<li>
<p><a href="#topology">Topology</a></p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="applications-dashboards">Applications dashboards</h5>
<div class="paragraph">
<p>From the main <em>Applications</em> dashboard, you can view information about all applications and select a specific application to view the dashboard for more information about that specific application.</p>
</div>
<div class="sect5">
<h6 id="applications-dashboard-all-applications">Applications dashboard (all applications)</h6>
<div class="paragraph">
<p>From the <em>Overview</em> tab on this dashboard, you can complete the following tasks:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>View a table that lists all applications.
If needed, you can use the search box to filter the applications that are listed.</p>
</li>
<li>
<p>From the <em>Applications</em> page, you can view the following information:</p>
<div class="ulist">
<ul>
<li>
<p>The application name and namespace.</p>
</li>
<li>
<p>The number of managed clusters where the application is deployed through a subscription.</p>
</li>
<li>
<p>The number of subscriptions that are used to deploy the application and the associated status.</p>
</li>
<li>
<p>The date when the application was created.</p>
</li>
<li>
<p>The Grafana dashboard for the application.</p>
</li>
</ul>
</div>
</li>
<li>
<p>From this page, you can also select <strong>New application</strong> to create an application, which opens a YAML editor where you can define an application resource.
For more information, see <a href="managing_apps.md#app_create">Creating and managing application resources</a>.</p>
</li>
<li>
<p>You can click on an application name to go to the <em>Applications</em> dashboard for that specific application to view more information about that application.
You can also access <em>Grafana</em>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>From the <em>Resources</em> tab for all applications, you can complete the following tasks:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>View the summary of resources for all applications on different cards.
These resource summary cards show the following information about your applications and related managed clusters:</p>
<div class="ulist">
<ul>
<li>
<p>The number of subscriptions on the hub cluster and the number of subscriptions that failed to deploy to the hub cluster.</p>
</li>
<li>
<p>The total number of managed clusters.</p>
</li>
<li>
<p>The number of subscriptions that are active for those managed clusters.</p>
</li>
<li>
<p>The total number of channels and placement rules for all applications.
You can click each summary card to open the <em>Search</em> page and display more information about the selected resource.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Select to create subscriptions, channels, and placement rules.
When you select to create any of these resources a YAML editor opens for you to use to define the resource.
Default sample YAML content is included as templates to indicate the required fields to help you create any of these resource types.
For more information, see:</p>
<div class="ulist">
<ul>
<li>
<p><a href="managing_channels.md#channel_create">Creating and managing channels</a></p>
</li>
<li>
<p><a href="managing_subscriptions.md#subscription_create">Creating and managing subscriptions</a></p>
</li>
<li>
<p><a href="managing_placement_rules.md#placement_create">Creating and managing placement rules</a></p>
</li>
</ul>
</div>
</li>
<li>
<p>View the resource pipeline for all applications, which includes a table that displays details for your applications and other resources:</p>
<div class="ulist">
<ul>
<li>
<p>Each row provides details for a single application.
Rows are included for all of your applications.
If needed, you can use the search box to filter the application rows to find a matching application.</p>
</li>
<li>
<p>Expand the row for each application to view more details for the associated channels, subscriptions, and placement rules, view related incidents, and view the status of resource (pod) deployments.</p>
</li>
<li>
<p>Select an associated subscription for a channel and application to view more details about that subscription, including the subscribed deployables, the associated channel, namespace, and host-cluster, the status of any related resource (pod) deployments, and the placement settings that are used with the subscription.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect5">
<h6 id="application-dashboard-single-applications">Application dashboard (single applications)</h6>
<div class="paragraph">
<p>From the <em>Overview</em> tab of the dashboard for a single application, you can complete the following tasks:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>View the summary of resource highlights for the application on different cards.
These resource summary cards show the following information:</p>
<div class="ulist">
<ul>
<li>
<p>The number of subscriptions on the hub cluster for the application and the number of subscriptions that failed to deploy to the hub cluster.</p>
</li>
<li>
<p>The total number of managed clusters where the application is used.
This card also shows the total number of subscriptions for the application on those managed clusters, and the number of subscriptions that failed to deploy to those managed clusters.</p>
</li>
<li>
<p>The number of pods for the application, including the number that are running and failed.</p>
</li>
<li>
<p>The number of policy violations and incidents that are related to the application.
You can click each summary card to open the <em>Search</em> page and display more information about the selected resource.</p>
</li>
</ul>
</div>
</li>
<li>
<p>Select to view additional details for the application, including the application namespace, version, creation date, associated labels and annotations, and more.</p>
</li>
<li>
<p>View the resource topology for the application that shows the application and related components such as channels, deployables, related services, pods, and placement rules.
You can select to edit the topology and update the YAML definitions for the application and related resources, such as to add, change, or remove resources.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>From the <em>Resources</em> tab for a single application, you can complete the following tasks:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>View the resource list for the application.
This list includes all resources that are associated with the application, including pods, secrets, services, and more.
This list indicates the name, namespace, kind, API groups, and status of each resource.
The list also indicates the cluster where the resource is deployed, the creation date of the resource, and the last date that the resource was updated.</p>
</li>
<li>
<p>View the resource pipeline for the application, which includes the summary of the application resources, options to create resources, and a table that provides more details about the resources.
The resource pipeline for a single application includes similar information to the pipeline for all applications.
The difference between the two pipelines is that this pipeline is scoped to just the selected application.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect4">
<h5 id="search">Search</h5>
<div class="paragraph">
<p>The console search page supports searching for application resources by the component kind for each resource.
To search for resources, use the following values:</p>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Application resource</th>
<th class="tableblock halign-left valign-top">Kind (search parameter)</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Application</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Application</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Channel</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Channel</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Deployable</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Deployable</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Secret</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Secret</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Placement rule</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>PlacementRule</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Subscription</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Subscription</code></p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>You can also search by other fields, including name, namespace, cluster, label, and more.</p>
</div>
<div class="paragraph">
<p>From the search results, you can view identifying details for each resource, including the name, namespace, cluster, labels, and creation date.
If needed, you can also expand the <em>Options</em> menu in the search results for a resource to select to delete that resource.</p>
</div>
<div class="paragraph">
<p>By clicking the resource name in the search results, a YAML editor opens and displays the YAML definition for the resource.
You can choose to edit the definition within the editor.
Any changes that you save are applied to the resource immediately.</p>
</div>
<div class="paragraph">
<p>For more information about using search, see <a href="../console">Search in the console</a>.</p>
</div>
</div>
<div class="sect4">
<h5 id="topology">Topology</h5>
<div class="paragraph">
<p>The Topology page provides you with a visualization of your applications, clusters, relationships, and policies.
The application topology includes a visualization of the components that comprise each application.
The topology view for each application includes any deployables, services, deployments, charts, and pods for that application.</p>
</div>
<div class="paragraph">
<p>You can select any component from the topology view to view more details.
You can also hover your cursor over a resource to view the component kind, name, and namespace and links to view the search results for the resource or namespace.
When you are viewing the details for a pod, you can select to view the logs for that pod.</p>
</div>
<div class="paragraph">
<p>The <em>Topology</em> page is available from the <em>Observe environments</em> sub-menu within the console main menu.
For more information about using the topology page, see <a href="../console">console components</a>.</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="application-resource-samples">Application resource samples</h3>
<div class="paragraph">
<p>Within Red Hat Advanced Cluster Management for Kubernetes, applications are composed of multiple application resources.
The foundational resources for Red Hat Advanced Cluster Management for Kubernetes applications are the <code>application</code> resource and the <code>deployable</code> resource.</p>
</div>
<div class="paragraph">
<p>In addition, you can use channel, subscription, and placement rule resources to help you deploy, update, and manage your overall applications.</p>
</div>
<div class="paragraph">
<p>Both single and multi-cluster applications use the same Kubernetes specifications, but multi-cluster applications involve more automation of the deployment and application management lifecycle.</p>
</div>
<div class="paragraph">
<p>All of the application component resources for Red Hat Advanced Cluster Management for Kubernetes applications are defined in YAML file spec sections.
When you need to create or update an application component resource, you need to create or edit the appropriate spec section to include the labels for defining your resource.</p>
</div>
<div class="paragraph">
<p>View the following application resource samples:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#channel-samples">Channel samples</a></p>
</li>
<li>
<p><a href="#subscription-samples">Subscription samples</a></p>
</li>
<li>
<p><a href="#placement-rule-samples">Placement rule samples</a></p>
</li>
<li>
<p><a href="#application-samples">Application samples</a></p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="channel-samples">Channel samples</h4>
<div class="paragraph">
<p>View samples and YAML definitions that you can use to build your files.
Channels (<code>channel.apps.open-cluster-management.io</code>) provide you with improved continuous integration and continuous delivery capabilities for creating and managing your Red Hat Advanced Cluster Management for Kubernetes applications.
Learn more at <a href="#creating-and-managing-channels">Creating and managing channels</a>.</p>
</div>
<div class="sect4">
<h5 id="channel-yaml-structure">Channel YAML structure</h5>
<div class="paragraph">
<p>The following YAML structures show the required fields for a channel and some of the common optional fields.
Your YAML structure needs to include some required fields and values.
Depending on your application management requirements, you might need to include other optional fields and values.
You can compose your own YAML content with any tool.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">apiVersion: apps.open-cluster-management.io/v1
kind: Channel
metadata:
  name:
  namespace: # Each channel needs a unique namespace, except GitHub channel.
spec:
  sourceNamespaces:
  type:
  pathname:
  secretRef:
    name:
  gates:
    annotations:
  labels:</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="channel-yaml-table">Channel YAML table</h5>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">apiVersion</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Required.
Set the value to <code>apps.open-cluster-management.io/v1</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">kind</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Required.
Set the value to <code>Channel</code> to indicate that the resource is a channel.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">metadata.name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Required.
The name of the channel.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">metadata.namespace</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Required.
The namespace for the channel;
Each channel needs a unique namespace, except GitHub channel.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">spec.sourceNamespaces</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional.
Identifies the namespace that the channel controller monitors for new or updated deployables to retrieve and promote to the channel.
For a <code>Namespace</code> channel, the namespace must be on the hub cluster.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">spec.type</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Required.
The channel type.
The supported types are: <code>Namespace</code>, <code>HelmRepo</code>, <code>GitHub</code>, and <code>ObjectBucket</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">spec.pathname</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Required for <code>HelmRepo</code>, <code>GitHub</code>, <code>ObjectBucket</code>, <code>Namespace</code> channels.
&lt;ul&gt;&lt;li&gt;For a <code>HelmRepo</code> channel, set the value to be the URL for the Helm repository.&lt;/li&gt;&lt;li&gt;For an <code>ObjectBucket</code> channel, set the value to be the URL for the Object store.&lt;/li&gt;&lt;li&gt;For a <code>GitHub</code> channel, set the value to be the HTTPS URL for the GitHub repository.&lt;/li&gt;&lt;li&gt;For a <code>Namespace</code> channel, set the value to be the namespace where the channel is included.&lt;/li&gt;&lt;/ul&gt;</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">spec.secretRef.name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional.
Identifies a Kubernetes Secret resource to use for authentication, such as for accessing a repository or chart.
You can use a secret for authentication with only <code>HelmRepo</code>, <code>ObjectBucket</code>, and <code>GitHub</code> type channels.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">spec.gates</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional.
Defines requirements for promoting a deployable within the channel.
If no requirements are set, any deployable that is added to the channel namespace or source is promoted to the channel.
<code>gates</code> do not apply for <code>HelmRepo</code> and <code>GitHub</code> channel types, only for <code>Namespace</code> and <code>ObjectBucket</code> channel types.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">spec.gates.annotations</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional.
The annotations for the channel.
Deployables must have matching annotations to be included in the channel.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">spec.labels</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional.
The labels for the channel.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The definition structure for a channel can resemble the following YAML content:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">apiVersion: apps.open-cluster-management.io/v1
kind: Channel
metadata:
  name: predev-ch
  namespace: ns-ch
  labels:
    app: nginx-app-details
spec:
  type: HelmRepo
  pathname: https://kubernetes-charts.storage.googleapis.com/</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="kubernetes-namespace-namespace-channel">Kubernetes namespace (Namespace) channel</h5>
<div class="paragraph">
<p>The following example channel definition abstracts a namespace as a channel that holds deployable resources.
When this YAML is applied, a namespace <code>ch-qa</code> is created for the channel that is named <code>qa</code>.
When created, this channel points to the source default namespace for identifying deployables.
The channel controller maintains the resources at the actual namespace location and ensures that the resources are kept up-to-date.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">  apiVersion: apps.open-cluster-management.io/v1
  kind: Channel
  metadata:
    name: qa
    namespace: ch-qa
  spec:
    sourceNamespaces:
    - default
    type: Namespace
    pathname: ch-qa
    gates:
      annotations:
        dev-ready: approved</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="object-store-bucket-objectbucket-channel">Object store bucket (ObjectBucket) channel</h5>
<div class="paragraph">
<p>The following example channel definition abstracts an object store bucket as a channel:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">apiVersion: apps.open-cluster-management.io/v1
kind: Channel
metadata:
 name: dev
 namespace: ch-obj
spec:
 type: ObjectBucket
 pathname: [http://9.28.236.243:31311/dev] # URL is appended with the valid bucket name, which matches the channel name.
 secretRef:
   name: miniosecret
 gates:
   annotations:
     dev-ready: true</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="helm-repository-channel">Helm repository (<code>HelmRepo</code>) channel</h5>
<div class="paragraph">
<p>The following example channel definition abstracts a Helm repository as a channel:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">apiVersion: v1
kind: Namespace
metadata:
  name: hub-repo
---
apiVersion: apps.open-cluster-management.io/v1
kind: Channel
metadata:
  name: helm
  namespace: hub-repo
spec:
    pathname: [https://9.21.107.150:8443/helm-repo/charts] # URL points to a valid chart URL.
    configRef:
      name: insecure-skip-verify
    type: HelmRepo
---
apiVersion: v1
data:
  insecureSkipVerify: "true"
kind: ConfigMap
metadata:
  name: insecure-skip-verify
  namespace: hub-repo</code></pre>
</div>
</div>
<div class="paragraph">
<p>The following channel definition shows another example of a Helm repository channel:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-YAML" data-lang="YAML">apiVersion: apps.open-cluster-management.io/v1
kind: Channel
metadata:
  name: predev-ch
  namespace: ns-ch
  labels:
    app: nginx-app-details
spec:
  type: HelmRepo
  pathname: https://kubernetes-charts.storage.googleapis.com/</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="github-repository-channel">GitHub (<code>GitHub</code>) repository channel</h5>
<div class="paragraph">
<p>The following example channel definition shows an example of a channel for the GitHub Repository.
In the following example, <code>secretRef</code> refers to the user identity used to access the GitHub repo that is specified in the <code>pathname</code>.
If you have a public repo, you do not need the <code>secretRef</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">apiVersion: apps.open-cluster-management.io/v1
kind: Channel
metadata:
  name: hive-cluster-gitrepo
  namespace: gitops-cluster-lifecycle
spec:
  type: GitHub
  pathname: https://github.com/open-cluster-management/gitops-clusters.git
  secretRef:
    name: github-gitops-clusters
---
apiVersion: v1
kind: Secret
metadata:
  name: github-gitops-clusters
  namespace: gitops-cluster-lifecycle
data:
  user: dXNlcgo=            # Value of user and accessToken is Base 64 coded.
  accessToken: cGFzc3dvcmQ</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="secret-samples">Secret samples</h5>
<div class="paragraph">
<p>Secrets (<code>Secret</code>) are Kubernetes resources that you can use to store authorization and other sensitive information, such as passwords, OAuth tokens, and SSH keys.
By storing this information as secrets, you can separate the information from the application components that require the information to improve your data security.
For more information about secrets, see <a href="#managing-secrets">Managing secrets</a>.</p>
</div>
<div class="paragraph">
<p>The definition structure for a secret can resemble the following YAML content:</p>
</div>
<div class="sect5">
<h6 id="secret-yaml-structure">Secret YAML structure</h6>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">apiVersion: v1
kind: Secret
metadata:
  annotations:
      apps.open-cluster-management.io/deployables: "true"
  name: [secret-name]
  namespace: [channel-namespace]
data:
  AccessKeyID: [ABCdeF1=] #Base64 encoded
  SecretAccessKey: [gHIjk2lmnoPQRST3uvw==] #Base64 encoded</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="subscription-samples">Subscription samples</h4>
<div class="paragraph">
<p>View samples and YAML definitions that you can use to build your files.
As with channels, subscriptions (<code>subscription.apps.open-cluster-management.io</code>) provide you with improved continuous integration and continuous delivery capabilities for application management.
Learn more at <a href="#creating-and-managing-subscriptions">Creating and managing subscriptions</a>.</p>
</div>
<div class="sect4">
<h5 id="subscription-yaml-structure">Subscription YAML structure</h5>
<div class="paragraph">
<p>The following YAML structure shows the required fields for a subscription and some of the common optional fields.
Your YAML structure needs to include certain required fields and values.
Depending on your application management requirements, you might need to include other optional fields and values.
You can compose your own YAML content with any tool:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">apiVersion: apps.open-cluster-management.io/v1
kind: Subscription
metadata:
  name:
  namespace:
  labels:
spec:
  sourceNamespace:
  source:
  channel:
  name:
  packageFilter:
    version:
    labelSelector:
      matchLabels:
        package:
        component:
    annotations:
  packageOverrides:
  - packageName:
    packageAlias:
    - path:
      value:
  placement:
    local:
    clusters:
      name:
    clusterSelector:
    placementRef:
      name:
      kind: PlacementRule
  overrides:
    clusterName:
    clusterOverrides:
      path:
      value:</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="subscription-yaml-table">Subscription YAML table</h5>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top"></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">apiVersion</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Required.
Set the value to <code>apps.open-cluster-management.io/v1</code>.</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">kind</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Required.
Set the value to <code>Subscription</code> to indicate that the resource is a subscription.</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">metadata.name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Required.
The name for identifying the subscription.</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">metadata.namespace</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Required.
The namespace resource to use for the subscription.</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">metadata.labels</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional.
The labels for the subscription.</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">spec.channel</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional.
The NamespaceName ("Namespace/Name") that defines the channel for the subscription.
Define either the <code>channel</code>, or the <code>source</code>, or the <code>sourceNamespace</code> field.
In general, use the <code>channel</code> field to point to the channel instead of using the <code>source</code> or <code>sourceNamespace</code> fields.
If more than one field is defined, the first field that is defined is used.</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">spec.sourceNamespace</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional.
The source namespace where deployables are stored on the Hub cluster.
Use this field only for namespace channels.
Define either the <code>channel</code>, or the <code>source</code>, or the <code>sourceNamespace</code> field.
In general, use the <code>channel</code> field to point to the channel instead of using the <code>source</code> or <code>sourceNamespace</code> fields.</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">spec.source</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional.
The path name ("URL") to the Helm repository where deployables are stored.
Use this field for only Helm repository channels.
Define either the <code>channel</code>, or the <code>source</code>, or the <code>sourceNamespace</code> field.
In general, use the <code>channel</code> field to point to the channel instead of using the <code>source</code> or <code>sourceNamespace</code> fields.</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">spec.name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Required for <code>HelmRepo</code> type channels, but optional for <code>Namespace</code> and <code>ObjectBucket</code> type channels.
The specific name for the target Helm chart or deployable within the channel.
If neither the <code>name</code> or <code>packageFilter</code> are defined for channel types where the field is optional, all deployables are found and the latest version of each deployable is retrieved.</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">spec.packageFilter</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional.
Defines the parameters to use to find target deployables or a subset of a deployables.
If multiple filter conditions are defined, a deployable must meet all filter conditions.</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">spec.packageFilter.version</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional.
The version or versions for the deployable.
You can use a range of versions in the form <code>&gt;1.0</code>, or <code>&lt;3.0</code>.
By default, the version with the most recent "creationTimestamp" value is used.</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">spec.packageFilter.annotations</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional.
The annotations for the deployable.</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">spec.packageOverrides</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional.
Section for defining overrides for the Kubernetes resource that is subscribed to by the subscription, such as a Helm chart, deployable, or other Kubernetes resource within a channel.</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">spec.packageOverrides.packageName</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional, but required for setting an override.
Identifies the Kubernetes resource that is being overwritten.</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">spec.packageOverrides.packageAlias</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional.
Gives an alias to the Kubernetes resource that is being overwritten.</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">spec.packageOverrides.packageOverrides</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional.
The configuration of parameters and replacement values to use to override the Kubernetes resource.
For more information, see <a href="#package-overrides">Package overrides</a>.</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">spec.placement</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Required.
Identifies the subscribing clusters where deployables need to be placed, or the placement rule that defines the clusters.
Use the placement configuration to define values for multi-cluster deployments.</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">spec.local</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional, but required for a stand-alone cluster or cluster that you want to manage directly.
Defines whether the subscription must be deployed locally.
Set the value to <code>true</code> to have the subscription synchronize with the specified channel.
Set the value to <code>false</code> to prevent the subscription from subscribing to any resources from the specified channel.
Use this field when your cluster is a stand-alone cluster or you are managing this cluster directly.
If your cluster is part of a multi-cluster and you do not want to manage the cluster directly, use only one of <code>clusters</code>, <code>clusterSelector</code>, or <code>placementRef</code> to define where your subscription is to be placed.
If your cluster is the Hub of a multi-cluster and you want to manage the cluster directly, you must register the Hub as a managed cluster before the subscription operator can subscribe to resources locally.</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">spec.placement.clusters</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional.
Defines the clusters where the subscription is to be placed.
Use only one of <code>clusters</code>, <code>clusterSelector</code>, or <code>placementRef</code> to define where your subscription is to be placed for a multi-cluster.
If your cluster is a stand-alone cluster that is not your Hub cluster, you can also use <code>local</code>.</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">spec.placement.clusters.name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional, but required for defining the subscribing clusters.
The name or names of the subscribing clusters.</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">spec.placement.clusterSelector</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional.
Defines the label selector to use to identify the clusters where the subscription is to be placed.
Use only one of <code>clusters</code>, <code>clusterSelector</code>, or <code>placementRef</code> to define where your subscription is to be placed for a multi-cluster.
If your cluster is a stand-alone cluster that is not your Hub cluster, you can also use <code>local</code>.</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">spec.placement.placementRef</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional.
Defines the placement rule to use for the subscription.
Use only one of <code>clusters</code>, <code>clusterSelector</code> , or <code>placementRef</code> to define where your subscription is to be placed for a multi-cluster.
If your cluster is a stand-alone cluster that is not your Hub cluster, you can also use <code>local</code>.</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">spec.placement.placementRef.name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional, but required for using a placement rule.
The name of the placement rule for the subscription.</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">spec.placement.placementRef.kind</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional, but required for using a placement rule.
Set the value to <code>PlacementRule</code> to indicate that a placement rule is used for deployments with the subscription.</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">spec.overrides</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional.
Any parameters and values that need to be overridden, such as cluster-specific settings.</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">spec.overrides.clusterName</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional.
The name of the cluster or clusters where parameters and values are being overridden.</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">spec.overrides.clusterOverrides</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional.
The configuration of parameters and values to override.</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;!--</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">spec.timeWindow</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional.
Defines the settings for configuring a time window when the subscription is active or blocked.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">spec.timeWindow.type</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional, but required for configuring a time window.
Indicates whether the subscription is active or blocked during the configured time window.
Deployments for the subscription occur only when the subscription is active.</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">spec.timeWindow.location</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional, but required for configuring a time window.
The time zone of the configured time range for the time window.
All time zones must use the Time Zone (tz) database name format.
For more information, see <a href="https://www.iana.org/time-zones">Time Zone Database</a>.</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">spec.timeWindow.daysofweek</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional, but required for configuring a time window.
Indicates the days of the week when the time range is applied to create a time window.
The list of days must be defined as an array, such as <code>daysofweek: ["Monday", "Wednesday", "Friday"]</code>.</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">spec.timeWindow.hours</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional, but required for configuring a time window.
Defined the time range for the time window.
A start time and end time for the hour range must be defined for each time window.
You can define multiple time window ranges for a subscription.</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">spec.timeWindow.hours.start</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional, but required for configuring a time window.
The timestamp that defines the beginning of the time window.
The timestamp must use the Go programming language Kitchen format <code>"hh:mmpm"</code>.
For more information, see <a href="https://godoc.org/time#pkg-constants">Constants</a>.</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">spec.timeWindow.hours.end</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional, but required for configuring a time window.
The timestamp that defines the ending of the time window.
The timestamp must use the Go programming language Kitchen format <code>"hh:mmpm"</code>.
For more information, see <a href="https://godoc.org/time#pkg-constants">Constants</a>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-&#8594;</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><strong>Notes:</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>When you are defining your YAML, a subscription can use <code>packageFilters</code> to point to multiple Helm charts, deployables, or other Kubernetes resources.
The subscription, however, only deploys the latest version of one chart, or deployable, or other resource.</p>
</li>
<li>
<p>Annotations are used by a subscription operator for <code>Namespace</code> type channels to search for versions of a deployable.
The subscription operator searches the versions to find the appropriate deployable version to retrieve.
If your channel is a <code>Namespace</code> channel, include the annotations for identifying the deployable version.</p>
</li>
<li>
<p>For time windows, when you are defining the time range for a window, the start time must be set to occur before the end time.
If you are defining multiple time windows for a subscription, the time ranges for the windows cannot overlap.
The actual time ranges are based on the <code>subscription-controller</code> container time, which can be set to a different time and location than the time and location that you are working within.</p>
</li>
<li>
<p>Within your subscription spec, you can also define the placement of a Helm release or deployable as part of the subscription definition.
Similar to the definition for deployables, each subscription can reference an existing placement rule, or define a placement rule directly within the subscription definition.</p>
</li>
<li>
<p>When you are defining where to place your subscription in the <code>spec.placement</code> section, use only one of <code>clusters</code>, <code>clusterSelector</code>, or <code>placementRef</code> for a multi-cluster environment.
If you include more than one of <code>clusters</code>, <code>clusterSelector</code>, or <code>placementRef</code>, the following priority is used to determine which setting the subscription operator uses:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p><code>placementRef</code></p>
</li>
<li>
<p><code>clusters</code></p>
</li>
<li>
<p><code>clusterSelector</code></p>
</li>
</ol>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>Your subscription can resemble the following YAML content:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">apiVersion: apps.open-cluster-management.io/v1
kind: Subscription
metadata:
  name: nginx
  namespace: ns-sub-1
  labels:
    app: nginx-app-details
spec:
  channel: ns-ch/predev-ch
  name: nginx-ingress
  packageFilter:
    version: "1.36.x"
  placement: # Placement rules help you facilitate multi-cluster deployments, see placement rules documentation.
    placementRef:
      kind: PlacementRule
      name: towhichcluster
  overrides: # See Deployable documentation for more about overrides. Include overrides for any single cluster than requires some different settings
  - clusterName: "/"
    clusterOverrides:
    - path: "metadata.namespace"
      value: default</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="subscription-file-samples">Subscription file samples</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-YAML" data-lang="YAML">apiVersion: apps.open-cluster-management.io/v1
kind: Subscription
metadata:
  name: nginx
  namespace: ns-sub-1
  labels:
    app: nginx-app-details
spec:
  channel: ns-ch/predev-ch
  name: nginx-ingress</code></pre>
</div>
</div>
<div class="sect5">
<h6 id="subscription-with-overrides-example">Subscription with overrides example</h6>
<div class="paragraph">
<p>The following example includes package overrides to define a different release name of the Helm release for Helm chart.
A package override setting is used to set the name <code>my-nginx-ingress-releaseName</code> as the different release name for the  <code>nginx-ingress</code> Helm release.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">apiVersion: apps.open-cluster-management.io/v1
kind: Subscription
metadata:
  name: simple
  namespace: default
spec:
  channel: ns-ch/predev-ch
  name: nginx-ingress
  packageOverrides:
  - packageName: nginx-ingress
    packageAlias: my-nginx-ingress-releaseName
    packageOverrides:
    - path: spec
      value:
        defaultBackend:
          replicaCount: 3
  placement:
    local: false</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="helm-repository-subscription-example">Helm repository subscription example</h6>
<div class="paragraph">
<p>The following subscription automatically pulls the latest <code>nginx</code> Helm release for the version <code>1.36.x</code>.
The Helm release deployable is placed on the <code>my-development-cluster-1</code> cluster when a new version is available in the source Helm repository.</p>
</div>
<div class="paragraph">
<p>The <code>spec.packageOverrides</code> section shows optional parameters for overriding values for the Helm release.
The override values are merged into the Helm release <code>values.yaml</code> file, which is used to retrieve the configurable variables for the Helm release.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-YAML" data-lang="YAML">apiVersion: apps.open-cluster-management.io/v1
kind: Subscription
metadata:
  name: nginx
  namespace: ns-sub-1
  labels:
    app: nginx-app-details
spec:
  channel: ns-ch/predev-ch
  name: nginx-ingress
  packageFilter:
    version: "1.36.x"
  placement:
    clusters:
    - name: my-development-cluster-1
  packageOverrides:
  - packageName: my-server-integration-prod
    packageOverrides:
    - path: spec
      value:
        persistence:
          enabled: false
          useDynamicProvisioning: false
        license: accept
        tls:
          hostname: my-mcm-cluster.icp
        sso:
          registrationImage:
            pullSecret: hub-repo-docker-secret</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="github-repository-subscription-example">GitHub repository subscription example</h6>
<div class="sect6">
<h7 id="subscribing-specific-branch-and-directory-of-github-repository">Subscribing specific branch and directory of GitHub repository</h7>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">    apiVersion: apps.open-cluster-management.io/v1
    kind: Subscription
    metadata:
      name: sample-subscription
      namespace: default
      annotations:
        apps.open-cluster-management.io/github-path: sample_app_1/dir1
        apps.open-cluster-management.io/github-branch: branch1
    spec:
      channel: default/sample-channel
      placement:
        placementRef:
          kind: PlacementRule
          name: dev-clusters</code></pre>
</div>
</div>
<div class="paragraph">
<p>In this example subscription, the annotation <code>apps.open-cluster-management.io/github-path</code> indicates that the subscription subscribes to all Helm charts and Kubernetes resources within the <code>sample_app_1/dir1</code> directory of the GitHub repository that is specified in the channel.
The subscription subscribes to <code>master</code> branch by default.
In this example subscription, the annotation <code>apps.open-cluster-management.io/github-branch: branch1</code> is specified to subscribe to <code>branch1</code> branch of the repository.</p>
</div>
</div>
<div class="sect6">
<h7 id="adding-a-file">Adding a <code>.kubernetesignore</code> file</h7>
<div class="paragraph">
<p>You can include a <code>.kubernetesignore</code> file within your GitHub repository root directory, or within the <code>apps.open-cluster-management.io/github-path</code> directory that is specified in subscription&#8217;s annotations.</p>
</div>
<div class="paragraph">
<p>You can use this <code>.kubernetesignore</code> file to specify patterns of files or subdirectories, or both, to ignore when the subscription deploys Kubernetes resources or Helm charts from the repository.</p>
</div>
<div class="paragraph">
<p>You can also use the <code>.kubernetesignore</code> file for fine-grain filtering to selectively apply Kubernetes resources.
The pattern format of the <code>.kubernetesignore</code> file is the same as a <code>.gitignore</code> file.</p>
</div>
<div class="paragraph">
<p>If the <code>apps.open-cluster-management.io/github-path</code> annotation is not defined, the subscription looks for a <code>.kubernetesignore</code> file in the repository root directory.
If the <code>apps.open-cluster-management.io/github-path</code> field is defined, the subscription looks for the <code>.kubernetesignore</code> file in the <code>apps.open-cluster-management.io/github-path</code> directory.
Subscriptions do not search in any other directory for a <code>.kubernetesignore</code> file.</p>
</div>
</div>
<div class="sect6">
<h7 id="applying-kustomize">Applying Kustomize</h7>
<div class="paragraph">
<p>If there is <code>kustomization.yaml</code> or <code>kustomization.yml</code> file in a subscribed GitHub folder, kustomize is applied.</p>
</div>
<div class="paragraph">
<p>You can use <code>spec.packageOverrides</code> to override <code>kustomization</code> at the subscription deployment time.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">apiVersion: apps.open-cluster-management.io/v1
kind: Subscription
metadata:
  name: example-subscription
  namespace: default
spec:
  channel: some/channel
  packageOverrides:
  - packageName: kustomization
    packageOverrides:
    - value: |
patchesStrategicMerge:
- patch.yaml</code></pre>
</div>
</div>
<div class="paragraph">
<p>In order to override <code>kustomization.yaml</code> file, <code>packageName: kustomization</code> is required in <code>packageOverrides</code>.
The override either adds new entries or updates existing entries.
It does not remove existing entries.</p>
</div>
</div>
<div class="sect6">
<h7 id="enabling-github-webhook">Enabling GitHub WebHook</h7>
<div class="paragraph">
<p>By default, a GitHub channel subscription clones the GitHub repository specified in the channel every minute and applies changes when the commit ID has changed.
Alternatively, you can configure your subscription to apply changes only when the GitHub repository sends repo PUSH and PULL webhook event notifications.</p>
</div>
<div class="paragraph">
<p>In order to configure webhook in a GitHub repository, you need a target webhook payload URL and optionally a secret.</p>
</div>
<div class="sect7">
<h8 id="payload-url">Payload URL</h8>
<div class="paragraph">
<p>Create a route (ingress) in the hub cluster to expose the subscription operator&#8217;s webhook event listener service.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">  oc create route passthrough --service=multicluster-operators-subscription -n open-cluster-management</code></pre>
</div>
</div>
<div class="paragraph">
<p>Then, use <code>oc get route multicluster-operators-subscription -n open-cluster-management</code> command to find the externally-reachable hostname.
The webhook payload URL is <code><a href="https://&lt;externally-reachable" class="bare">https://&lt;externally-reachable</a> hostname&gt;/webhook</code>.</p>
</div>
</div>
<div class="sect7">
<h8 id="webhook-secret">WebHook secret</h8>
<div class="paragraph">
<p>WebHook secret is optional.
Create a Kubernetes secret in the channel namespace.
The secret must contain <code>data.secret</code>.
See the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">apiVersion: v1
kind: Secret
metadata:
  name: my-github-webhook-secret
data:
  secret: BASE64_ENCODED_SECRET</code></pre>
</div>
</div>
<div class="paragraph">
<p>The value of <code>data.secret</code> is the base-64 encoded WebHook secret you are going to use.</p>
</div>
<div class="paragraph">
<p><strong>Best practice:</strong> Use a unique secret for each GitHub repository.</p>
</div>
</div>
<div class="sect7">
<h8 id="configuring-webhook-in-github-repository">Configuring WebHook in GitHub repository</h8>
<div class="paragraph">
<p>Use the payload URL and webhook secret to configure WebHook in your GitHub repository.</p>
</div>
</div>
<div class="sect7">
<h8 id="enable-webhook-event-notification-in-channel">Enable WebHook event notification in channel</h8>
<div class="paragraph">
<p>Annotate the subscription channel.
See the following example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">oc annotate channel.apps.open-cluster-management.io &lt;channel name&gt; apps.open-cluster-management.io/webhook-enabled="true"</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you used a secret to configure WebHook, annotate the channel with this as well where <code>&lt;the_secret_name&gt;</code> is the kubernetes secret name containing webhook secret.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-shell" data-lang="shell">oc annotate channel.apps.open-cluster-management.io &lt;channel name&gt; apps.open-cluster-management.io/webhook-secret="&lt;the_secret_name&gt;"</code></pre>
</div>
</div>
</div>
<div class="sect7">
<h8 id="subscriptions-of-webhook-enabled-channel">Subscriptions of webhook-enabled channel</h8>
<div class="paragraph">
<p>No webhook specific configuration is needed in subscriptions.</p>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="placement-rule-samples">Placement rule samples</h4>
<div class="paragraph">
<p>Placement rules (<code>placementrule.apps.open-cluster-management.io</code>) define the target clusters where deployables can be deployed.
Use placement rules to help you facilitate the multi-cluster deployment of your deployables.</p>
</div>
<div class="sect4">
<h5 id="placement-rule-yaml-structure">Placement rule YAML structure</h5>
<div class="paragraph">
<p>The following YAML structure shows the required fields for a placement rule and some of the common optional fields.
Your YAML structure needs to include some required fields and values.
Depending on your application management requirements, you might need to include other optional fields and values.
You can compose your own YAML content with any tool.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">apiVersion: apps.open-cluster-management.io/v1
kind: PlacementRule
  name:
  namespace:
  resourceVersion:
  labels:
    app:
    chart:
    release:
    heritage:
  selfLink:
  uid:
spec:
  clusterSelector:
    matchLabels:
      datacenter:
      environment:
  clusterReplicas:
  clusterConditions:
  ResourceHint:
    type:
    order:
  Policies:</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="placement-rule-yaml-values-table">Placement rule YAML values table</h5>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">apiVersion</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Required.
Set the value to <code>apps.open-cluster-management.io/v1</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">kind</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Required.
Set the value to <code>PlacementRule</code> to indicate that the resource is a placement rule.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">metadata.name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Required.
The name for identifying the placement rule.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">metadata.namespace</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Required.
The namespace resource to use for the placement rule.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">metadata.resourceVersion</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional.
The version of the placement rule resource.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">metadata.labels</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional.
The labels for the placement rule.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">spec.clusterSelector</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional.
The labels for identifying the target clusters</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">spec.clusterSelector.matchLabels</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional.
The labels that must exist for the target clusters.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">status.decisions</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional.
Defines the target clusters where deployables are placed.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">status.decisions.clusterName</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional.
The name of a target cluster</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">status.decisions.clusterNamespace</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional.
The namespace for a target cluster.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">spec.clusterReplicas</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional.
The number of replicas to create.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">spec.clusterConditions</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional.
Define any conditions for the cluster.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">spec.ResourceHint</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional.
If more than one cluster matches the labels and values that you provided in the previous fields, you can specify a resource specific criteria to select the clusters.
For example, you can select the cluster with the most available CPU cores.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">spec.ResourceHint.type</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional.
Set the value to either <code>cpu</code> to select clusters based on available CPU cores or <code>memory</code> to select clusters based on available memory resources.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">spec.ResourceHint.order</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional.
Set the value to either <code>asc</code> for ascending order, or <code>desc</code> for descending order.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">spec.Policies</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional.
The policy filters for the placement rule.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="placement-rule-sample-files">Placement rule sample files</h5>
<div class="paragraph">
<p>Existing placement rules can include the following fields that indicate the status for the placement rule.
This status section is appended after the <code>spec</code> section in the YAML structure for a rule.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>status:
  decisions:
    clusterName:
    clusterNamespace:</pre>
</div>
</div>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">status</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The status information for the placement rule.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">status.decisions</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Defines the target clusters where deployables are placed.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">status.decisions.clusterName</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name of a target cluster</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">status.decisions.clusterNamespace</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The namespace for a target cluster.</p></td>
</tr>
</tbody>
</table>
<div class="ulist">
<ul>
<li>
<p>Example 1</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">apiVersion: apps.open-cluster-management.io/v1
kind: PlacementRule
metadata:
  name: gbapp-gbapp
  namespace: development
  labels:
    app: gbapp
spec:
  clusterSelector:
    matchLabels:
      environment: Dev
  clusterReplicas: 1
status:
  decisions:
    - clusterName: local-cluster
      clusterNamespace: local-cluster</code></pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Example 2</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-YAML" data-lang="YAML">apiVersion: apps.open-cluster-management.io/v1
kind: PlacementRule
metadata:
  name: towhichcluster
  namespace: ns-sub-1
  labels:
    app: nginx-app-details
spec:
  clusterReplicas: 1
  clusterConditions:
    - type: OK
  clusterSelector:
    matchExpressions:
    - key: environment
      operator: In
      values:
      - dev</code></pre>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="application-samples">Application samples</h4>
<div class="paragraph">
<p>View samples and YAML definitions that you can use to build your files.
Applications (<code>Application.app.k8s.io</code>) in Red Hat Advanced Cluster Management for Kubernetes are used for viewing the application components.
For more information about creating and managing applications, see <a href="#managing-applications">Creating and managing applications</a>.</p>
</div>
<div class="sect4">
<h5 id="application-yaml-structure">Application YAML structure</h5>
<div class="paragraph">
<p>To compose the application definition YAML content for creating or updating an application resource, your YAML structure needs to include some required fields and values.
Depending on your application requirements or application management requirements, you might need to include other optional fields and values.</p>
</div>
<div class="paragraph">
<p>The following YAML structure shows the required fields for an application and some of the common optional fields.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">apiVersion: app.k8s.io/v1beta1
kind: Application
metadata:
  name:
  namespace:
  resourceVersion:
  annotations:
  labels:
    app:
    chart:
    heritage:
    name:
    release:
spec:
  componentKinds:
  - group:
    kind:
  descriptor:
  selector:
    matchExpressions:
    - key:
      operator:
      values:</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="application-yaml-table">Application YAML table</h5>
<table class="tableblock frame-all grid-all spread">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">apiVersion</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Required.
Set the value to <code>app.k8s.io/v1beta1</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">kind</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Required.
Set the value to <code>Application</code> to indicate the resource is an application resource.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">metadata.name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Required.
The name for identifying the application resource.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">metadata.namespace</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The namespace resource to use for the application.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">metadata.resourceVersion</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The version of the application resource.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">metadata.annotations</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional.
The annotations for the application.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">metadata.labels</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional.
The labels for the deployable.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">spec.componentKinds</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional.
The list of the kinds of resources to be associated with the application.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">spec.selector.matchExpressions</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional.
Label selectors for associating other Kubernetes resources with the application.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">spec.selector.matchExpressions.key</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Required when defining label selectors.
The Kubernetes label key that a resource needs to match.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">spec.selector.matchExpressions.values</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Required when defining label selectors.
The Kubernetes label values that a resource needs to match.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The spec for defining these applications is based on the Application metadata descriptor custom resource definition that is provided by the Kubernetes Special Interest Group (SIG).
You can use this definition to help you compose your own application YAML content.
For more information about this definition, see <a href="https://github.com/kubernetes-sigs/application">Kubernetes SIG Application CRD community specification</a>.</p>
</div>
</div>
<div class="sect4">
<h5 id="application-file-samples">Application file samples</h5>
<div class="paragraph">
<p>The definition structure for an application can resemble the following example YAML content:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">apiVersion: app.k8s.io/v1beta1
kind: Application
metadata:
  labels:
    app: nginx-app-details
  name: nginx-app-3
  namespace: ns-sub-1
spec:
  componentKinds:
  - group: apps.open-cluster-management.io
    kind: Subscription
  selector:
    matchLabels:
      app: nginx-app-details
status: {}</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2020-06-07 12:30:23 AEST
</div>
</div>
</body>
</html>