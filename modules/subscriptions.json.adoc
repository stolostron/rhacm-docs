= Subscriptions (subscriptions.apps.open-cluster-management.io) APIs


[[_ccutiloverview]]
== Overview
This documentation is for the Subscription resource for Red Hat Advanced Cluster Management for Kubernetes. The Subscription resource has four possible requests: create, query, delete and update.


=== Version information
[%hardbreaks]
__Version__ : 1.0.0


=== Contact information
[%hardbreaks]
__Contact Email__ : apiteam@swagger.io


=== License information
[%hardbreaks]
__License__ : Apache 2.0
__License URL__ : http://www.apache.org/licenses/LICENSE-2.0.html
__Terms of service__ : http://swagger.io/terms/


=== URI scheme
[%hardbreaks]
__BasePath__ : /kubernetes/apis
__Schemes__ : HTTPS


=== Tags

* subscriptions.apps.open-cluster-management.io : Create and manage subscriptions


=== External Docs
[%hardbreaks]
__Description__ : Find out more about Swagger.
__URL__ : http://swagger.io




[[_ccutilpaths]]
== Paths

[[_ccutilcreatesubscription]]
=== Create a subscription
....
POST /apps.open-cluster-management.io/v1/namespaces/{namespace}/subscriptions
....


==== Description
Create a subscription.


==== Parameters

[options="header", cols=".^2a,.^3a,.^9a,.^4a"]
|===
|Type|Name|Description|Schema
|**Header**|**COOKIE** +
__required__|Authorization: Bearer {ACCESS_TOKEN} ; ACCESS_TOKEN is the user access token.|string
|**Path**|**namespace** +
__required__|Namespace that you want to use, for example, default.|string
|**Body**|**body** +
__required__|Parameters describing the subscription to be created.|<<_ccutilsubscription,Subscription>>
|===


==== Responses

[options="header", cols=".^2a,.^14a,.^4a"]
|===
|HTTP Code|Description|Schema
|**200**|Success|No Content
|**403**|Access forbidden|No Content
|**404**|Resource not found|No Content
|**500**|Internal service error|No Content
|**503**|Service unavailable|No Content
|===


==== Consumes

* `subscription/yaml`


==== Tags

* subscriptions.apps.open-cluster-management.io


==== Example HTTP request

===== Request body
[source,json]
----
{
  "apiVersion" : "apps.open-cluster-management.io/v1",
  "kind" : "Subscription",
  "metadata" : {
    "name" : "sample_subscription",
    "namespace" : "default",
    "labels" : {
      "app" : "sample_subscription-app"
    },
    "annotations" : {
      "apps.open-cluster-management.io/github-path" : "apps/sample/",
      "apps.open-cluster-management.io/github-branch" : "sample_branch"
    }
  },
  "spec" : {
    "channel" : "channel_namespace/sample_channel",
    "packageOverrides" : [ {
      "packageName" : "my-sample-application",
      "packageAlias" : "the-sample-app",
      "packageOverrides" : [ {
        "path" : "spec",
        "value" : {
          "persistence" : {
            "enabled" : false,
            "useDynamicProvisioning" : false
          },
          "license" : "accept",
          "tls" : {
            "hostname" : "my-mcm-cluster.icp"
          },
          "sso" : {
            "registrationImage" : {
              "pullSecret" : "hub-repo-docker-secret"
            }
          }
        }
      } ]
    } ],
    "placement" : {
      "placementRef" : {
        "kind" : "PlacementRule",
        "name" : "demo-clusters"
      }
    }
  }
}
----


[[_ccutilquerysubscriptions]]
=== Query all subscriptions
....
GET /apps.open-cluster-management.io/v1/namespaces/{namespace}/subscriptions
....


==== Description
Query your subscriptions for more details.


==== Parameters

[options="header", cols=".^2a,.^3a,.^9a,.^4a"]
|===
|Type|Name|Description|Schema
|**Header**|**COOKIE** +
__required__|Authorization: Bearer {ACCESS_TOKEN} ; ACCESS_TOKEN is the user access token.|string
|**Path**|**namespace** +
__required__|Namespace that you want to use, for example, default.|string
|===


==== Responses

[options="header", cols=".^2a,.^14a,.^4a"]
|===
|HTTP Code|Description|Schema
|**200**|Success|No Content
|**403**|Access forbidden|No Content
|**404**|Resource not found|No Content
|**500**|Internal service error|No Content
|**503**|Service unavailable|No Content
|===


==== Consumes

* `subscription/yaml`


==== Tags

* subscriptions.apps.open-cluster-management.io


[[_ccutilquerysubscription]]
=== Query a single subscription
....
GET /apps.open-cluster-management.io/v1/namespaces/{namespace}/subscriptions/{subscription_name}
....


==== Description
Query a single subscription for more details.


==== Parameters

[options="header", cols=".^2a,.^3a,.^9a,.^4a"]
|===
|Type|Name|Description|Schema
|**Header**|**COOKIE** +
__required__|Authorization: Bearer {ACCESS_TOKEN} ; ACCESS_TOKEN is the user access token.|string
|**Path**|**namespace** +
__required__|Namespace that you want to use, for example, default.|string
|**Path**|**subscription_name** +
__required__|Name of the subscription that you wan to query.|string
|===


==== Responses

[options="header", cols=".^2a,.^14a,.^4a"]
|===
|HTTP Code|Description|Schema
|**200**|Success|No Content
|**403**|Access forbidden|No Content
|**404**|Resource not found|No Content
|**500**|Internal service error|No Content
|**503**|Service unavailable|No Content
|===


==== Tags

* subscriptions.apps.open-cluster-management.io


[[_ccutildeletesubscription]]
=== Delete a subscription
....
DELETE /apps.open-cluster-management.io/v1/namespaces/{namespace}/subscriptions/{subscription_name}
....


==== Parameters

[options="header", cols=".^2a,.^3a,.^9a,.^4a"]
|===
|Type|Name|Description|Schema
|**Header**|**COOKIE** +
__required__|Authorization: Bearer {ACCESS_TOKEN} ; ACCESS_TOKEN is the user access token.|string
|**Path**|**namespace** +
__required__|Namespace that you want to use, for example, default.|string
|**Path**|**subscription_name** +
__required__|Name of the subscription that you want to delete.|string
|===


==== Responses

[options="header", cols=".^2a,.^14a,.^4a"]
|===
|HTTP Code|Description|Schema
|**200**|Success|No Content
|**403**|Access forbidden|No Content
|**404**|Resource not found|No Content
|**500**|Internal service error|No Content
|**503**|Service unavailable|No Content
|===


==== Tags

* subscriptions.apps.open-cluster-management.io




[[_ccutildefinitions]]
== Definitions

[[_ccutilsubscription]]
=== Subscription

[options="header", cols=".^3a,.^4a"]
|===
|Name|Schema
|**apiVersion** +
__required__|string
|**kind** +
__required__|string
|**metadata** +
__required__|<<_ccutilsubscription_metadata,metadata>>
|**spec** +
__required__|<<_ccutilsubscription_spec,spec>>
|**status** +
__optional__|<<_ccutilsubscription_status,status>>
|===

[[_ccutilsubscription_metadata]]
**metadata**

[options="header", cols=".^3a,.^4a"]
|===
|Name|Schema
|**annotations** +
__optional__|object
|**labels** +
__optional__|object
|**name** +
__optional__|string
|**namespace** +
__optional__|string
|===

[[_ccutilsubscription_spec]]
**spec**

[options="header", cols=".^3a,.^4a"]
|===
|Name|Schema
|**channel** +
__required__|string
|**name** +
__optional__|string
|**overrides** +
__optional__|< <<_ccutilsubscription_overrides,overrides>> > array
|**packageFilter** +
__optional__|<<_ccutilsubscription_packagefilter,packageFilter>>
|**packageOverrides** +
__optional__|< <<_ccutilsubscription_packageoverrides,packageOverrides>> > array
|**placement** +
__optional__|<<_ccutilsubscription_placement,placement>>
|**timewindow** +
__optional__|<<_ccutilsubscription_timewindow,timewindow>>
|===

[[_ccutilsubscription_overrides]]
**overrides**

[options="header", cols=".^3a,.^4a"]
|===
|Name|Schema
|**clusterName** +
__required__|string
|**clusterOverrides** +
__required__|< object > array
|===

[[_ccutilsubscription_packagefilter]]
**packageFilter**

[options="header", cols=".^3a,.^11a,.^4a"]
|===
|Name|Description|Schema
|**annotations** +
__optional__||< string, string > map
|**filterRef** +
__optional__||<<_ccutilsubscription_packagefilter_filterref,filterRef>>
|**labelSelector** +
__optional__||<<_ccutilsubscription_packagefilter_labelselector,labelSelector>>
|**version** +
__optional__|**Pattern** : `"([0-9]+)((\\.[0-9]+)(\\.[0-9]+)\|(\\.[0-9]+)?(\\.[xX]))$"`|string
|===

[[_ccutilsubscription_packagefilter_filterref]]
**filterRef**

[options="header", cols=".^3a,.^4a"]
|===
|Name|Schema
|**name** +
__optional__|string
|===

[[_ccutilsubscription_packagefilter_labelselector]]
**labelSelector**

[options="header", cols=".^3a,.^4a"]
|===
|Name|Schema
|**matchExpressions** +
__optional__|< <<_ccutilsubscription_packagefilter_labelselector_matchexpressions,matchExpressions>> > array
|**matchLabels** +
__optional__|< string, string > map
|===

[[_ccutilsubscription_packagefilter_labelselector_matchexpressions]]
**matchExpressions**

[options="header", cols=".^3a,.^4a"]
|===
|Name|Schema
|**key** +
__required__|string
|**operator** +
__required__|string
|**values** +
__optional__|< string > array
|===

[[_ccutilsubscription_packageoverrides]]
**packageOverrides**

[options="header", cols=".^3a,.^4a"]
|===
|Name|Schema
|**packageAlias** +
__optional__|string
|**packageName** +
__required__|string
|**packageOverrides** +
__optional__|< object > array
|===

[[_ccutilsubscription_placement]]
**placement**

[options="header", cols=".^3a,.^4a"]
|===
|Name|Schema
|**clusterSelector** +
__optional__|<<_ccutilsubscription_placement_clusterselector,clusterSelector>>
|**clusters** +
__optional__|< <<_ccutilsubscription_placement_clusters,clusters>> > array
|**local** +
__optional__|boolean
|**placementRef** +
__optional__|<<_ccutilsubscription_placement_placementref,placementRef>>
|===

[[_ccutilsubscription_placement_clusterselector]]
**clusterSelector**

[options="header", cols=".^3a,.^4a"]
|===
|Name|Schema
|**matchExpressions** +
__optional__|< <<_ccutilsubscription_placement_clusterselector_matchexpressions,matchExpressions>> > array
|**matchLabels** +
__optional__|< string, string > map
|===

[[_ccutilsubscription_placement_clusterselector_matchexpressions]]
**matchExpressions**

[options="header", cols=".^3a,.^4a"]
|===
|Name|Schema
|**key** +
__required__|string
|**operator** +
__required__|string
|**values** +
__optional__|< string > array
|===

[[_ccutilsubscription_placement_clusters]]
**clusters**

[options="header", cols=".^3a,.^4a"]
|===
|Name|Schema
|**name** +
__required__|string
|===

[[_ccutilsubscription_placement_placementref]]
**placementRef**

[options="header", cols=".^3a,.^4a"]
|===
|Name|Schema
|**apiVersion** +
__optional__|string
|**fieldPath** +
__optional__|string
|**kind** +
__optional__|string
|**name** +
__optional__|string
|**namespace** +
__optional__|string
|**resourceVersion** +
__optional__|string
|**uid** +
__optional__|string
|===

[[_ccutilsubscription_timewindow]]
**timewindow**

[options="header", cols=".^3a,.^4a"]
|===
|Name|Schema
|**daysofweek** +
__optional__|< string > array
|**hours** +
__optional__|< <<_ccutilsubscription_timewindow_hours,hours>> > array
|**location** +
__optional__|string
|**windowtype** +
__optional__|enum (active, blocked, Active, Blocked)
|===

[[_ccutilsubscription_timewindow_hours]]
**hours**

[options="header", cols=".^3a,.^4a"]
|===
|Name|Schema
|**end** +
__optional__|string
|**start** +
__optional__|string
|===

[[_ccutilsubscription_status]]
**status**

[options="header", cols=".^3a,.^4a"]
|===
|Name|Schema
|**lastUpdateTime** +
__optional__|string (date-time)
|**message** +
__optional__|string
|**phase** +
__optional__|string
|**reason** +
__optional__|string
|**statuses** +
__optional__|object
|===





