[#troubleshooting-postgresql-compliance-history]
= Troubleshooting the PostgreSQL connection to the compliance history API (Technology Preview) 

The connection between PostgreSQL server and the policy compliance history API. For example, if you want to check for events where `reason=OCMComplianceEventsDBError` on your {product-title} hub cluster, run the following command:

[source,bash]
----
oc -n open-cluster-management get events --field-selector reason=OCMComplianceEventsDBError
----

Limited details are provided and you are instructed to view the `governance-policy-propagator` logs for further details. Run the following command to check the `governance-policy-propagator` logs:

[source,bash]
----
oc -n open-cluster-management logs -l name=governance-policy-propagator -f
----
 
[#symptom-cluster-rotating-agents]
== Symptom: Expired credentials for agents

In the logs, you might see the following error message, which indicates the password is not correctly specified:

----
2024-03-05T12:17:14.500-0500	info	compliance-events-api	complianceeventsapi/complianceeventsapi_controller.go:261	The database connection failed: pq: password authentication failed for user "rhacm-policy-compliance-history"
----

[#resolving-cluster-rotating-agents]
== Resolving the problem: Manually rotate credentials for agents

//from the draft, its not as clear how the user can fix this. how can th user update the config for the connection?
