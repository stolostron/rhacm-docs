[#troubleshooting-policy-templating]
= Troubleshooting policy templating

//Is this still an issue for 2.8?

When you want to use the `fromSecret` function to add contents of a `Secret` resource into a `Route` resource, the certificate data is redacted. 

[#symptom-policy-templating]
== Symptom: Troubleshooting policy templating

When the managed cluster and hub cluster are the same cluster, the contents are not parsed as a template JSON string. You might receive the following error messages:

[source,json]
----
message: >-
            [spec.tls.caCertificate: Invalid value: "redacted ca certificate
            data": failed to parse CA certificate: data does not contain any
            valid RSA or ECDSA certificates, spec.tls.certificate: Invalid
            value: "redacted certificate data": data does not contain any valid 
            RSA or ECDSA certificates, spec.tls.key: Invalid value: "": no key specified]   
----

[#resolving-the-problem-policy-templating]
== Resolving the problem: Troubleshooting policy templating

Configure your certificate policy to retrieve the hub cluster and managed cluster `fromSecret` values. Update your certificate policy with the following content:

[source,yaml]
----
                 tls:
                    certificate: |
                      {{ print "{{hub fromSecret "open-cluster-management" "minio-cert" "tls.crt" hub}}" | base64dec | autoindent }}
----

