<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.10">
<title>Security</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/* Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment @import statement to use as custom stylesheet */
/*@import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700";*/
article,aside,details,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
abbr[title]{border-bottom:1px dotted}
b,strong{font-weight:bold}
dfn{font-style:italic}
hr{-moz-box-sizing:content-box;box-sizing:content-box;height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type="button"],input[type="reset"],input[type="submit"]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type="checkbox"],input[type="radio"]{box-sizing:border-box;padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,*::before,*::after{-moz-box-sizing:border-box;-webkit-box-sizing:border-box;box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;font-weight:400;font-style:normal;line-height:1;position:relative;cursor:auto;tab-size:4;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0;direction:ltr}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{font-family:inherit;font-weight:400;font-size:1em;line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em;height:0}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{font-size:1em;line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0;font-size:1em}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
abbr,acronym{text-transform:uppercase;font-size:90%;color:rgba(0,0,0,.8);border-bottom:1px dotted #ddd;cursor:help}
abbr{text-transform:none}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote cite{display:block;font-size:.9375em;color:rgba(0,0,0,.6)}
blockquote cite::before{content:"\2014 \0020"}
blockquote cite a,blockquote cite a:visited{color:rgba(0,0,0,.6)}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:solid 1px #dedede}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{display:table-cell;line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;-webkit-border-radius:4px;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed;word-wrap:break-word}
:not(pre)>code.nobreak{word-wrap:normal}
:not(pre)>code.nowrap{white-space:nowrap}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;-webkit-border-radius:3px;border-radius:3px;-webkit-box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em white inset;box-shadow:0 1px 0 rgba(0,0,0,.2),0 0 0 .1em #fff inset;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin-left:auto;margin-right:auto;margin-top:0;margin-bottom:0;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:-ms-flexbox;display:-webkit-flex;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border-style:solid;border-width:1px;border-color:#e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;-webkit-border-radius:4px;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:100%;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:rgba(255,255,255,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details>summary:first-of-type{cursor:pointer;display:list-item;outline:none;margin-bottom:.75em}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
table.tableblock #preamble>.sectionbody>[class="paragraph"]:first-of-type p{font-size:inherit}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6)}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border-style:solid;border-width:1px;border-color:#e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;-webkit-border-radius:4px;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border-style:solid;border-width:1px;border-color:#dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;-webkit-border-radius:4px;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{-webkit-border-radius:4px;border-radius:4px;word-wrap:break-word;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class="highlight"],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;-webkit-border-radius:4px;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos{border-right:1px solid currentColor;opacity:.35;padding-right:.5em}
pre.pygments .lineno{border-right:1px solid currentColor;opacity:.35;display:inline-block;margin-right:.75em}
pre.pygments .lineno::before{content:"";margin-right:-.125em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;text-align:left;margin-right:0}
table.tableblock{max-width:100%;border-collapse:separate}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
td.tableblock>.content>:last-child.sidebarblock{margin-bottom:0}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>thead>tr>.tableblock,table.grid-all>tbody>tr>.tableblock{border-width:0 1px 1px 0}
table.grid-all>tfoot>tr>.tableblock{border-width:1px 1px 0 0}
table.grid-cols>*>tr>.tableblock{border-width:0 1px 0 0}
table.grid-rows>thead>tr>.tableblock,table.grid-rows>tbody>tr>.tableblock{border-width:0 0 1px}
table.grid-rows>tfoot>tr>.tableblock{border-width:1px 0 0}
table.grid-all>*>tr>.tableblock:last-child,table.grid-cols>*>tr>.tableblock:last-child{border-right-width:0}
table.grid-all>tbody>tr:last-child>.tableblock,table.grid-all>thead:last-child>tr>.tableblock,table.grid-rows>tbody>tr:last-child>.tableblock,table.grid-rows>thead:last-child>tr>.tableblock{border-bottom-width:0}
table.frame-all{border-width:1px}
table.frame-sides{border-width:0 1px}
table.frame-topbot,table.frame-ends{border-width:1px 0}
table.stripes-all tr,table.stripes-odd tr:nth-of-type(odd),table.stripes-even tr:nth-of-type(even),table.stripes-hover tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{display:table-cell;line-height:1.6;background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
ol>li p,ul>li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
ul.checklist{margin-left:.625em}
ul.checklist li>p:first-child>.fa-square-o:first-child,ul.checklist li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist li>p:first-child>input[type="checkbox"]:first-child{margin-right:.25em}
ul.inline{display:-ms-flexbox;display:-webkit-box;display:flex;-ms-flex-flow:row wrap;-webkit-flex-flow:row wrap;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:solid 4px #fff;-webkit-box-shadow:0 0 0 1px #ddd;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
.gist .file-data>table{border:0;background:#fff;width:100%;margin-bottom:0}
.gist .file-data>table td.line-data{width:99%}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);-webkit-border-radius:100px;border-radius:100px;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;-webkit-box-shadow:0 1px 4px #e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{-webkit-box-shadow:none!important;box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media print,amzn-kf8{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
</head>
<body class="article">
<div id="header">
<h1>Security</h1>
</div>
<div id="content">
<div class="sect1">
<h2 id="security">Security</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Manage your security and role-based access control (RBAC) of Red Hat Advanced Cluster Management for Kubernetes components.
Govern your cluster with defined policies and processes to identify and minimize risks.
Use policies to define rules and set controls.</p>
</div>
<div class="paragraph">
<p><strong>Prerequisite</strong>: You must configure authentication service requirements for Red Hat Advanced Cluster Management for Kubernetes to onboard workloads to Identity and Access Management (IAM).
For more information see, <em>Understanding authentication</em> in <a href="https://docs.openshift.com/container-platform/4.3/authentication/understanding-authentication.html">OpenShift Container Platform documentation</a>.</p>
</div>
<div class="sect2">
<h3 id="role-based-access-control">Role-based access control</h3>
<div class="paragraph">
<p>Red Hat Advanced Cluster Management for Kubernetes supports several roles.
Your role determines the actions that you can perform.
Kubernetes offers role-based access control (RBAC) authorization mechanisms, so users of the cluster platform can be grouped into teams and have namespaces dedicated to teams.
For more information about RBAC, see the <em>RBAC</em> overview in the <a href="https://docs.openshift.com/container-platform/4.3/authentication/using-rbac.html">OpenShift Container Platform documentation</a>.
View the following RBAC tables for components in Red Hat Advanced Cluster Management for Kubernetes:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">API</th>
<th class="tableblock halign-left valign-top">ClusterAdmin</th>
<th class="tableblock halign-left valign-top">Administrator</th>
<th class="tableblock halign-left valign-top">Editor</th>
<th class="tableblock halign-left valign-top">Viewer</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">resourceview.mcm.ibm.com</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">create, read, update, delete</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">create, read, update, delete</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">read, update</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">read</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">works.mcm.ibm.com</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">create, read, update, delete</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">create, read, update, delete</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">read, update</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">read</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">worksets.mcm.ibm.com</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">create, read, update, delete</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">create, read, update, delete</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">read, update</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">read</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">clusterstatus.mcm.ibm.com</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">create, read, update, delete</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">read</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">read</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">read</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">cluster.clusterregistry.k8s.io</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">create, read, update, delete</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">read 	 read</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">read</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">endpointconfig.mcm.ibm.com</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">create, read, update, delete</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">create, read, update, delete</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">read, update</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">read</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">policies.policy.mcm.ibm.com</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">create, read, update, delete</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">create, read, update, delete</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">app.k8s.io, apps.open-cluster-management.io</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">create, read, update, delete</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">create, read, update, delete</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">read</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">read</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>View the RBAC table for the Red Hat Advanced Cluster Management console:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Console page</th>
<th class="tableblock halign-left valign-top">Cluster Administrator</th>
<th class="tableblock halign-left valign-top">Administrator</th>
<th class="tableblock halign-left valign-top">Editor</th>
<th class="tableblock halign-left valign-top">Viewer</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Welcome</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">read</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">read</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">read</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">read</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Overview</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">read</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">read</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">read</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">read</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Topology</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">read</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">read</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">read</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">read</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Clusters</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">create, read, update, delete</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">read</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">read</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">read</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Manage applications</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">create, read, update, delete</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">create, read, update, delete</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">read</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">read</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Govern risk</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">create, read, update, delete</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">create, read, update, delete</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Provider conections</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">create, read, update, delete</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">create, read, update, delete</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">create, read, update, delete</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Review the following topics to learn more about securing your cluster:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#certificates">Certificates</a></p>
</li>
<li>
<p><a href="../security">Governance and risk</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="certificates">Certificates</h3>
<div class="paragraph">
<p>Various certificates are created and used throughout Red Hat Advanced Cluster Management for Kubernetes.</p>
</div>
<div class="paragraph">
<p>You can bring your own certificates.
You must create a Kubernetes TLS Secret for your secret.
After you create your certificates, you can replace certain certificates that are created by the Red Hat Advanced Cluster Management for Kubernetes installer.
You must be a cluster administrator or team administrator.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Replacing certificates is supported only on native Red Hat Advanced Cluster Management for Kubernetes installations.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>All certificates required by services that run on Red Hat Advanced Cluster Management for Kubernetes are created during the installation of Red Hat Advanced Cluster Management for Kubernetes.
Certificates are either created and managed by the Red Hat Advanced Cluster Management for Kubernetes installer or by the Red Hat Advanced Cluster Management for Kubernetes Certificate manager (<code>cert-manager</code>).</p>
</div>
<div class="paragraph">
<p>See the following topics to replace certificates:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#replacing-the-root-ca-certificate">Replacing the root CA</a></p>
</li>
<li>
<p><a href="#replacing-the-management-ingress-certificates">Replacing the management ingress certificates</a></p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="certificates-2">Certificates</h4>
<div class="paragraph">
<p>The following certificates are automatically created during the installation of Red Hat Advanced Cluster Management for Kubernetes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Root CA Certificate</p>
</li>
<li>
<p>Certificate manager (<em>cert-manager</em>)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The Red Hat Advanced Cluster Management for Kubernetes Root CA Certificate is stored within the Kubernetes Secret <code>multicloud-ca-cert</code> in the <code>open-cluster-management</code> namespace.
The certificate can be imported into your client truststores to access Red Hat Advanced Cluster Management for Kubernetes Platform APIs.</p>
</div>
<div class="sect4">
<h5 id="created-and-managed-by-red-hat-advanced-cluster-management-for-kubernetes-certificate-manager-cert-manager">Created and managed by Red Hat Advanced Cluster Management for Kubernetes Certificate manager (<em>cert-manager</em>)</h5>
<div class="paragraph">
<p>View the following table of the internal services that use <code>cert-manager</code> to create and manage their certificates:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Certificate Name</th>
<th class="tableblock halign-left valign-top">Issuer Name</th>
<th class="tableblock halign-left valign-top">Secret Name</th>
<th class="tableblock halign-left valign-top">Usage</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>console-chart-ef680-ca-cert</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>multicluster-hub-mcm-server-ca-issuer</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>console-chart-ef680-uiapi-secrets</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Red Hat Advanced Cluster Management for Kubernetes Console CA cert</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>grc-59010-ca-cert</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>multicluster-hub-mcm-server-ca-issuer</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>grc-59010-grc-secrets</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Red Hat Advanced Cluster Management for Kubernetes Govern and risk CA cert</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>kui-proxy</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>multicloud-ca-issuer</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>kui-proxy-secret</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Visual Web Terminal</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>management-ingress-a0ae5-cert</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>multicloud-ca-issuer</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>management-ingress-c38ac-tls-secret</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ingress</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>multicloud-ca-cert</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>cert-manager-rhacm-selfsign</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>multicloud-ca-cert</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Red Hat Advanced Cluster Management for Kubernetes root CA</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>search-prod-c62a6-aggregator-ca-cert</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>multicloud-ca-issuer</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>search-prod-95fcc-search-secrets</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Search</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>search-prod-c62a6-redis-ca-cert</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>multicloud-ca-issuer</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>search-prod-95fcc-redisgraph-secrets</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Search</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>search-prod-c62a6-search-ca-cert</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>multicloud-ca-issuer</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>search-prod-95fcc-search-api-secrets</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Search</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>topology-276c4-ca-cert</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>multicluster-hub-mcm-server-ca-issuer</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>topology-b24e0-topology-secrets</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Topology</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Use the certificate policy controller to create and manage certificate policies.
See <a href="#policy-controllers">Policy controllers</a> to learn more about controllers.
Return to the <a href="#security">Security page</a> for more information.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="replacing-the-root-ca-certificate">Replacing the root CA certificate</h4>
<div class="paragraph">
<p>You can replace the root CA certificate.</p>
</div>
<div class="sect4">
<h5 id="prerequisites-for-root-ca-certificate">Prerequisites for root CA certificate</h5>
<div class="paragraph">
<p>Verify that your Red Hat Advanced Cluster Management for Kubernetes cluster is running.</p>
</div>
<div class="paragraph">
<p>Back up the existing Red Hat Advanced Cluster Management for Kubernetes certificate resource by running the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>   oc get cert multicloud-ca-cert -n open-cluster-management -o yaml &gt; multicloud-ca-cert-backup.yaml</pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="creating-the-root-ca-certificate-with-openssl">Creating the root CA certificate with OpenSSL</h5>
<div class="paragraph">
<p>Complete the following steps to create a root CA certificate with OpenSSL:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Generate your certificate authority (CA) RSA private key by running the following command:</p>
<div class="listingblock">
<div class="content">
<pre>openssl genrsa -out ca.key 4096</pre>
</div>
</div>
</li>
<li>
<p>Generate a self-signed CA certificate by using your CA key.
Run the following command:</p>
<div class="listingblock">
<div class="content">
<pre>openssl req -x509 -new -nodes -key ca.key -days 400 -out ca.crt -config req.cnf</pre>
</div>
</div>
<div class="paragraph">
<p>Your <code>req.cnf</code> file might resemble the following file:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>   [ req ]               # Main settings
   default_bits = 4096       # Default key size in bits.
   prompt = no               # Disables prompting for certificate values so the configuration file values are used.
   default_md = sha256       # Specifies the digest algorithm.
   distinguished_name = dn   # Specifies the section that includes the distinguished name information.
   x509_extensions = v3_ca   # The extentions to add to the self signed cert

   [ dn ]               # Distinguished name settings
   C = US                    # Country
   ST = North Carolina             # State or province
   L = Raleigh                # Locality
   O = Red Hat Open Shift     # Organization
   OU = Red Hat Advanced Container Management        # Organizational unit
   CN = www.redhat.com  # Common name.

   [ v3_ca ]          # x509v3 extensions
   basicConstraints=critical,CA:TRUE # Indicates whether the certificate is a CA certificate during the certificate chain verification process.</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div class="sect4">
<h5 id="replacing-root-ca-certificates">Replacing root CA certificates</h5>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create a new secret with the CA certificate by running the following command:</p>
<div class="listingblock">
<div class="content">
<pre>kubectl -n open-cluster-management create secret tls byo-ca-cert --cert ./ca.crt --key ./ca.key</pre>
</div>
</div>
</li>
<li>
<p>Edit the CA issuer to point to the BYO certificate.
Run the following commnad:</p>
<div class="listingblock">
<div class="content">
<pre>oc edit issuer -n open-cluster-management multicloud-ca-issuer</pre>
</div>
</div>
</li>
<li>
<p>Replace the string <code>mulicloud-ca-cert</code> with <code>byo-ca-cert</code>.
Save your deployment and quit the editor.</p>
</li>
<li>
<p>Validate the custom CA is in use by logging in to the console and view the details of the certificate being used.</p>
</li>
</ol>
</div>
</div>
<div class="sect4">
<h5 id="refreshing-cert-manager-certificates">Refreshing cert-manager certificates</h5>
<div class="paragraph">
<p>After the root CA is replaced, all certificates that are signed by the root CA must be refreshed and the services that use those certificates must be restarted.
Cert-manager creates the default Issuer from the root CA so all of the certificates issued by <code>cert-manager</code>, and signed by the default ClusterIssuer must also be refreshed.</p>
</div>
<div class="paragraph">
<p>Delete the Kubernetes secrets associated with each <code>cert-manager</code> certificate to refresh the certificate and restart the services that use the certificate.
Run the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>   oc delete secret -n open-cluster-management $(oc get cert -n open-cluster-management -o wide | grep multicloud-ca-issuer | awk '{print $3}')</pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="restoring-root-ca-certificates">Restoring root CA certificates</h5>
<div class="paragraph">
<p>To restore the root CA certificate, update the CA issuer by completing the following steps:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Edit the CA issuer.
Run the following command:</p>
<div class="listingblock">
<div class="content">
<pre>oc edit issuer -n open-cluster-management multicloud-ca-issuer</pre>
</div>
</div>
</li>
<li>
<p>Replace the <code>byo-ca-cert</code> string with <code>multicloud-ca-cert</code> in the editor.
Save the issuer and quit the editor.</p>
</li>
<li>
<p>Delete the BYO CA certificate.
Run the following commnad:</p>
<div class="listingblock">
<div class="content">
<pre>oc delete secret -n open-cluster-management byo-ca-cert</pre>
</div>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>Refresh all <code>cert-manager</code> certificates that use the CA.
For more information, see the forementioned section, Refreshing <em>cert-manager</em> certificates.</p>
</div>
<div class="paragraph">
<p>See <a href="#certificates">Certificates</a> for more information about certificates that are created and managed by Red Hat Advanced Cluster Management for Kubernates.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="replacing-management-ingress-certificates">Replacing management ingress certificates</h4>
<div class="paragraph">
<p>You can replace management ingress certificates.</p>
</div>
<div class="sect4">
<h5 id="prerequisites-to-replace-management-ingress-certificate">Prerequisites to replace management ingress certificate</h5>
<div class="paragraph">
<p>Prepare and have your <code>management-ingress</code> certificates and private keys ready.
If needed, you can generate a TLS certificate by using OpenSSL.
Set the common name parameter,<code>CN</code>, on the certificate to <code>manangement-ingress</code>.
If you are generating the certificate, include the following settings:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Include the following IP addresses and domain names in your certificate Subject Alternative Name (SAN) list:</p>
<div class="ulist">
<ul>
<li>
<p>The service name for the management ingress: <code>management-ingress</code>.</p>
</li>
<li>
<p>Include the route name for Red Hat Advanced Cluster Management for Kubernetes.
Recieve the route name by running the following command:</p>
<div class="listingblock">
<div class="content">
<pre> oc get route -n open-cluster-management</pre>
</div>
</div>
<div class="paragraph">
<p>You might receieve the following response:</p>
</div>
<div class="listingblock">
<div class="content">
<pre> multicloud-console.apps.grchub2.dev08.red-chesterfield.com</pre>
</div>
</div>
</li>
<li>
<p>Add the localhost IP address: <code>127.0.0.1</code>.</p>
</li>
<li>
<p>Add the localhost entry: <code>localhost</code>.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="sect5">
<h6 id="example-configuration-file-for-generating-a-certificate">Example configuration file for generating a certificate</h6>
<div class="paragraph">
<p>The following example configuration file and OpenSSL commands provide an example for how to generate a TLS certificate by using OpenSSL.
View the following <code>csr.cnf</code> configuration file, which defines the configuration settings for generating certificates with OpenSSL.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>   [ req ]               # Main settings
   default_bits = 2048       # Default key size in bits.
   prompt = no               # Disables prompting for certificate values so the configuration file values are used.
   default_md = sha256       # Specifies the digest algorithm.
   req_extensions = req_ext  # Specifies the configuration file section that includes any extensions.
   distinguished_name = dn   # Specifies the section that includes the distinguished name information.

   [ dn ]               # Distinguished name settings
   C = US                    # Country
   ST = North Carolina             # State or province
   L = Raleigh                # Locality
   O = Red Hat Open Shift     # Organization
   OU = Red Hat Advanced Container Management        # Organizational unit
   CN = management-ingress  # Common name.

   [ req_ext ]          # Extensions
   subjectAltName = @alt_names # Subject alternative names

   [ alt_names ]        # Subject alternative names
   DNS.1 = management-ingress
   DNS.2 = multicloud-console.apps.grchub2.dev08.red-chesterfield.com
   DNS.3 = localhost
   DNS.4 = 127.0.0.1

   [ v3_ext ]          # x509v3 extensions
   authorityKeyIdentifier=keyid,issuer:always  # Specifies the public key that corresponds to the private key that is used to sign a certificate.
   basicConstraints=CA:FALSE                   # Indicates whether the certificate is a CA certificate during the certificate chain verification process.
   #keyUsage=keyEncipherment,dataEncipherment   # Defines the purpose of the key that is contained in the certificate.
   extendedKeyUsage=serverAuth                 # Defines the purposes for which the public key can be used.
   subjectAltName=@alt_names                   # Identifies the subject alternative names for the identify that is bound to the public key by the CA.</pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Be sure to update the SAN labeled, <code>DNS.2</code> with the correct hostname for your management ingress.
</td>
</tr>
</table>
</div>
</div>
<div class="sect5">
<h6 id="openssl-commands-for-generating-a-certificate">OpenSSL commands for generating a certificate</h6>
<div class="paragraph">
<p>The following OpenSSL commands are used with the preceding configuration file to generate the required TLS certificate.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Generate your certificate authority (CA) RSA private key:</p>
<div class="listingblock">
<div class="content">
<pre>openssl genrsa -out ca.key 4096</pre>
</div>
</div>
</li>
<li>
<p>Generate a self-signed CA certificate by using your CA key:</p>
<div class="listingblock">
<div class="content">
<pre>openssl req -x509 -new -nodes -key ca.key -subj "/C=US/ST=North Carolina/L=Raleigh/O=Red Hat OpenShift" -days 400 -out ca.crt</pre>
</div>
</div>
</li>
<li>
<p>Generate the RSA private key for your certificate:</p>
<div class="listingblock">
<div class="content">
<pre>openssl genrsa -out ingress.key 4096</pre>
</div>
</div>
</li>
<li>
<p>Generate the Certificate Signing request (CSR) by using the private key:</p>
<div class="listingblock">
<div class="content">
<pre>openssl req -new -key ingress.key -out ingress.csr -config csr.cnf</pre>
</div>
</div>
</li>
<li>
<p>Generate a signed certificate by using your CA certificate and key and CSR:</p>
<div class="listingblock">
<div class="content">
<pre>openssl x509 -req -in ingress.csr -CA ca.crt -CAkey ca.key -CAcreateserial -out ingress.crt -sha256 -days 300 -extensions v3_ext -extfile csr.cnf</pre>
</div>
</div>
</li>
<li>
<p>Examine the certificate contents:</p>
<div class="listingblock">
<div class="content">
<pre>openssl x509  -noout -text -in ./ingress.crt</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect4">
<h5 id="replace-the-bring-your-own-byo-ingress-certificate">Replace the Bring Your Own (BYO) ingress certificate</h5>
<div class="paragraph">
<p>Complete the following steps to replace your BYO ingress certificate:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create the <code>byo-ingress-tls</code> secret by using your certificate and private key.
Run the following command:</p>
<div class="listingblock">
<div class="content">
<pre>kubectl -n open-cluster-management create secret tls byo-ingress-tls-secret --cert ./ingress.crt --key ./ingress.key</pre>
</div>
</div>
</li>
<li>
<p>Verify that the secret is created in the correct namespace.</p>
<div class="listingblock">
<div class="content">
<pre>kubectl get secret -n open-cluster-management | grep byo-ingress | grep tls</pre>
</div>
</div>
</li>
<li>
<p>Create a secret containing the CA certificate by running the following command:</p>
<div class="listingblock">
<div class="content">
<pre>  kubectl -n open-cluster-management create secret tls ingress-ca-cert --cert ./ca.crt --key ./ca.key</pre>
</div>
</div>
</li>
<li>
<p>Edit the management ingress deployment.
Get the name of the deployment.
Run the following commands:</p>
<div class="listingblock">
<div class="content">
<pre>oc get deployment -n open-cluster-management

oc edit deployment management-ingress -n open-cluster-management</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Replace the string similar to <code>multicloud-ca-cert</code> with <code>ingress-ca-cert</code>.</p>
</li>
<li>
<p>Save your deployment and close the editor.
The management ingress automatically restarts.</p>
</li>
</ul>
</div>
</li>
<li>
<p>After the management ingress pod has restarted, navigate to the Red Hat Advanced Cluster Management for Kubernetes console from your browser.
Verify that the current certificate is your certificate, and that all console access and login functionality remain the same.</p>
</li>
</ol>
</div>
</div>
<div class="sect4">
<h5 id="restore-the-default-self-signed-certificate-for-management-ingress">Restore the default self-signed certificate for management ingress</h5>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Edit the management ingress deployment.
Replace the string <code>multicloud-ca-cert</code> with <code>ingress-ca-cert</code>.
Get the name of the deployment.
Run the following commands:</p>
<div class="listingblock">
<div class="content">
<pre>   oc get deployment -n open-cluster-management

   oc edit deployment management-ingress -n open-cluster-management</pre>
</div>
</div>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Replace the <code>ingress-ca-cert</code> string  with <code>multicloud-ca-cert</code>.</p>
</li>
<li>
<p>Replace the <code>byo-ingress-tls-secret</code> string with the correct secret name similar to <code>management-ingress-b6417-tls-secret</code>.</p>
</li>
<li>
<p>Save your deployment and close the editor.
The management ingress automatically restarts.</p>
</li>
</ol>
</div>
</li>
<li>
<p>After all pods are restarted, navigate to the Red Hat Advanced Cluster Management for Kubernetes console from your browser.
Verify that the current certificate is your certificate, and that all console access and login functionality remain the same.</p>
</li>
<li>
<p>Delete the Bring Your Own (BYO) ingress secret by running the following command:</p>
<div class="listingblock">
<div class="content">
<pre>oc delete secret -n open-cluster-management byo-ingress-tls-secret</pre>
</div>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>See <a href="#certificates">Certificates</a> for more information about certificates that are created and managed by Red Hat Advanced Cluster Management for Kubernates.
Return to the <a href="#security">Security page</a> for more information on securing your cluster.</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="governance-and-risk">Governance and risk</h3>
<div class="paragraph">
<p>Use the Governance and risk page to create, view, and manage your security policies.
You can view the number of policy violations in your clusters and applications.</p>
</div>
<div class="paragraph">
<p>From the <em>Policies</em> page, you can view a summary of cluster and policy violations.
You can customize your <em>Summary</em> view by filtering the violations by categories or standards.
Collapse the summary to see less information.
You can also search for policies.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
When you search for a policy in the hub cluster, you might also receive the name of the replicated policy on your managed cluster.
For example, if you search for <code>policy-dhaz-cert</code>, the following policy name from the hub cluster might appear: <code>default.policy-dhaz-cert</code>.
The name of the replicated policy might appear as the following name: <code>namespace-in-hub.policyname</code>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>You can view a table list of violations.
The following details are provided in the table: description, resources, severity, cluster, standards, controls, categories, and update time.
You can filter the violation table view by policies or cluster violations.</p>
</div>
<div class="paragraph">
<p>Learn about the structure of an Red Hat Advanced Cluster Management for Kubernetes policy, and how to use the Red Hat Advanced Cluster Management for Kubernetes Governance and risk dashboard.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#policy-overview">Policy overview</a></p>
</li>
<li>
<p><a href="#policy-controllers">Policy controllers</a></p>
</li>
<li>
<p><a href="#policy-samples">Policy samples</a></p>
</li>
<li>
<p><a href="#manage-security-policies">Manage security policies</a></p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="policy-overview">Policy overview</h4>
<div class="paragraph">
<p>Use the Red Hat Advanced Cluster Management for Kubernetes security policy framework to create custom policy controllers and other policies.
Kubernetes CustomResourceDefinition (CRD) instance are used to create policies.
For more information about CRDs, see <a href="https://kubernetes.io/docs/tasks/access-kubernetes-api/custom-resources/custom-resource-definitions/">Extend the Kubernetes API with CustomResourceDefinitions</a>.</p>
</div>
<div class="paragraph">
<p>Each Red Hat Advanced Cluster Management for Kubernetes policy can have at least one or more templates.
For more details about the policy elements, view the following <em>Policy YAML table</em> section on this page.</p>
</div>
<div class="paragraph">
<p>The policy requires a <em>PlacementPolicy</em> that defines the clusters that the policy document is applied to, and a <em>PlacementBinding</em> that binds the Red Hat Advanced Cluster Management for Kubernetes policy to the <code>PlacementPolicy</code>.</p>
</div>
<div class="paragraph">
<p><strong>Important</strong>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>You must create a <code>PlacementPolicy</code> with <code>PlacementRules</code> to apply your policies to the managed cluster, and bind the <code>PlacementRule</code> with a <code>PlacementBinding</code>.</p>
</li>
<li>
<p>You can create a policy in any namespace on the hub cluster except the cluster namespace.
If you create a policy in the cluster namespace, it is by deleted by Red Hat Advanced Cluster Management for Kubernetes.</p>
</li>
<li>
<p>Each client and provider is responsible for ensuring that their managed cloud environment meets internal enterprise security standards for software engineering, secure engineering, resiliency, security, and regulatory compliance for workloads hosted on Kubernetes clusters.
Use the governance and security capability to gain visibility and remediate configurations to meet standards.</p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="policy-yaml-structure">Policy YAML structure</h5>
<div class="paragraph">
<p>When you create a policy, you must include required parameter fields and values.
Depending on your policy controller, you might need to include other optional fields and values.
View the following YAML structure for explained parameter fields:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">apiVersion: policy.mcm.ibm.com/v1alpha1
kind: Policy
metadata:
  name:
  annotations:
    policy.mcm.ibm.com/standards:
    policy.mcm.ibm.com/categories:
    policy.mcm.ibm.com/controls:
spec:
  complianceType:
  namespaces:
    exclude:
    include:
  policy-templates:
    - objectDefinition:
        apiVersion:
        kind:
        metadata:
          name:
          labels:
            controller-tools.k8s.io:
            pci-category:
        spec:
  object-template:
  - complianceType:
    objectDefinition:
      apiVersion:
      kind:
      metadata:
        name:
      spec:
        containers:
        - name:
          image:
          ports:
          - containerPort:
  role-template:
  remediationAction:
  disabled:

---
apiVersion: mcm.ibm.com/v1alpha1
kind: PlacementBinding
metadata:
  name:
placementRef:
  name:
  kind:
  apiGroup:
subjects:
- name:
  kind:
  apiGroup:

---
apiVersion: apps.open-cluster-management.io/v1
kind: PlacementRule
metadata:
  name:
spec:
  clusterConditions:
  - type:
  clusterLabels:
    matchLabels:
      cloud:</code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="policy-yaml-table">Policy YAML table</h5>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">apiVersion</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Required.
Set the value to <code>mcm.ibm.com/v1alpha1</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">kind</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Required.
Set the value to <code>Policy</code> to indicate the type of policy.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">metadata.name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Required.
The name for identifying the policy resource.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">metadata.annotations</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional.
Used to specify a set of security details that describes the set of standards the policy is trying to validate.
<strong>Note</strong>: You can view policy violations based on the standards and categories that you define for your policy on the <em>Policies</em> page, from the console.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">annotations.policy.mcm.ibm.com/standards</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional.
The name or names of security standards the policy is related to.
For example, National Institute of Standards and Technology (NIST) and Payment Card Industry (PCI).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">annotations.policy.mcm.ibm.com/categories</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A security control category represent specific requirements for one or more standards.
For example, a System and Information Integrity category might indicate that your policy contains a data transfer protocol to protect personal information, as required by the HIPAA and PCI standards.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">annotations.policy.mcm.ibm.com/controls</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name of the security control that is being checked.
For example, Center of Internet Security (CIS) and certificate policy controller.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">spec</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Required.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">spec.complianceType</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Reqired.
Set the value to <code>"musthave"</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">spec.namespace</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Required.
The namespaces within the hub cluster that the policy is applied to.
Enter parameter values for <code>include</code>, which are the namespaces you want to apply to the policy to.
<code>exclude</code> specifies the namespaces you explicitly do not want to apply the policy to.<strong>Note</strong>: A namespace that is specified in the object template of a policy controller, overrides the namespace in the corresponding controller policy.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">spec.policy-template</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional.
Used to create one or more policies for third party or external security controls.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">spec.object-template</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional.
Used to list any other Kubernetes object that must be evaluated or applied to the managed clusters.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">spec.role-template</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional.
Used to list RBAC roles that must be evaluated or applied to the managed clusters.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">disabled</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Required.
Set the value to <code>true</code> or <code>false</code>.
The <code>disabled</code> parameter provides the ability to enable and disable your policies.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">remediationAction</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional.
Specifies the remediation of your policy.
The parameter values are <code>enforce</code> and <code>inform</code>.
<strong>Important</strong>: Some policies may not support the enforce feature.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="policy-sample-file">Policy sample file</h5>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">apiVersion: policy.mcm.ibm.com/v1alpha1
kind: Policy
metadata:
  name: policy1
  annotations:
    policy.mcm.ibm.com/standards: NIST
    policy.mcm.ibm.com/categories: SystemAndInformationIntegrity, RBAC
    policy.mcm.ibm.com/controls: DifferentControl
  namespace: mcm
spec:
  remediationAction: "enforce" # enforce or inform
  disabled: false # or true
  complianceType: "musthave" # used as default, when missing in a particular sub-template
  namespaces:
    include: ["default"]
    exclude: ["kube*"]
  role-templates:
    - apiVersion: roletemplate.mcm.ibm.com/v1alpha1
      metadata:
        namespace: "" # will be inferred
        name: operator-role
      selector:
        matchLabels:
          dev: "true"
      complianceType: "musthave" # at this level, it means the role must exist with the rules that it must have below
      rules:
        - complianceType: "mustnothave" # at this level, it means if the role exists the rule is a mustnothave
          policyRule:
            apiGroups: ["core"]
            resources: ["secrets"]
            verbs: ["get", "list", "watch","delete", "create", "update", "patch"]
        - complianceType: "musthave" # at this level, it means if the role exists the rule is a musthave
          policyRule:
            apiGroups: ["core"]
            resources: ["pods"]
            verbs: ["get", "list", "watch"]
  object-templates:
    - complianceType: "musthave"
      objectDefinition:
        kind: RoleBinding
        apiVersion: rbac.authorization.k8s.io/v1
        metadata:
          name: operate-pods-rolebinding
          namespace: default
        subjects:
        - kind: User
          name: admin # Name is case sensitive
          apiGroup: rbac.authorization.k8s.io
        roleRef:
          kind: Role #this must be Role or ClusterRole
          name: operator # this must match the name of the Role or ClusterRole you wish to bind to
          apiGroup: rbac.authorization.k8s.io
    - complianceType: "musthave"
      objectDefinition:
        apiVersion: policy/v1beta1
        kind: PodSecurityPolicy
        metadata:
          name: restricted-mcm
          annotations:
            seccomp.security.alpha.kubernetes.io/allowedProfileNames: '*'
        spec:
          privileged: false # no priviliedged pods
          allowPrivilegeEscalation: false
          allowedCapabilities:
          - '*'
          volumes:
          - '*'
          hostNetwork: true
          hostPorts:
          - min: 1000 # ports &lt; 1000 are reserved
            max: 65535
          hostIPC: false
          hostPID: false
          runAsUser:
            rule: 'RunAsAny'
          seLinux:
            rule: 'RunAsAny'
          supplementalGroups:
            rule: 'RunAsAny'
          fsGroup:
            rule: 'RunAsAny'
    - complianceType: "musthave"
      objectDefinition:
        kind: NetworkPolicy
        apiVersion: networking.k8s.io/v1
        metadata:
          namespace: default
          name: deny-from-other-namespaces
        spec:
          podSelector:
            matchLabels:
          ingress:
          - from:
            - podSelector: {} # accept ingress from all pods within this namespace only
    - complianceType: "musthave"
      objectDefinition:
        apiVersion: v1
        kind: LimitRange
        metadata:
          name: mem-limit-range
        spec:
          limits:
          - default:
              memory: 512Mi
            defaultRequest:
              memory: 256Mi
            type: Container</code></pre>
</div>
</div>
<div class="paragraph">
<p>See <a href="#managing-a-security-policy">Managing a security policy</a> to create and update a policy.
You can also enable and update Red Hat Advanced Cluster Management policy controllers to validate the compliance of your policies.
See <a href="#policy-controllers">Policy controllers</a>.
See <a href="#governance-and-risk">Governance and risk</a> for more policy topics.</p>
</div>
</div>
</div>
<div class="sect3">
<h4 id="policy-controllers">Policy controllers</h4>
<div class="paragraph">
<p>Use the Red Hat Advanced Cluster Management for Kubernetes governance and risk policy framework to create custom policy controllers.
The policy controllers are Kubernetes CustomResourceDefinition (CRD) instance.
For more information about CRDs, see <a href="https://kubernetes.io/docs/tasks/access-kubernetes-api/custom-resources/custom-resource-definitions/">Extend the Kubernetes API with CustomResourceDefinitions</a>.</p>
</div>
<div class="paragraph">
<p>Create and customize policies with the out of the box policy templates.
<strong>Important</strong>: Some policy controllers may not support the enforce feature.
If the enforce feature is not supported by the controller, you must remediate it manually.
Only the configuration policy controller supports the <code>enforce</code> feature.</p>
</div>
<div class="paragraph">
<p>View the following topics to learn more about the following Red Hat Advanced Cluster Management for Kubernetes policy controllers:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#kubernetes-configuration-policy-controller">Configuration policy controller</a></p>
</li>
<li>
<p><a href="#certificate-policy-controller">Certificate policy controller</a></p>
</li>
<li>
<p><a href="#iam-policy-controller">IAM policy controller</a></p>
</li>
<li>
<p><a href="#cis-policy-controller">CIS policy controller</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Refer to <a href="#governance-and-risk">Governance and risk</a> for more topics about managing your policies.</p>
</div>
<div class="sect4">
<h5 id="kubernetes-configuration-policy-controller">Kubernetes configuration policy controller</h5>
<div class="paragraph">
<p>Configuration policy controller can be used to configure any Kubernetes resource and apply security policies across your clusters.</p>
</div>
<div class="paragraph">
<p>The configuration policy controller communicates with the local Kubernetes API server to get the list of your configurations that are in your cluster.
For more information about CRDs, see <a href="https://kubernetes.io/docs/tasks/access-kubernetes-api/custom-resources/custom-resource-definitions/">Extend the Kubernetes API with CustomResourceDefinitions</a>.</p>
</div>
<div class="paragraph">
<p>The configuration policy controller is created on the hub cluster during installation.
Configuration policy controller supports the <code>enforce</code> feature and monitors the compliance of the following policies:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Memory usage policy</p>
</li>
<li>
<p>Namespace policy</p>
</li>
<li>
<p>Image vulnerability policy</p>
</li>
<li>
<p>Pod nginx policy</p>
</li>
<li>
<p>Pod security policy</p>
</li>
<li>
<p>Role policy</p>
</li>
<li>
<p>Rolebinding policy</p>
</li>
<li>
<p>Security content constraints (SCC) policy</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>When the <code>remediationAction</code> for the configuration policy is set to <code>enforce</code>, the controller creates a replicate policy on the target managed clusters.</p>
</div>
<div class="sect5">
<h6 id="configuration-policy-controller-yaml-structure">Configuration policy controller YAML structure</h6>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">Name:         configuration-policy-example
Namespace:
Labels:
APIVersion:   policies.ibm.com/v1alpha1
Kind:         ConfigPolicy
Metadata:
  Finalizers:
    finalizer.mcm.ibm.com
Spec:
  Conditions:
    Ownership:
    NamespaceSelector:
      Exclude:
      Include:
    RemediationAction:
    Disabled:
 Status:
   CompliancyDetails:
     Configuration-Policy-Example:
       Default:
       Kube - Public:
   Compliant:          Compliant
 Events:</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="configuration-policy-controller-yaml-table">Configuration policy controller YAML table</h6>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top"></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Required.</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Namespace</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Required.</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Labels</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional.</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">APIVersion</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Required.
Set the value to <code>mcm.ibm.com/v1alpha1</code>.</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Kind</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Required.
Set the value to <code>Policy</code> to indicate the type of policy.</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Metadata</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Required.</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Metadata.Finalizers</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Required.</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Spec</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Required.
Specifications of which configuration policy to monitor and how to remediate them.</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Spec.Conditions</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Required.</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Spec.Ownership</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Required.</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Spec.NamespaceSelector</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Required.
parameter values for <code>Include</code> and <code>Exclude</code>.</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Spec.RemediationAction</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Required.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">// add description</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Spec.Disabled</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Required.
Set the value to <code>true</code> or <code>false</code>.
The <code>disabled</code> parameter provides the ability to enable and disable your policies.</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Spec.Status</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Required.
Reports the status of the policy.</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Status.CompliancyDetails</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Required.</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Status.Events</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Required.</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</div>
<div class="sect5">
<h6 id="configuration-policy-sample">Configuration policy sample</h6>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">   apiVersion: policy.mcm.ibm.com/v1alpha1
   kind: Policy
   metadata:
     name:
     namespace:
   spec:
     namespaces:
       include:
       exclude:
     remediationAction:
     disabled:
     complianceType:
     object-templates:
      ...</code></pre>
</div>
</div>
<div class="paragraph">
<p>Learn about how policies are applied on your hub cluster.
See <a href="#policy-samples">Policy samples</a> for more details.
Learn how to create and customize policies, see <a href="#manage-security-policies">Manage security policies</a>.</p>
</div>
<div class="paragraph">
<p>See <a href="#policy-controllers">Policy controllers</a> for more information about controllers.</p>
</div>
</div>
</div>
<div class="sect4">
<h5 id="certificate-policy-controller">Certificate policy controller</h5>
<div class="paragraph">
<p>Certificate policy controller can be used to detect certificates that are close to expiring.
Configure and customize the certificate policy controller by updating the minimum duration parameter in your controller policy.
When a certificate expires in less than the minimum duration amount of time, the policy becomes noncompliant.
The certificate policy controller is created on your hub cluster.</p>
</div>
<div class="paragraph">
<p>The certificate policy controller communicates with the local Kubernetes API server to get the list of secrets that contain certificates and determine all non-compliant certificates.
For more information about CRDs, see <a href="https://kubernetes.io/docs/tasks/access-kubernetes-api/custom-resources/custom-resource-definitions/">Extend the Kubernetes API with CustomResourceDefinitions</a>.</p>
</div>
<div class="paragraph">
<p>Certificate policy controller does not support the <code>enforce</code> feature.</p>
</div>
<div class="sect5">
<h6 id="certificate-policy-controller-yaml-structure">Certificate policy controller YAML structure</h6>
<div class="paragraph">
<p>View the following example of a certificate policy and review the element in the YAML table:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">  Name:         certificate-policy-example
  Namespace:
  Labels:       category=system-and-information-integrity
  APIVersion:  policies.ibm.com/v1alpha1
  Kind:         CertificatePolicy
  Metadata:
  Spec:
    Conditions:
      Ownership:
    NamespaceSelector:
      Exclude:
      Include:
    RemediationAction:
    Disabled:
    MinimumDuration:
 Status:
   CompliancyDetails:
     Certificate-Policy-Example:
       Default:
       Kube - Public:
   Compliant:
  Events:</code></pre>
</div>
</div>
<div class="sect6">
<h7 id="certificate-policy-controller-yaml-table">Certificate policy controller YAML table</h7>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field</th>
<th class="tableblock halign-left valign-top">Description</th>
<th class="tableblock halign-left valign-top"></th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Required.</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Namespace</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Required.</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Labels</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional.
In a certificate policy, the <code>category=system-and-information-integrity</code> label categorizes the policy and facilitates querying the certificate policies.
If there is a different value for the <code>category</code> key in your certificate policy, the value is overridden by the certificate controller.</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">APIVersion</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Required.
Set the value to <code>policies.ibm.com/v1alpha1</code>.</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Kind</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Required.
Set the value to <code>CertificatePolicy</code> to indicate the type of policy.</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Metadata</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Required.</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Spec</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Required.
Specifications of which certificates to monitor and refresh.</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Spec.Conditions</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Required.</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Spec.Ownership</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Required.</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Spec.NamespaceSelector</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Required.
Namespace to which you want to apply the policy.
Enter parameter values for <code>Include</code> and <code>Exclude</code>.
<strong>Note</strong>: When you create multiple certificate policies and apply them to the same managed cluster, each policy <code>NamespaceSelector</code> must be assigned a different value.</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Spec.RemediationAction</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Required.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">// add description</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Spec.Disabled</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Required.
Set the value to <code>true</code> or <code>false</code>.
The <code>disabled</code> parameter provides the ability to enable and disable your policies.</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Spec.MinimumDuration</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Required.
parameter specifies the smallest duration before a certificate is considered non-compliant.
When the certificate expiration is greater than the <code>minimumDuration</code>, then the certificate is considered compliant.</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Status</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Required.
Reports the status of the policy.</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Status.CompliancyDetails</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Required.</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Status.Events</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Required.</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect5">
<h6 id="certificate-policy-sample">Certificate policy sample</h6>
<div class="paragraph">
<p>When your certificate policy controller is created on your hub cluster, a replicated policy is created on your managed cluster.
Your certificate policy on your managed cluster might resemble the following file:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">apiVersion: policies.ibm.com/v1alpha1
kind: CertificatePolicy
metadata:
  name: certificate-policy-1
  namespace: kube-system
  label:
    category: "System-Integrity"
spec:
  namespaceSelector:
    include: ["default", "kube-*"]
    exclude: ["kube-system"]
  remediationAction: inform
  disabled: false
  minimumDuration: 100h</code></pre>
</div>
</div>
<div class="paragraph">
<p>Learn how to manage a certificate policy, see <a href="#managing-a-certificate-policy">Managing certificate policies</a> for more details.
Refer to <a href="#policy-controllers">Policy controllers</a> for more topics.</p>
</div>
</div>
</div>
<div class="sect4">
<h5 id="iam-policy-controller">IAM policy controller</h5>
<div class="paragraph">
<p>Identity and Access Management (IAM) policy controller can be used to receive notifications about IAM policies that are non-compliance.
The compliance check is based on the parameters that you configure in the IAM policy, and on any backend change that you did to the role bindings in your cluster.</p>
</div>
<div class="paragraph">
<p>The IAM policy controller checks for compliance of the number of cluster administrators that you allow in your cluster.
IAM policy controller communicates with the local Kubernetes API server.
For more information, see <a href="https://kubernetes.io/docs/tasks/access-kubernetes-api/custom-resources/custom-resource-definitions/">Extend the Kubernetes API with CustomResourceDefinitions</a>.</p>
</div>
<div class="paragraph">
<p>The IAM policy controller runs on the hub cluster, and checks for compliance against the IAM policy that you define.
IAM policy is created on your managed cluster.
The IAM policy controller verifies and reports compliance of the role bindings based on the RBAC that you configure in your cluster.
For more information about RBAC in Red Hat Advanced Cluster Management for Kubernetes, see <a href="#role-based-access-control-(rbac)">Role-based access control (RBAC)</a>.</p>
</div>
<div class="sect5">
<h6 id="iam-policy-yaml-structure">IAM policy YAML structure</h6>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">apiVersion: iam.policies.ibm.com/v1alpha1
kind: IamPolicy
metadata:
  name: iam-grc-policy
  label:
    category: "System-Integrity"
spec:
  namespaceSelector:
    include:
    exclude:
  remediationAction:
  disabled:
  maxClusterRoleBindingUsers:
  maxRoleBindingViolationsPerNamespace:</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="iam-policy-yaml-table">IAM policy YAMl table</h6>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">apiVersion</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Required.
Set the value to <code>policy.mcm.ibm.com/v1alpha1</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">kind</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Required.
Set the value to <code>Policy</code> to indicate the type of policy.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">metadata.name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Required.
The name for identifying the policy resource.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">metadata.label</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Required.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">metadata.category</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Required.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">spec</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Required.
Add configuration details for your policy.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">spec.namespaceSelector</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Required.
The namespaces within the hub cluster that the policy is applied to.
Enter parameter values for <code>include</code>, which are the namespaces you want to apply to the policy to.
<code>exclude</code> specifies the namespaces you explicitly do not want to apply the policy to.
<strong>Note</strong>: A namespace that is specified in the object template of a policy controller, overrides the namespace in the corresponding parent policy.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">remediationAction</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional.
Specifies the remediation of your policy.
Enter  <code>inform</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">disabled</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Required.
Set the value to <code>true</code> or <code>false</code>.
The <code>disabled</code> parameter provides the ability to enable and disable your policies.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">spec.maxClusterRoleBindingUsers</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Required.
Maximum number of IAM rolebinding users that are able to create a IAM policy.
.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">spec.maxRolebindingViolationsPerNamespace</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Required.
Maximum number of IAM role binding violations that are valid before a namespace is considered as non-compliant.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Refer to <a href="#policy-controllers">Policy controllers</a> for more topics.</p>
</div>
</div>
</div>
<div class="sect4">
<h5 id="cis-policy-controller">CIS policy controller</h5>
<div class="paragraph">
<p>You can use the Center for Internet Security (CIS) policy controller to receive notifications about non-compliant clusters.
<strong>Note</strong>: THe CIS policy controller is only supported on OpenShift Container Platform 3.11.</p>
</div>
<div class="paragraph">
<p>The CIS policy controller monitors the nodes in a cluster for compliance against CIS Kubernetes benchmark checks.
The CIS policies that list the rules to exclude can be applied to the managed clusters.
The controller checks the cluster for any violations that are not in the exclude list.</p>
</div>
<div class="paragraph">
<p>The controller uses <code>aqua-security</code> and <code>kube-bench</code> tool to check the master and worker nodes in the managed cluster for compliance.</p>
</div>
<div class="paragraph">
<p>When a managed cluster is non-compliant, the CIS controller assigns a risk score.
Each CIS rule that fails the check is assigned a score.
The risk score that is assigned to the non-compliant cluster is the maximum of all the scores that are assigned to failed checks.</p>
</div>
<div class="paragraph">
<p>The risk score is on a scale of 1 to 10.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>If the score is less than 4, then the risk category is <code>low</code>.</p>
</li>
<li>
<p>If the score is greater than or equal to 4, and less than or equal to 7, then the risk category is <code>medium</code>.</p>
</li>
<li>
<p>If the score is greater than 7, then the risk category is <code>high</code>.</p>
</li>
</ul>
</div>
<div class="sect5">
<h6 id="cis-policy-controller-components">CIS policy controller components</h6>
<div class="paragraph">
<p>The CIS policy controller consists of the following four components.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>cis-controller-minio</code>: The <code>cis-controller-minio</code> object store is used to store the artifacts that are collected by the CIS crawler that runs on all the master and worker nodes.
The results from running the aqua-security kube-bench tool are also stored in the CIS Minio object store.</p>
</li>
<li>
<p><code>cis-crawler</code>: The <code>cis-crawler</code> collects information about Kubernetes processes, binary files, and configuration files and stores them in the Minio object store.
The crawler runs on the master and worker nodes.
The crawler runs every 24 hours.</p>
</li>
<li>
<p><code>drishti-cis</code>: The <code>drishti-cis</code> component runs the aqua-security kube-bench tool against the artifacts that are collected by the <code>cis-crawler</code> and stores the results in <code>cis-controller-minio</code> object store.
The artifacts are scanned every 24 hours.</p>
</li>
<li>
<p><code>cis-controller</code>: The <code>cis-controller</code> scans the <code>cis-controller-minio</code> object store for results that are generated by the aqua-security kube-bench tool and updates the CIS policy status.
The controller scans the results every 24 hours or whenever the policy is updated.</p>
</li>
</ul>
</div>
</div>
<div class="sect5">
<h6 id="cis-policy-yaml-structure">CIS policy YAML structure</h6>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">apiVersion: policy.mcm.ibm.com/v1alpha1
kind: Policy
metadata:
  name:
  namespace:
  annotations:
    policy.mcm.ibm.com/categories:
    policy.mcm.ibm.com/controls:
    policy.mcm.ibm.com/standards:
    seed-generation:
  finalizers:
    - finalizer.policies.ibm.com
    - propagator.finalizer.mcm.ibm.com
  generation:
  resourceVersion:
spec:
  complianceType:
  namespaces:
    exclude:
    include:
  policy-templates:
    - objectDefinition:
        apiVersion: policies.ibm.com/v1alpha1
        kind: CisPolicy
        metadata:
          name:
          labels:
            controller-tools.k8s.io:
            pci-category: system-integrity
        spec:
          cisSpecVersion: 1.4
          kubernetesCisPolicy:
            masterNodeExcludeRules:
            workerNodeExcludeRules:
          severity:
  remediationAction:
  disabled:</code></pre>
</div>
</div>
<div class="sect6">
<h7 id="cis-policy-yaml-table">CIS policy YAML table</h7>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">apiVersion</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Required.
Set the value to <code>policy.mcm.ibm.com/v1alpha1</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">kind</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Required.
Set the value to <code>Policy</code> to indicate the type of policy.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">metadata.name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Required.
The name for identifying the policy resource.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">metadata.namespace</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Required.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">metadata.annotations</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional.
Used to specify a set of security details that describes the set of standards the policy is trying to validate.
<strong>Note</strong>: You can view policy violations based on the standards and categories that you define for your policy on the <em>Policies</em> page, from the console.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">annotations.policy.mcm.ibm.com/standards</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional.
The name or names of security standards the policy is related to.
For example, National Institute of Standards and Technology (NIST) and Payment Card Industry (PCI).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">annotations.policy.mcm.ibm.com/categories</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A security control category represent specific requirements for one or more standards.
For example, a System and Information Integrity category might indicate that your policy contains a data transfer protocol to protect personal information, as required by the HIPAA and PCI standards.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">annotations.policy.mcm.ibm.com/controls</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name of the security control that is being checked.
For example, Center of Internet Security (CIS) and certificate policy controller.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">spec</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Required.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">spec.complianceType</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Required.
Set the value to <code>"musthave"</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">spec.namespace</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Required.
The namespaces within the hub cluster that the policy is applied to.
Enter parameter values for <code>include</code>, which are the namespaces you want to apply to the policy to.
<code>exclude</code> specifies the namespaces you explicitly do not want to apply the policy to.<strong>Note</strong>: A namespace that is specified in the object template of a policy controller, overrides the namespace in the corresponding parent policy.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">spec.policy-template</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional.
Used to create one or more policies for third party or external security controls.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">policy-template.objectDefinition</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">obejctDefinition.labels</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">objectDefinition.cisSpecVersion</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Required.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">objectDefintion.kubernetesCisPolicy</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Required.
Refer to OpenShift Container Platform CIS rules when you create CIS policies.
Enter parameter values for the <code>masterNodeExcludeRules</code> and <code>workerNodeExcludeRules</code>.
See <a href="#cis-rules-specification">CIS rules specification</a> for a list of the rules.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">objectDefinition.severity</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Required.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">disabled</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Required.
Set the value to <code>true</code> or <code>false</code>.
The <code>disabled</code> parameter provides the ability to enable and disable your policies.
CIS policy controller is disabled by default.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">remediationAction</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Required.
Specifies the remediation of your policy.
Enter <code>inform</code>.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Learn to create and manage your CIS policy, see <a href="#managing-a-cis-policy">Managing a CIS policy</a>.
Refer to <a href="#policy-controllers">Policy controllers</a> for more topics.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="policy-samples">Policy samples</h4>
<div class="paragraph">
<p>Create and manage policies in Red Hat Advanced Cluster Management for Kubernetes to define rules, processes, and controls on the hub cluster.
View the following policy samples to view how specfic policies are applied:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#kubernetes-configuration-policy-controller-sample">Configuration policy controller sample</a></p>
</li>
<li>
<p><a href="#image-vulnerability-policy-sample">Image vulnerability policy sample</a></p>
</li>
<li>
<p><a href="#memory-usage-policy-sample">Memory usage policy sample</a></p>
</li>
<li>
<p><a href="#namespace-policy-sample">Namespace policy sample</a></p>
</li>
<li>
<p><a href="#pod-nginx-policy-sample">Pod nginx policy sample</a></p>
</li>
<li>
<p><a href="#pod-security-policy-sample">Pod security policy sample</a></p>
</li>
<li>
<p><a href="#role-policy-sample">Role policy sample</a></p>
</li>
<li>
<p><a href="#rolebinding-policy-sample">Rolebinding policy sample</a></p>
</li>
<li>
<p><a href="#security-context-constraints-(scc)-policy-sample">Security context constraints (SCC) policy sample</a></p>
</li>
<li>
<p><a href="#certificate-policy-controller-sample">Certificate policy controller sample</a></p>
</li>
<li>
<p><a href="#cis-policy-controller-sample">CIS policy controller sample</a></p>
</li>
<li>
<p><a href="#iam-policy-sample">IAM policy sample</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Refer to <a href="#governance-and-risk">Governance and risk</a> for more topics.</p>
</div>
<div class="sect4">
<h5 id="memory-usage-policy">Memory usage policy</h5>
<div class="paragraph">
<p>Kubernetes configuration policy controller monitors the status of the memory usage policy.
Use the memory usage policy to limit or restrict your memory and compute usage.
For more information, see <em>Limit Ranges</em> in the <a href="https://kubernetes.io/docs/concepts/policy/limit-range/">Kubernetes documentation</a>.
Learn more details about the memory usage policy structure in the following sections.</p>
</div>
<div class="sect5">
<h6 id="memory-usage-policy-yaml-structure">Memory usage policy YAML structure</h6>
<div class="paragraph">
<p>Your memory usage policy might resemble the following YAML file:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">   apiVersion: policy.mcm.ibm.com/v1alpha1
   kind: Policy
   metadata:
     name: policy-limitrange
     namespace:
   spec:
     complianceType:
     remediationAction:
     namespaces:
       exclude:
       include:
     object-templates:
       - complianceType:
         objectDefinition:
           apiVersion:
           kind:
           metadata:
             name:
           spec:
             limits:
             - default:
                 memory:
               defaultRequest:
                 memory:
               type:
           ...</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="memory-policy-table">Memory policy table</h6>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">apiVersion</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Required.
Set the value to <code>policy.mcm.ibm.com/v1alpha1</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">kind</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Required.
Set the value to <code>Policy</code> to indicate the type of policy.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">metadata.name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Required.
The name for identifying the policy resource.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">metadata.namespaces</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">spec.namespace</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Required.
The namespaces within the hub cluster that the policy is applied to.
Enter parameter values for <code>include</code>, which are the namespaces you want to apply to the policy to.
<code>exclude</code> specifies the namespaces you explicitly do not want to apply the policy to.
<strong>Note</strong>: A namespace that is specified in the object template of a policy controller, overrides the namespace in the corresponding parent policy.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">remediationAction</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional.
Specifies the remediation of your policy.
The parameter values are <code>enforce</code> and <code>inform</code>.
<strong>Important</strong>: Some policies may not support the enforce feature.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">disabled</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Required.
Set the value to <code>true</code> or <code>false</code>.
The <code>disabled</code> parameter provides the ability to enable and disable your policies.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">spec.complianceType</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Required.
Set the value to <code>"musthave"</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">spec.object-template</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional.
Used to list any other Kubernetes object that must be evaluated or applied to the managed clusters.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect5">
<h6 id="memory-policy-sample">Memory policy sample</h6>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">   apiVersion: policy.mcm.ibm.com/v1alpha1
   kind: Policy
   metadata:
     name: policy-limitrange
     namespace: mcm
   spec:
     complianceType: musthave
     remediationAction: inform
     namespaces:
       exclude: ["kube-*"]
       include: ["default"]
     object-templates:
       - complianceType: musthave
         objectDefinition:
           apiVersion: v1
           kind: LimitRange # limit memory usage
           metadata:
             name: mem-limit-range
           spec:
             limits:
             - default:
                 memory: 512Mi
               defaultRequest:
                 memory: 256Mi
               type: Container
           ...</code></pre>
</div>
</div>
<div class="paragraph">
<p>See <a href="#managing-a-memory-policy">Managing a memory policy</a> for more information.
View other configuration policies that are monitored by controller, see the <a href="#kubernetes-configuration-policy-controller">Kubernetes configuration policy controller</a> page.</p>
</div>
</div>
</div>
<div class="sect4">
<h5 id="namespace-policy">Namespace policy</h5>
<div class="paragraph">
<p>Kubernetes configuration policy controller monitors the status of your namespace policy.
Apply the namespace policy to define specific rules for your namespace.
Learn more details about the namespace policy structure in the following sections.</p>
</div>
<div class="sect5">
<h6 id="namespace-policy-yaml-structure">Namespace policy YAML structure</h6>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">   apiVersion: policy.mcm.ibm.com/v1alpha1
   kind: Policy
   metadata:
     name: policy-namespace-1
     namespace:
   spec:
     complianceType:
     remediationAction:
     namespaces:
       exclude:
       include:
     object-templates:
       - complianceType:
         objectDefinition:
           kind:
           apiVersion:
           metadata:
             name:
        ...</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="namespace-policy-yaml-table">Namespace policy YAML table</h6>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">apiVersion</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Required.
Set the value to <code>policy.mcm.ibm.com/v1alpha1</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">kind</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Required.
Set the value to <code>Policy</code> to indicate the type of policy.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">metadata.name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Required.
The name for identifying the policy resource.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">metadata.namespaces</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">spec.namespace</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Required.
The namespaces within the hub cluster that the policy is applied to.
Enter parameter values for <code>include</code>, which are the namespaces you want to apply to the policy to.
<code>exclude</code> specifies the namespaces you explicitly do not want to apply the policy to.
<strong>Note</strong>: A namespace that is specified in the object template of a policy controller, overrides the namespace in the corresponding parent policy.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">remediationAction</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional.
Specifies the remediation of your policy.
The parameter values are <code>enforce</code> and <code>inform</code>.
<strong>Important</strong>: Some policies may not support the enforce feature.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">disabled</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Required.
Set the value to <code>true</code> or <code>false</code>.
The <code>disabled</code> parameter provides the ability to enable and disable your policies.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">spec.complianceType</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Required.
Set the value to <code>"musthave"</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">spec.object-template</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional.
Used to list any other Kubernetes object that must be evaluated or applied to the managed clusters.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect5">
<h6 id="namespace-policy-sample">Namespace policy sample</h6>
<div class="paragraph">
<p>Your namespace policy might resemble the following YAML file:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">   apiVersion: policy.mcm.ibm.com/v1alpha1
   kind: Policy
   metadata:
     name: policy-namespace-1
     namespace: mcm
   spec:
     complianceType: musthave
     remediationAction: inform
     namespaces:
       exclude: ["kube-*"]
       include: ["default"]
     object-templates:
       - complianceType: musthave
         objectDefinition:
           kind: Namespace # must have namespace 'prod'
           apiVersion: v1
           metadata:
             name: prod
        ...</code></pre>
</div>
</div>
<div class="paragraph">
<p>Manage your namespace policy.
See <a href="#managing-a-namespace-policy">Managing a namespace policy</a> for more information.
See <a href="#kubernetes-configuration-policy-controller">Kubernetes configuration policy controller</a> to learn about other configuration policies.</p>
</div>
</div>
</div>
<div class="sect4">
<h5 id="image-vulnerability-policy">Image vulnerability policy</h5>
<div class="paragraph">
<p>Apply the image vulnerability policy to detect if container images have vulnerabilities by leveraging the Container Security Operator.
The image vulnerability policy is checked by the Kubernetes configuration policy controller.
For more information about the Security Operator, see the <em>Container Security Operator</em> from the <a href="https://github.com/quay/container-security-operator">Quay repository</a>.
The policy installs the Container Security Operator on your managed cluster if it is not installed.</p>
</div>
<div class="sect5">
<h6 id="image-vulnerability-policy-yaml-structure">Image vulnerability policy YAML structure</h6>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">   apiVersion: policy.mcm.ibm.com/v1alpha1
   kind: Policy
   metadata:
     name: policy-imagemanifestvulnpolicy
     namespace: default
     annotations:
       policy.mcm.ibm.com/standards:
       policy.mcm.ibm.com/categories:
       policy.mcm.ibm.com/controls:
   spec:
     complianceType:
     remediationAction:
     disabled:
     namespaces:
       exclude:
       include:
     object-templates:
       - complianceType:
         objectDefinition:
           apiVersion: operators.coreos.com/v1alpha1
           kind: ClusterServiceVersion
           metadata:
             annotations:
               capabilities:
               categories:
               containerImage:
               createdAt:
               description:
               repository:
               tectonic-visibility:
             name:
             namespace:
           spec:
             customresourcedefinitions:
               owned:
               - description:
                 displayName:
                 kind: ImageManifestVuln
                 name: imagemanifestvulns.secscan.quay.redhat.com
                 version: v1alpha1
             description:
             displayName:
             install:
               spec:
                 deployments:
                 - name:
                   spec:
                     replicas:
                     selector:
                       matchLabels:
                         name:
                     template:
                       metadata:
                         labels:
                           name:
                         name:
                       spec:
                         containers:
                         - command:
                           -
                           -
                           env:
                           - name:
                             valueFrom:
                               fieldRef:
                                 fieldPath:
                           - name:
                             valueFrom:
                               fieldRef:
                                 fieldPath:
                           - name:
                             valueFrom:
                               fieldRef:
                                 fieldPath:
                           image:
                           name:
                         serviceAccountName:
                 permissions:
                 - rules:
                   - apiGroups:
                     resources:
                     verbs:
                   - apiGroups:
                     resources:
                     verbs:
                   - apiGroups:
                     - ''
                     resources:
                     - secrets
                     verbs:
                     - get
                   serviceAccountName:
               strategy:
             installModes:
             - supported:
               type:
             - supported:
               type:
             - supported:
               type:
             - supported:
               type:
             keywords:
             labels:
               operated-by:
             links:
             - name:
               url:
             - name:
               url:
             icon:
             - base64data:
               mediatype:
             maturity:
             maintainers:
             - email:
               name:
             provider:
               name:
             selector:
               matchLabels:
                 operated-by:
             version:
             replaces:
       - complianceType:
         objectDefinition:
           apiVersion: operators.coreos.com/v1alpha1
           kind:
           metadata:
             name:
             namespace:
           spec:
             channel:
             installPlanApproval:
             name:
             source:
             sourceNamespace:
             startingCSV:
       - complianceType:
         objectDefinition:
           apiVersion: secscan.quay.redhat.com/v1alpha1
           kind:</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="image-vulnerability-policy-yaml-table">Image vulnerability policy YAML table</h6>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">apiVersion</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Required.
Set the value to <code>policy.mcm.ibm.com/v1alpha1</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">kind</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Required.
Set the value to <code>Policy</code> to indicate the type of policy.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">metadata.name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Required.
The name for identifying the policy resource.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">metadata.namespaces</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">spec.namespace</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Required.
The namespaces within the hub cluster that the policy is applied to.
Enter parameter values for <code>include</code>, which are the namespaces you want to apply to the policy to.
<code>exclude</code> specifies the namespaces you explicitly do not want to apply the policy to.
<strong>Note</strong>: A namespace that is specified in the object template of a policy controller, overrides the namespace in the corresponding parent policy.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">remediationAction</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional.
Specifies the remediation of your policy.
The parameter values are <code>enforce</code> and <code>inform</code>.
<strong>Important</strong>: Some policies may not support the enforce feature.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">disabled</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Required.
Set the value to <code>true</code> or <code>false</code>.
The <code>disabled</code> parameter provides the ability to enable and disable your policies.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">spec.complianceType</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Required.
Set the value to <code>"musthave"</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">spec.object-template</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional.
Used to list any other Kubernetes object that must be evaluated or applied to the managed clusters.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect5">
<h6 id="image-vulnerability-policy-sample">Image vulnerability policy sample</h6>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">   apiVersion: policy.mcm.ibm.com/v1alpha1
   kind: Policy
   metadata:
     name: policy-imagemanifestvulnpolicy
     namespace: default
     annotations:
       policy.mcm.ibm.com/standards: NIST-CSF
       policy.mcm.ibm.com/categories: DE.CM Security Continuous Monitoring
       policy.mcm.ibm.com/controls: DE.CM-8 Vulnerability scans
   spec:
     complianceType: musthave
     remediationAction: inform
     disabled: false
     namespaces:
       exclude: ["kube-*"]
       include: ["*"]
     object-templates:
       - complianceType: musthave
         objectDefinition:
           apiVersion: operators.coreos.com/v1alpha1
           kind: ClusterServiceVersion
           metadata:
             annotations:
               capabilities: Full Lifecycle
               categories: Security
               containerImage: quay.io/quay/container-security-operator@sha256:15a4b50d847512b5f404ec1cf72c30c98e073a7f26f1588213bd2e8b6331f016
               createdAt: 2019-11-16 01:03:00
               description: Identify image vulnerabilities in Kubernetes pods
               repository: https://github.com/quay/container-security-operator
               tectonic-visibility: ocs
             name: container-security-operator.v1.0.1
             namespace: openshift-operators
           spec:
             customresourcedefinitions:
               owned:
               - description: Represents a set of vulnerabilities in an image manifest.
                 displayName: Image Manifest Vulnerability
                 kind: ImageManifestVuln
                 name: imagemanifestvulns.secscan.quay.redhat.com
                 version: v1alpha1
             description: "The Container Security Operator (CSO) brings Quay and Clair metadata to Kubernetes / OpenShift.\
               \ Starting with vulnerability information the scope will get expanded over time. If it runs on OpenShift,\
               \ the corresponding vulnerability information is shown inside the OCP Console. The Container Security Operator\
               \ enables cluster administrators to monitor known container\
               \ image vulnerabilities in pods running on their Kubernetes cluster. The controller sets up a watch\
               \ on pods in the specified namespace(s) and queries the container registry for vulnerability\
               \ information. If the container registry supports image scanning,\
               \ such as [Quay](https://github.com/quay/quay) with [Clair](https://github.com/quay/clair),\
               \ then the Operator will expose any vulnerabilities found via the Kubernetes API in an\
               \ `ImageManifestVuln` object.  This Operator requires no additional configuration after deployment,\
               \ and will begin watching pods and populating `ImageManifestVulns` immediately once installed."
             displayName: Container Security
             install:
               spec:
                 deployments:
                 - name: container-security-operator
                   spec:
                     replicas: 1
                     selector:
                       matchLabels:
                         name: container-security-operator-alm-owned
                     template:
                       metadata:
                         labels:
                           name: container-security-operator-alm-owned
                         name: container-security-operator-alm-owned
                       spec:
                         containers:
                         - command:
                           - /bin/security-labeller
                           - '--namespaces=$(WATCH_NAMESPACE)'
                           env:
                           - name: MY_POD_NAMESPACE
                             valueFrom:
                               fieldRef:
                                 fieldPath: metadata.namespace
                           - name: MY_POD_NAME
                             valueFrom:
                               fieldRef:
                                 fieldPath: metadata.name
                           - name: WATCH_NAMESPACE
                             valueFrom:
                               fieldRef:
                                 fieldPath: "metadata.annotations['olm.targetNamespaces']"
                           image: quay.io/quay/container-security-operator@sha256:15a4b50d847512b5f404ec1cf72c30c98e073a7f26f1588213bd2e8b6331f016
                           name: container-security-operator
                         serviceAccountName: container-security-operator
                 permissions:
                 - rules:
                   - apiGroups:
                     - secscan.quay.redhat.com
                     resources:
                     - imagemanifestvulns
                     - imagemanifestvulns/status
                     verbs:
                     - '*'
                   - apiGroups:
                     - ''
                     resources:
                     - pods
                     - events
                     verbs:
                     - '*'
                   - apiGroups:
                     - ''
                     resources:
                     - secrets
                     verbs:
                     - get
                   serviceAccountName: container-security-operator
               strategy: deployment
             installModes:
             - supported: true
               type: OwnNamespace
             - supported: true
               type: SingleNamespace
             - supported: true
               type: MultiNamespace
             - supported: true
               type: AllNamespaces
             keywords:
             - open source
             - containers
             - security
             labels:
               alm-owner-container-security-operator: container-security-operator
               operated-by: container-security-operator
             links:
             - name: Operator Source Code
               url: https://github.com/quay/container-security-operator
             - name: Source Code
               url: https://github.com/quay/container-security-operator
             icon:
             - base64data:    iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAYAAABw4pVUAAAACXBIWXMAAAsSAAALEgHS3X78AAANmElEQVR4nO2dfWxWVx3Hv/d5aWkpbYE5ZNA+DSB03WAlQx1IhIQxTJyhSzY1SrI5tsQ/TISoMcaYsfiHLnGuJv6xhDFYYkx8iStRk7mOMBKkqEzKNmrBsfVpgYmOrm/07Xm55vf0nHJ7z733Oefcc9tC+0mawj2X9nmeL9/fOef3O+dcy7ZtzGY6U9Z2AI0A6tj3agD3Sb7kcwD6ALQD6KLv9Wn7TeGuWcSsEqQzZdGHvd3xJfvBq0JCvcm/6tN2X3TvSo0ZF4SJ0MS+dgs3TA9HAbTQ10yLM2OCsFD0BIDHhcaZ5RUAR2YqtE27IJ0pi0TYF2E4MgWFteb6tH1kOn/ptAnChDgAICU0zm7S9LqnS5jIBWGhiYTYJjTeWpxgwkQayiIThHXWzbOwjwgL9TH7our8IxGkM2XRiIksXiU03h7004CkPm23mH43RgVhrqDw9G2h8fbkFyyMGXOLMUE6U1YdG8vP9tGTaWg01lSftrtM/NyYcEUD1nG3z0ExwN5zO/sMQhNaEDacPX4b9xcy0Hs/zj6LUIQShL2Aw0LD3OVwWFG0BZkXw5fD/6yxfurXWAytTn1eDH8Gc8CoDSyI4dCne+ynfG/0Qdkh82L4w8UgRvPY+48a6yXfm31QcggbSRwXGuaZIoaTshj2b+qxm4UGH6QFYfOMdhOjqXhlNVaf6kJskfyPGhkZQfuLL2Bx8w+FtiCWP38EVY+qZW/+/qejqPje1xEbviG0eeEnBmEBdlkMn7+/xz4pNHogFbLYDLzF1NC2YleTkhiF19B2EoN165AvXyi0+UHCL9rV5NPqTW9vL3oTpRhu3OLZ7iZIDMIGrDEbr79VY0lluWX7kAMmJ3137D8gXAuC3HFtPId82UIM7Hgk4M6pLN67T0t4ou/hPUKbm2JicHI2yrI2pPJeRQVhiUJjuamqx55AcoVaSaT7X+cn/zywo0nKJeSOJXv3CdeDIOEH4iWFO7JL78TQlp2+d8uKwRm30XimxvqJ0OAiUBAWqowWZlTdkclk0H31w8m/y7okjDs4fi5RFYMzmsf3i4WuQEFYPcNYSoTiuao73n/nHHKJ5JRr5JJi6LiDwqITcslw4+Yp13TFAOtPsjaOCQ0OfAVhQ1yjxaXFT6p9SG53cMglQeGEwmJYd3CcbgwjBmfcxuozNZbvB+ErCOvIjVH+wHaUP6BWxe3peFdwB8cvnEAzLLrdwRldux6jazcYEWPy99l4RrjI8BSEzcaN1sBVPySiq7tbuMbx63R1Bg0UFoO4/vAeY2IQWRvVfrN4T0FmgzsuX3oP48lS4boTL5eEHTR4kVm3Hrl1Gzxa9BnPe3cHgiDMHUaX6tD/WlUudpwv+i/cna6pQYMX2a2iG8OQBxJeLhEEYYvYjJFcWaecupBxB8fZ6ZoaNHiR3fIg7DuWebTok7HxNfc/niIIG1kZLcPq9B3dnR3CNT94p6sTFq91p6XcwRnfLYbIMNAM3j3icjskdAnSiY47BgYGJmfLsvR9aY+W8DJh0UkULsnZ+Jbz75OCsFm50XmHzoeUaW1BbEQuy8ohl6i6Iz/Yj9JzfxOuF8O0S2he4py9Ox2ilhYtgk6mlej7+TOoPKa2/qwyNy5cK0bvoWZU/eHlIneJ5DZuhq2QcZYhD/yI3xaZIDq5pP7fv4LM5S5UHntVySX1m7cK14Igd3x8qBmJ69dQ0fZGwJ0idtlCZHbKZ5xlyNn4Ir+tIAgLV8Y2y+hkWon+303kMakwVN7eJrR7Qe5YsmSJR4s/g39pQW5gYrFh7GSr731+ZHc2GXVJxsYnedjiDjGyyIuj447h0ycwfPrmwvLqP/5KuMcLVXcQH70w0bdROiTX+TbiF94R7gkiCpfYwDcRlSA6E0H+IXFkwkl5ZkzZHTwsOnNTyaNy4jvJfs7sRDFn4wuIQhCdXJLbHZxiLlnVcI9wrRgkvDtRGL+g4ZKldxoVJQesg0OQGSvPEh+/7L0og1xSfs67LynJjGHl6jXC9SCGXj+K3nSXZ6Iw2fqqcK0YJofANEmk7zFTi4Sh6Y7MlXShk/Wj8g3vtrUa7rh8sNlTDCJ+tg3W9f8K14Mw7RKatcfYZnwj6LjD3Xe4WXDxbSy4ODWc6Lhj8PQJ/O+UGBan/FyNvsSkS2wb22LshITQUC5Jxx18qBuEuy+pq60NuNubD34WLDyR+GurlktMpebzQJ0xh0ThDo7TJfFsBjUN9wr3BNHfdgL9bcHu4Oi4JGPIJVyQaqFFEZ1MK82WhwL6DjcVbRMTuNq7liOZlM/QEtd+K79wJn72FCzFXFrOUAHLBkpjJkZYOu6gXBKfLctQcaoVZYN9WLVe7eWOXU4rCWIN30CiVX0vpwmX0EjLq0ClxIKGRi13UC5JlU0N65TdkX5e/T8LDYF1XJKvXSVcVyW0IIs1claq7gALiwvv2ShcD0LVHRxtlxhIp4QSRKcARei4Qycs6riDozNRNFHACiWIzodEuSQdd6iGxexgP66/pr+vv+CSU8G5NC/CzkuMbIuexxyhBJGdRzihEEf1EhUo8UgJSBUSi6qw7Cv6SwSo3kEhSBWdeYyTUIJQGptCkCo6AwEd8Vc8pb+iSaeDphBnfXRNuK5C6JCl80FRNVHHJTfOnxWuB1G6MoVlX1Z3ScEdO9Ur2mHdAROCkEtUwwlVE3VccqbjQmFxmwqp72isfNn5SKEqqALVU8K6A0yQ4JXGEkyHS2hh9cii6qILo92oukTXHTpVRzdxCyMxdq5tKHQ6XXJJhcIyoaHNE3WH9NUPlV2iIkhu4xYtd1DVMSwWMBZjW51Do+MS2XkMLRWlxXBEPpFEuuNd4Z4gqjZvQ9VmuTqczjzChDswEa66YuzE59CQS6i+ofRGVqSkFkRcd207SHepv2SZvoSqf1TfUIHqJybcAYcgRhyCiFzSu2ZDYX+Gk0xpGbovvSfcG4SMS3TcYWJkxbEsnIiZPGWTqn8mXUKrQ2486N3P/FtxoTSx4mn/kZ2uO6jKaAo6goMPe0OPtDh6s3dREBJjZOmywlpaLzLJUmWXLN21GwtqvCvWOosVTLqDRlhwzENm1CWUOKQEIoevmyoWQt7XcEmtR19C1b6cKywWw7Q74sAFRCEIHGt0VeB9CReD0tjFckmjydLC2SQqLHvsccElOtU+k2JgwiGvISpBqN5BVUEVCun1z2yfXDcl28F2+OwvD8LpEi13jNzQqpcEYQEvggvCzp09GnC/ElTv6NUoQi1mEziaLfv1HW6G4iVaLkmwLIHOZk6qJlqSRzfJkLTwn/t77EKcd+ayjJ7SrOMSHk5Uc0k6LqERl0xYdBOFO+IW/sz/HJkg5BKdvmTFd59VziUNKe5JJO56eh+yjz4pXC9GYTGdQXdgQoQfO/48AQtb6sWNAHTCVsVDTVq5JFoMpwIVsOzGzyq/vqTG4ocgSixc4uEKHul3o0cx6RSwKisrUaG4Z5BySToLGj6luGDbRAHKTdzCL52XpgjCZu3GJonQnCjW1jcI1/zgmVZaKqrqkuW1KcSy8pljkxNBsMmg+4BMrwKVepwJQMcltavXIJkZE6574exgr7yk9tJp0R0tTZUhCnckLfzafU0QhD3aR22qXQSdzl0mnBQyrWdvbuihZT+0OE6F1evvk3JJQmNzaBAxIOt10LIgCMPoaUCUmh9ULGDJuMQrhKj2JTIuMVWAclIS8x5AeQrCXKL2CQZA6RCZ/RluUgH7QPxySbR0VMclQZgqQHESFvq83AE/QRhGXMJzUzqdbqrhXt9w4uUOjo5LPlESF64jInckLTwrXGT4CsJGXJ62ksW929VUp0uzZS93cMglWcUsQYPPfnfTs3KadwQdPe4rCGMfewCWMl5nFJrqdGVWpl896PuePSkrKxNc4h40hIWOHU9Y2BH0YwIFYbN3sXpUBC8xOGE7Xdlc0pWDzaFdEhQWdVgQw3POWbkXgYJgQpQW9jQyKYLEgGanm7r75hBYNtOaHejTcgnPEvgNGnQpsdC+qcf+QbF/rnL2e9EZvOxRqqou4eFENdMaxiWmy7MJS+60JSlBWOhqCupPVM61pb5E54Mq/eCCUqaVXKK6R4TOTqnKjhU2f5qA+o1SCw8VC1UcIw90MXnI8O1GWQxf3dRj/0b2bSkttmZD4W84r82L4Q89h0pFDOisfmez+IIo82L4M20PBQMTZTiP5+bF8EZXDIR9Fi6dzExPIxMa5jBhxEDYDTv0i+kFCA1zlLBiwMQOKnoB9Gg4q3BUx9yEPYltf1gxYPLx3W/VWFvpaWT8ZLS5Ak362DxDfS2SB8b2qdMLKrVwN6UIhMbbFHqv9J5NiQGTDnFCTyOjB2DZBTffflCIokShTG5KlUgEwUQIS9EDsOhsc6HxFobqGZRCl02FqBKZIBw62JGeuUSP+REabyGo7EqVvqDikgkiF4RDcxZ6zA89WUZonMXQ6hBakGBiBCXDtAnCIWHoyTKzfTRGoydaNzVdQnCmXRAOhTJ6mMls62Ooj6DlnVGHJj9mTBAOdf70/Ax6ZAM9JUC4YRqg/Rm0JYBWoUfVWcsy44I4IXHoKQF0MD2dhR5VWKNwRHv6aBsZ7VyaaRGczCpBvKDQRic+05m29EVHqcoKRR88O66CNuR30T7wmQpFUgD4Px6QRGRh7pGzAAAAAElFTkSuQmCC
               mediatype: image/png
             maturity: alpha
             maintainers:
             - email: quay-devel@redhat.com
               name: Quay Engineering Team
             provider:
               name: Red Hat
             selector:
               matchLabels:
                 alm-owner-container-security-operator: container-security-operator
                 operated-by: container-security-operator
             version: 1.0.1
             replaces: container-security-operator.v1.0.0
       - complianceType: musthave
         objectDefinition:
           apiVersion: operators.coreos.com/v1alpha1
           kind: Subscription
           metadata:
             name: container-security-operator
             namespace: openshift-operators
           spec:
             channel: alpha
             installPlanApproval: Automatic
             name: container-security-operator
             source: community-operators
             sourceNamespace: openshift-marketplace
             startingCSV: container-security-operator.v1.0.1
       - complianceType: mustnothave
         objectDefinition:
           apiVersion: secscan.quay.redhat.com/v1alpha1
           kind: ImageManifestVuln</code></pre>
</div>
</div>
<div class="paragraph">
<p>See <a href="#managing-an-image-vulnerability-policy">Managing an image vulnerability policy</a> for more information.
View other configuration policies that are monitored by the configuration controller, see <a href="#kubernetes-configuration-policy-controller">Kubernetes configuration policy controller</a>.</p>
</div>
</div>
</div>
<div class="sect4">
<h5 id="pod-nginx-policy">Pod nginx policy</h5>
<div class="paragraph">
<p>Kubernetes configuration policy controller monitors the status of you pod nginx policies.
Apply the pod policy to define the container rules for your pods.
A nginx pod must exist in your cluster.</p>
</div>
<div class="sect5">
<h6 id="pod-nginx-policy-yaml-structure">Pod nginx policy YAML structure</h6>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">   apiVersion: policy.mcm.ibm.com/v1alpha1
   kind: Policy
   metadata:
     name: policy-pod
     namespace:
   spec:
     complianceType:
     remediationAction:
     namespaces:
       exclude:
       include:
     object-templates:
       - complianceType:
         objectDefinition:
           apiVersion:
           kind: Pod # nginx pod must exist
           metadata:
             name:
           spec:
             containers:
             - image:
               name:
               ports:
               - containerPort:
        ...</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="pod-nginx-plicy-table">Pod nginx plicy table</h6>
<div class="paragraph">
<p>|Field|Description| |-- |&#8201;&#8212;&#8201;| | apiVersion | Required.
Set the value to <code>policy.mcm.ibm.com/v1alpha1</code>.
| | kind | Required.
Set the value to <code>Policy</code> to indicate the type of policy.
| | metadata.name | Required.
The name for identifying the policy resource.
| | metadata.namespaces | Optional.
| | spec.namespace | Required.
The namespaces within the hub cluster that the policy is applied to.
Enter parameter values for <code>include</code>, which are the namespaces you want to apply to the policy to.
<code>exclude</code> specifies the namespaces you explicitly do not want to apply the policy to.
<strong>Note</strong>: A namespace that is specified in the object template of a policy controller, overrides the namespace in the corresponding parent policy.| | remediationAction | Optional.
Specifies the remediation of your policy.
The parameter values are <code>enforce</code> and <code>inform</code>.
<strong>Important</strong>: Some policies may not support the enforce feature.| | disabled | Required.
Set the value to <code>true</code> or <code>false</code>.
The <code>disabled</code> parameter provides the ability to enable and disable your policies.| | spec.complianceType | Required.
Set the value to <code>"musthave"</code>| | spec.object-template| Optional.
Used to list any other Kubernetes object that must be evaluated or applied to the managed clusters.
|</p>
</div>
</div>
<div class="sect5">
<h6 id="pod-nginx-policy-sample">Pod nginx policy sample</h6>
<div class="paragraph">
<p>Your pod policy nginx policy might resemble the following YAML file:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">   apiVersion: policy.mcm.ibm.com/v1alpha1
   kind: Policy
   metadata:
     name: policy-pod
     namespace: mcm
   spec:
     complianceType: musthave
     remediationAction: inform
     namespaces:
       exclude: ["kube-*"]
       include: ["default"]
     object-templates:
       - complianceType: musthave
         objectDefinition:
           apiVersion: v1
           kind: Pod # nginx pod must exist
           metadata:
             name: nginx-pod
           spec:
             containers:
             - image: nginx:1.7.9
               name: nginx
               ports:
               - containerPort: 80
        ...</code></pre>
</div>
</div>
<div class="paragraph">
<p>Learn how to manage a pod nginx policy, see <a href="#managing-a-pod-nginx-policy">Managing a pod nginx policy</a> for more details.
View other configuration policies that are monitored by the configuration controller, see <a href="#kubernetes-configuration-policy-controller">Kubernetes configuration policy controller</a>.
See <a href="#manage-security-policies">Manage security policies</a> to manage other policies.</p>
</div>
</div>
</div>
<div class="sect4">
<h5 id="pod-security-policy">Pod security policy</h5>
<div class="paragraph">
<p>Kubernetes configuration policy controller monitors the status of the memory usage policy.
Apply a pod security policy to secure pods and containers.
For more information, see <em>Pod Security Policies</em> in the <a href="https://kubernetes.io/docs/concepts/policy/pod-security-policy/">Kubernetes documentation</a>.
Learn more details about the pod security policy structure in the following sections.</p>
</div>
<div class="sect5">
<h6 id="pod-security-policy-yaml-structure">Pod security policy YAML structure</h6>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">   apiVersion: policy.mcm.ibm.com/v1alpha1
   kind: Policy
   metadata:
     name: policy-podsecuritypolicy
     namespace:
   spec:
     complianceType:
     remediationAction:
     namespaces:
       exclude:
       include:
     object-templates:
       - complianceType:
         objectDefinition:
           apiVersion:
           kind: PodSecurityPolicy # no privileged pods
           metadata:
             name:
             annotations:
           spec:
             privileged:
             allowPrivilegeEscalation:
             allowedCapabilities:
             volumes:
             hostNetwork:
             hostPorts:
             hostIPC:
             hostPID:
             runAsUser:
               rule:
             seLinux:
               rule:
             supplementalGroups:
               rule:
             fsGroup:
               rule:
        ...</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="pod-security-policy-table">Pod security policy table</h6>
<div class="paragraph">
<p>|Field|Description| |-- |&#8201;&#8212;&#8201;| | apiVersion | Required.
Set the value to <code>policy.mcm.ibm.com/v1alpha1</code>.
| | kind | Required.
Set the value to <code>Policy</code> to indicate the type of policy.
| | metadata.name | Required.
The name for identifying the policy resource.
| | metadata.namespaces | Optional.
| | spec.namespace | Required.
The namespaces within the hub cluster that the policy is applied to.
Enter parameter values for <code>include</code>, which are the namespaces you want to apply to the policy to.
<code>exclude</code> specifies the namespaces you explicitly do not want to apply the policy to.
<strong>Note</strong>: A namespace that is specified in the object template of a policy controller, overrides the namespace in the corresponding parent policy.| | remediationAction | Optional.
Specifies the remediation of your policy.
The parameter values are <code>enforce</code> and <code>inform</code>.
<strong>Important</strong>: Some policies may not support the enforce feature.| | disabled | Required.
Set the value to <code>true</code> or <code>false</code>.
The <code>disabled</code> parameter provides the ability to enable and disable your policies.| | spec.complianceType | Required.
Set the value to <code>"musthave"</code>| | spec.object-template| Optional.
Used to list any other Kubernetes object that must be evaluated or applied to the managed clusters.
|</p>
</div>
</div>
<div class="sect5">
<h6 id="pod-security-policy-sample">Pod security policy sample</h6>
<div class="paragraph">
<p>Your pod security policy might resemble the following YAML file:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">   apiVersion: policy.mcm.ibm.com/v1alpha1
   kind: Policy
   metadata:
     name: policy-podsecuritypolicy
     namespace: mcm
   spec:
     complianceType: musthave
     remediationAction: inform
     namespaces:
       exclude: ["kube-*"]
       include: ["default"]
     object-templates:
       - complianceType: musthave
         objectDefinition:
           apiVersion: policy/v1beta1
           kind: PodSecurityPolicy # no privileged pods
           metadata:
             name: restricted-mcm
             annotations:
            seccomp.security.alpha.kubernetes.io/allowedProfileNames: '*'
           spec:
             privileged: false # no priviliedged pods
             allowPrivilegeEscalation: false
             allowedCapabilities:
             - '*'
             volumes:
             - '*'
             hostNetwork: true
             hostPorts:
             - min: 1000 # ports &lt; 1000 are reserved
               max: 65535
             hostIPC: false
             hostPID: false
             runAsUser:
               rule: 'RunAsAny'
             seLinux:
               rule: 'RunAsAny'
             supplementalGroups:
               rule: 'RunAsAny'
             fsGroup:
               rule: 'RunAsAny'
        ...</code></pre>
</div>
</div>
<div class="paragraph">
<p>See <a href="#managing-a-pod-security-policy">Managing a pod security policy</a> for more information.
View other configuration policies that are monitored by controller, see the <a href="#kubernetes-configuration-policy-controller">Kubernetes configuration policy controller</a> page.</p>
</div>
</div>
</div>
<div class="sect4">
<h5 id="role-policy">Role policy</h5>
<div class="paragraph">
<p>Kubernetes configuration policy controller monitors the status of role policies.
Apply a role policy to set rules and permissions for specific roles in your cluster.
Learn more details about the role policy structure in the following sections.</p>
</div>
<div class="sect5">
<h6 id="role-policy-yaml-structure">Role policy YAML structure</h6>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">   apiVersion: policy.mcm.ibm.com/v1alpha1
   kind: Policy
   metadata:
     name: policy-role
     namespace: mcm
   spec:
     complianceType:
     remediationAction:
     namespaces:
       exclude:
       include:
     role-templates:
       - apiVersion: roletemplate.mcm.ibm.com/v1alpha1 # role must follow defined permissions
         metadata:
           namespace:
           name:
         selector:
           matchLabels:
             dev:
         complianceType:
         rules:
           - complianceType:
             policyRule:
               apiGroups:
               resources:
               verbs:
          - complianceType:
            policyRule:
              apiGroups:
              resources:
              verbs:
         ...</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="role-policy-table">Role policy table</h6>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">apiVersion</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Required.
Set the value to <code>policy.mcm.ibm.com/v1alpha1</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">kind</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Required.
Set the value to <code>Policy</code> to indicate the type of policy.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">metadata.name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Required.
The name for identifying the policy resource.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">metadata.namespaces</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">spec.namespace</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Required.
The namespaces within the hub cluster that the policy is applied to.
Enter parameter values for <code>include</code>, which are the namespaces you want to apply to the policy to.
<code>exclude</code> specifies the namespaces you explicitly do not want to apply the policy to.
<strong>Note</strong>: A namespace that is specified in the object template of a policy controller, overrides the namespace in the corresponding parent policy.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">remediationAction</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional.
Specifies the remediation of your policy.
The parameter values are <code>enforce</code> and <code>inform</code>.
<strong>Important</strong>: Some policies may not support the enforce feature.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">disabled</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Required.
Set the value to <code>true</code> or <code>false</code>.
The <code>disabled</code> parameter provides the ability to enable and disable your policies.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">spec.complianceType</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Required.
Set the value to <code>"musthave"</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">spec.object-template</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional.
Used to list any other Kubernetes object that must be evaluated or applied to the managed clusters.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect5">
<h6 id="role-policy-sample">Role policy sample</h6>
<div class="paragraph">
<p>Apply a role policy to set rules and permissions for specific roles in your cluster.
For more information on roles, see <a href="#role-based-access-control-(rbac)">Role-based access control (RBAC)</a>.
Your role policy might resemble the following YAML file:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">   apiVersion: policy.mcm.ibm.com/v1alpha1
   kind: Policy
   metadata:
     name: policy-role
     namespace: mcm
   spec:
     complianceType: musthave
     remediationAction: inform
     namespaces:
       exclude: ["kube-*"]
       include: ["default"]
     role-templates:
       - apiVersion: roletemplate.mcm.ibm.com/v1alpha1 # role must follow defined permissions
         metadata:
           namespace: "" # will be inferred
           name: operator-role-policy
         selector:
           matchLabels:
             dev: "true"
         complianceType: musthave # at this level, it means the role must exist with the rules that it must have the following
         rules:
           - complianceType: musthave # at this level, it means if the role exists the rule is a musthave
             policyRule:
               apiGroups: ["extensions", "apps"]
               resources: ["deployments"]
               verbs: ["get", "list", "watch", "create", "delete","patch"]
          - complianceType: "mustnothave" # at this level, it means if the role exists the rule is a mustnothave
            policyRule:
              apiGroups: ["core"]
              resources: ["secrets"]
              verbs: ["get", "list", "watch","delete", "create", "update", "patch"]
         ...</code></pre>
</div>
</div>
<div class="paragraph">
<p>See <a href="#managing-a-role-policy">Managing a role policy</a> for more information.
View other configuration policies that are monitored by controller, see the <a href="#kubernetes-configuration-policy-controller">Kubernetes configuration policy controller</a> page.
Learn more about Red Hat Advanced Cluster Management for Kubernates RBAC, see <a href="#role-based-access-control-(rbac)">Role-based access control (RBAC)</a>.</p>
</div>
</div>
</div>
<div class="sect4">
<h5 id="rolebinding-policy">Rolebinding policy</h5>
<div class="paragraph">
<p>Apply a rolebinding policy to bind a policy to a namespace in your cluster.</p>
</div>
<div class="sect5">
<h6 id="rolebinding-policy-yaml-structure">Rolebinding policy YAML structure</h6>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">   apiVersion: policy.mcm.ibm.com/v1alpha1
   kind: Policy
   metadata:
     name: policy-rolebinding
     namespace:
   spec:
     complianceType:
     remediationAction:
     namespaces:
       exclude:
       include:
     object-templates:
       - complianceType:
         objectDefinition:
           kind: RoleBinding # role binding must exist
           apiVersion: rbac.authorization.k8s.io/v1
           metadata:
             name: operate-pods-rolebinding
           subjects:
           - kind: User
             name: admin # Name is case sensitive
             apiGroup:
           roleRef:
             kind: Role #this must be Role or ClusterRole
             name: operator # this must match the name of the Role or ClusterRole you wish to bind to
             apiGroup: rbac.authorization.k8s.io
       ...</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="rolebinding-policy-table">Rolebinding policy table</h6>
<div class="paragraph">
<p>|Field|Description| |-- |&#8201;&#8212;&#8201;| | apiVersion | Required.
Set the value to <code>policy.mcm.ibm.com/v1alpha1</code>.
| | kind | Required.
Set the value to <code>Policy</code> to indicate the type of policy.
| | metadata.name | Required.
The name for identifying the policy resource.
| | metadata.namespaces | Optional.
| | spec.namespace | Required.
The namespaces within the hub cluster that the policy is applied to.
Enter parameter values for <code>include</code>, which are the namespaces you want to apply to the policy to.
<code>exclude</code> specifies the namespaces you explicitly do not want to apply the policy to.
<strong>Note</strong>: A namespace that is specified in the object template of a policy controller, overrides the namespace in the corresponding parent policy.| | remediationAction | Optional.
Specifies the remediation of your policy.
The parameter values are <code>enforce</code> and <code>inform</code>.
<strong>Important</strong>: Some policies may not support the enforce feature.| | disabled | Required.
Set the value to <code>true</code> or <code>false</code>.
The <code>disabled</code> parameter provides the ability to enable and disable your policies.| | spec.complianceType | Required.
Set the value to <code>"musthave"</code>| | spec.object-template| Optional.
Used to list any other Kubernetes object that must be evaluated or applied to the managed clusters.
|</p>
</div>
</div>
<div class="sect5">
<h6 id="rolebinding-policy-sample">Rolebinding policy sample</h6>
<div class="paragraph">
<p>Apply a role binding policy to bind a policy to a namespace in your cluster.
Your role binding policy might resemble the following YAML file:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">   apiVersion: policy.mcm.ibm.com/v1alpha1
   kind: Policy
   metadata:
     name: policy-rolebinding
     namespace: mcm
   spec:
     complianceType: musthave
     remediationAction: inform
     namespaces:
       exclude: ["kube-*"]
       include: ["default"]
     object-templates:
       - complianceType: musthave
         objectDefinition:
           kind: RoleBinding # role binding must exist
           apiVersion: rbac.authorization.k8s.io/v1
           metadata:
             name: operate-pods-rolebinding
           subjects:
           - kind: User
             name: admin # Name is case sensitive
             apiGroup: rbac.authorization.k8s.io
           roleRef:
             kind: Role #this must be Role or ClusterRole
             name: operator # this must match the name of the Role or ClusterRole you wish to bind to
             apiGroup: rbac.authorization.k8s.io
       ...</code></pre>
</div>
</div>
<div class="sect6">
<h7 id="apply-a-rolebinding-policy">Apply a rolebinding policy</h7>
<div class="paragraph">
<p>Complete the following steps to apply the role binding policy from the console:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Log in to your Red Hat Advanced Cluster Management for Kubernetes console</p>
</li>
<li>
<p>From the navigation menu, click <strong>Govern risk</strong>.</p>
</li>
<li>
<p>Click <strong>Create policy</strong>.</p>
</li>
<li>
<p>Select <strong>Rolebinding</strong> from the <em>Specifications</em> field.</p>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="security-context-constraints-scc-policy">Security context constraints (SCC) policy</h5>
<div class="paragraph">
<p>Apply a Security context constraints (SCC) policy to control permissions for pods by defining conditions in the policy.
For more information see, <a href="https://docs.openshift.com/container-platform/4.3/authentication/managing-security-context-constraints.html#security-context-constraints-about_configuring-internal-oauth">Managing Security Context Constraints (SCC)</a>.</p>
</div>
<div class="sect5">
<h6 id="scc-policy-yaml-structure">SCC policy YAML structure</h6>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">apiVersion: policy.mcm.ibm.com/v1alpha1
kind: Policy
metadata:
  name: policy-scc
  namespace: open-cluster-management-policies
  annotations:
    policy.mcm.ibm.com/standards:
    policy.mcm.ibm.com/categories:
    policy.mcm.ibm.com/controls:
spec:
  complianceType:
  remediationAction:
  disabled:
  namespaces:
    exclude:
    include:
  object-templates:
    - complianceType:
      objectDefinition:
        apiVersion:
        kind: SecurityContextConstraints # restricted scc
        metadata:
          annotations:
            kubernetes.io/description:
          name: sample-restricted-scc
        allowHostDirVolumePlugin:
        allowHostIPC:
        allowHostNetwork:
        allowHostPID:
        allowHostPorts:
        allowPrivilegeEscalation:
        allowPrivilegedContainer:
        allowedCapabilities:
        defaultAddCapabilities:
        fsGroup:
         type:
        groups:
        - system:
        priority:
        readOnlyRootFilesystem:
        requiredDropCapabilities:
        runAsUser:
          type:
        seLinuxContext:
          type:
        supplementalGroups:
          type:
        users:
        volumes:
   ---
   apiVersion:
   kind: PlacementBinding
   metadata:
     name: binding-policy-scc
     namespace:
   placementRef:
     name: placement-policy-scc
     kind: PlacementRule
     apiGroup:
   subjects:
   - name:
     kind:
     apiGroup:
   ---
   apiVersion: mcm.ibm.com/v1alpha1
   kind: PlacementBinding
   metadata:
     name: policy-scc-production-clusters
     namespace: open-cluster-management-policies
   placementRef:
     name: production-clusters
     kind: PlacementRule
     apiGroup: apps.open-cluster-management.io
   subjects:
   - name: policy-scc
     kind: Policy
     apiGroup: policy.mcm.ibm.com
   ---
   apiVersion:
   kind: PlacementRule
   metadata:
     name: placement-policy-scc
     namespace:
   spec:
     clusterConditions:
     - type:
     clusterSelector:
       matchExpressions:</code></pre>
</div>
</div>
</div>
<div class="sect5">
<h6 id="scc-policy-table">SCC policy table</h6>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Field</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">apiVersion</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Required.
Set the value to <code>policy.mcm.ibm.com/v1alpha1</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">kind</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Required.
Set the value to <code>Policy</code> to indicate the type of policy.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">metadata.name</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Required.
The name for identifying the policy resource.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">metadata.namespaces</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">spec.namespace</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Required.
The namespaces within the hub cluster that the policy is applied to.
Enter parameter values for <code>include</code>, which are the namespaces you want to apply to the policy to.
<code>exclude</code> specifies the namespaces you explicitly do not want to apply the policy to.
<strong>Note</strong>: A namespace that is specified in the object template of a policy controller, overrides the namespace in the corresponding parent policy.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">remediationAction</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional.
Specifies the remediation of your policy.
The parameter values are <code>enforce</code> and <code>inform</code>.
<strong>Important</strong>: Some policies may not support the enforce feature.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">disabled</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Required.
Set the value to <code>true</code> or <code>false</code>.
The <code>disabled</code> parameter provides the ability to enable and disable your policies.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">spec.complianceType</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Required.
Set the value to <code>"musthave"</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">spec.object-template</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Optional.
Used to list any other Kubernetes object that must be evaluated or applied to the managed clusters.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect5">
<h6 id="scc-policy-sample">SCC policy sample</h6>
<div class="paragraph">
<p>Apply a Security context constraints (SCC) policy to control permissions for pods by defining conditions in the policy.
For more information see, <a href="https://docs.openshift.com/container-platform/4.3/authentication/managing-security-context-constraints.html#security-context-constraints-about_configuring-internal-oauth">Managing Security Context Constraints (SCC)</a>.
Your SCC policy might resemble the following YAML file:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">   apiVersion: policy.mcm.ibm.com/v1alpha1
   kind: Policy
   metadata:
     name: policy-scc
     namespace: open-cluster-management-policies
     annotations:
       policy.mcm.ibm.com/standards: NIST-CSF
       policy.mcm.ibm.com/categories: PR.PT Protective Technology
       policy.mcm.ibm.com/controls: PR.PT-3 Least Functionality
   spec:
     complianceType: musthave
     remediationAction: inform
     disabled: false
     namespaces:
       exclude: ["kube-*"]
       include: ["default"]
     object-templates:
       - complianceType: musthave
         objectDefinition:
           apiVersion: security.openshift.io/v1
           kind: SecurityContextConstraints # restricted scc
           metadata:
             annotations:
               kubernetes.io/description: restricted denies access to all host features and requires pods to be run with a UID, and SELinux context that are allocated to the namespace.  This is the most restrictive SCC and it is used by default for authenticated users.
             name: sample-restricted-scc
           allowHostDirVolumePlugin: false
           allowHostIPC: false
           allowHostNetwork: false
           allowHostPID: false
           allowHostPorts: false
           allowPrivilegeEscalation: true
           allowPrivilegedContainer: false
           allowedCapabilities: []
           defaultAddCapabilities: []
           fsGroup:
             type: MustRunAs
           groups:
           - system:authenticated
           priority: null
           readOnlyRootFilesystem: false
           requiredDropCapabilities:
           - KILL
           - MKNOD
           - SETUID
           - SETGID
           runAsUser:
             type: MustRunAsRange
           seLinuxContext:
             type: MustRunAs
           supplementalGroups:
             type: RunAsAny
           users: []
           volumes:
           - configMap
           - downwardAPI
           - emptyDir
           - persistentVolumeClaim
           - projected
           - secret
   ---
   apiVersion: mcm.ibm.com/v1alpha1
   kind: PlacementBinding
   metadata:
     name: binding-policy-scc
     namespace: open-cluster-management-policies
   placementRef:
     name: placement-policy-scc
     kind: PlacementRule
     apiGroup: apps.open-cluster-management.io
   subjects:
   - name: policy-scc
     kind: Policy
     apiGroup: policy.mcm.ibm.com
   ---
   apiVersion: mcm.ibm.com/v1alpha1
   kind: PlacementBinding
   metadata:
     name: policy-scc-production-clusters
     namespace: open-cluster-management-policies
   placementRef:
     name: production-clusters
     kind: PlacementRule
     apiGroup: apps.open-cluster-management.io
   subjects:
   - name: policy-scc
     kind: Policy
     apiGroup: policy.mcm.ibm.com
   ---
   apiVersion: apps.open-cluster-management.io/v1
   kind: PlacementRule
   metadata:
     name: placement-policy-scc
     namespace: open-cluster-management-policies
   spec:
     clusterConditions:
     - type: OK
     clusterSelector:
       matchExpressions: []</code></pre>
</div>
</div>
<div class="sect6">
<h7 id="appliying-the-scc-policy">Appliying the SCC policy</h7>
<div class="paragraph">
<p>Complete the following steps to apply the SCC policy from the console:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Log in to your Red Hat Advanced Cluster Management for Kubernetes console.</p>
</li>
<li>
<p>From the navigation menu, click <strong>Govern risk</strong>.</p>
</li>
<li>
<p>Click <strong>Create policy</strong>.</p>
</li>
<li>
<p>Select <strong>SecurityContextConstraintPolicy</strong> from the <em>Specifications</em> field.</p>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="cis-rules-specifications">CIS rules specifications</h5>
<div class="paragraph">
<p>Refer to the Red Hat OpenShift Hardening rules
. Refer to the Center for Internet Security (CIS) rules when you create CIS policies for non-OpenShift Container Platform environments.
When creating rules for OpenShift Container Platform environments, refer to the Red Hat OpenShift Hardening rules.</p>
</div>
<div class="sect5">
<h6 id="cis-rules-for-openshift-container-platform">CIS rules for OpenShift Container Platform</h6>
<div class="sect6">
<h7 id="master-node-rules-for-openshift-container-platform">Master node rules for OpenShift Container Platform</h7>
<div class="listingblock">
<div class="content">
<pre>1.1 Maintain default behavior for anonymous access
1.2 Verify that the basic-auth-file method is not enabled
1.3 Insecure Tokens
1.4 Secure communications between the API server and master nodes
1.5 Prevent insecure bindings
1.6 Prevent insecure port access
1.7 Use Secure Ports for API Server Traffic
1.8 Do not expose API server profiling data
1.9 Verify repair-malformed-updates argument for API compatibility
1.10 Verify that the AlwaysAdmit admission controller is disabled
1.11 Manage the AlwaysPullImages admission controller
1.12 Use Security Context Constraints instead of DenyEscalatingExec admission
1.13 Use Security Context Constraints instead of the SecurityContextDeny admission controller
1.14 Manage the NamespaceLifecycle admission controller
1.15 Configure API server auditing - audit log file path
1.16 Configure API server auditing - audit log retention
1.17 Configure API server auditing - audit log backup retention
1.18 Configure audit log file size
1.19 Verify that authorization-mode is not set to AlwaysAllow
1.20 Verify that the token-auth-file flag is not set
1.21 Verify the API server certificate authority
1.22 Verify the API server client certificate and client key
1.23 Verify that the service account lookup flag is not set
1.24 Verify the PodSecurityPolicy is disabled to ensure use of SecurityContextConstraints
1.25 Verify that the service account key file argument is not set
1.26 Verify the certificate and key used for communication with etcd
1.27 Verify that the ServiceAccount admission controller is enabled
1.28 Verify the certificate and key used to encrypt API server traffic
1.29 Verify that the --client-ca-file argument is not set
1.30 Verify the CA used for communication with etcd
1.31 Verify that the authorization-mode argument is not set
1.32 Verify that the NodeRestriction admission controller is enabled
1.33 Configure encryption of data at rest in etcd datastore
1.34 Set the encryption provider to aescbc for etcd data at rest
1.35 Enable the EventRateLimit plugin
1.36 Configure advanced auditing
1.37 Adjust the request timeout argument for your cluster resources
2.1 Verify that Scheduler profiling is not exposed to the web
3.1 Adjust the terminated-pod-gc-threshold argument as needed
3.2 Verify that Controller profiling is not exposed to the web
3.3 Verify that the --use-service-account-credentials argument is set to true
3.4 Verify that the --service-account-private-key-file argument is set as appropriate
3.5 Verify that the --root-ca-file argument is set as appropriate
3.6 Verify that Security Context Constraints are applied to Your Pods and Containers
3.7 Manage certificate rotation
4.1 Verify the OpenShift default permissions for the API server pod specification file
4.2 Verify the OpenShift default file ownership for the API server pod specification file
4.3 Verify the OpenShift default file permissions for the controller manager pod specification file
4.4 Verify the OpenShift default ownership for the controller manager pod specification file
4.5 Verify the OpenShift default permissions for the scheduler pod specification file
4.6 Verify the scheduler pod specification file ownership set by OpenShift
4.7 Verify the OpenShift default etcd pod specification file permissions
4.8 Verify the OpenShift default etcd pod specification file ownership
4.9 Verify the default OpenShift Container Network Interface file permissions
4.10 Verify the default OpenShift Container Network Interface file ownership
4.11 Verify the default OpenShift etcd data directory permissions
4.12 Verify the default OpenShift etcd data directory ownership
4.13 Verify the default OpenShift admin.conf file permissions
4.14 Verify the default OpenShift admin.conf file ownership
4.15 Verify the default OpenShift scheduler.conf file permissions
4.16 Verify the default OpenShift scheduler.conf file ownership
4.17 Verify the default Openshift controller-manager.conf file permissions
4.18 Ensure that the controller-manager.conf file ownership is set to root:root (Scored)
5.1 Verify the default OpenShift cert-file and key-file configuration
5.2 Verify the default OpenShift setting for the client-cert-auth argument
5.3 Verify the OpenShift default values for etcd_auto_tls
5.4 Verify the OpenShift default peer-cert-file and peer-key-file arguments for etcd
5.5 Verify the OpenShift default configuration for the peer-client-cert-auth
5.6 Verify the OpenShift default configuration for the peer-auto-tls argument
5.7 Optionally modify the wal-dir argument
5.8 Optionally modify the max-wals argument
5.9 Verify the OpenShift default configuration for the etcd Certificate Authority
6.1 Ensure that the cluster-admin role is only used where required
6.2 Verify Security Context Constraints as in use
6.3 Use OpenShift projects to maintain boundaries between resources
6.4 Create network segmentation using the Multi-tenant plugin or Network Policies
6.5 Enable seccomp and configure custom Security Context Constraints
6.6 Review Security Context Constraints
6.7 Manage Image Provenance using ImagePolicyWebhook admission controller
6.8 Configure Network policies as appropriate
6.9 Use Security Context Constraints as compensating controls for privileged containers</pre>
</div>
</div>
</div>
<div class="sect6">
<h7 id="worker-node-rules-for-openshift-container-platform">Worker node rules for OpenShift Container Platform</h7>
<div class="listingblock">
<div class="content">
<pre>7.1 Use Security Context Constraints to manage privileged containers as needed
7.2 Ensure anonymous-auth is not disabled
7.3 Verify that the --authorization-mode argument is set to WebHook
7.4 Verify the OpenShift default for the client-ca-file argument
7.5 Verify the OpenShift default setting for the read-only-port argument
7.6 Adjust the streaming-connection-idle-timeout argument
7.7 Verify the OpenShift defaults for the protect-kernel-defaults argument
7.8 Verify the OpenShift default value of true for the make-iptables-util-chains argument
7.9 Verify that the --keep-terminated-pod-volumes argument is set to false
7.10 Verify the OpenShift defaults for the hostname-override argument
7.11 Set the --event-qps argument to 0
7.12 Verify the OpenShift cert-dir flag for HTTPS traffic
7.13 Verify the OpenShift default of 0 for the cadvisor-port argument
7.14 Verify that the RotateKubeletClientCertificate argument is set to true
7.15 Verify that the RotateKubeletServerCertificate argument is set to true
8.1 Verify the OpenShift default permissions for the kubelet.conf file
8.2 Verify the kubeconfig file ownership of root:root
8.3 Verify the kubelet service file permissions of 644
8.4 Verify the kubelet service file ownership of root:root
8.5 Verify the OpenShift default permissions for the proxy kubeconfig file
8.6 Verify the proxy kubeconfig file ownership of root:root
8.7 Verify the OpenShift default permissions for the certificate authorities file.
8.8 Verify the client certificate authorities file ownership of root:root</pre>
</div>
</div>
</div>
</div>
<div class="sect5">
<h6 id="cis-rules-for-non-openshift-container-platform">CIS rules for non-OpenShift Container Platform</h6>
<div class="sect6">
<h7 id="master-node-rules-for-non-openshift-container-platform">Master node rules for non-OpenShift Container Platform</h7>
<div class="listingblock">
<div class="content">
<pre>1.1.1 Ensure that the --anonymous-auth argument is set to false
1.1.2 Ensure that the --basic-auth-file argument is not set
1.1.3 Ensure that the --insecure-allow-any-token argument is not set
1.1.4 Ensure that the --kubelet-https argument is set to true
1.1.5 Ensure that the --insecure-bind-address argument is not set
1.1.6 Ensure that the --insecure-port argument is set to 0
1.1.7 Ensure that the --secure-port argument is not set to 0
1.1.8 Ensure that the --profiling argument is set to false
1.1.9 Ensure that the --repair-malformed-updates argument is set to false
1.1.10 Ensure that the admission control plugin AlwaysAdmit is not set
1.1.11 Ensure that the admission control plugin AlwaysPullImages is set
1.1.12 Ensure that the admission control plugin DenyEscalatingExec is set
1.1.13 Ensure that the admission control plugin SecurityContextDeny is set
1.1.14 Ensure that the admission control plugin NamespaceLifecycle is set
1.1.15 Ensure that the --audit-log-path argument is set as appropriate
1.1.16 Ensure that the --audit-log-maxage argument is set to 30 or as appropriate
1.1.17 Ensure that the --audit-log-maxbackup argument is set to 10 or as appropriate
1.1.18 Ensure that the --audit-log-maxsize argument is set to 100 or as appropriate
1.1.19 Ensure that the --authorization-mode argument is not set to AlwaysAllow
1.1.20 Ensure that the --token-auth-file parameter is not set
1.1.21 Ensure that the --kubelet-certificate-authority argument is set as appropriate
1.1.22 Ensure that the --kubelet-client-certificate and --kubelet-client-key arguments are set as appropriate
1.1.23 Ensure that the --service-account-lookup argument is set to true
1.1.24 Ensure that the admission control plugin PodSecurityPolicy is set
1.1.25 Ensure that the --service-account-key-file argument is set as appropriate
1.1.26 Ensure that the --etcd-certfile and --etcd-keyfile arguments are set as appropriate
1.1.27 Ensure that the admission control plugin ServiceAccount is set(Scored)
1.1.28 Ensure that the --tls-cert-file and --tls-private-key-file arguments are set as appropriate
1.1.29 Ensure that the --client-ca-file argument is set as appropriate
1.1.30 Ensure that the API Server only makes use of Strong Cryptographic Ciphers
1.1.31 Ensure that the --etcd-cafile argument is set as appropriate
1.1.32 Ensure that the --authorization-mode argument is set to Node
1.1.33 Ensure that the admission control plugin NodeRestriction is set
1.1.34 Ensure that the --experimental-encryption-provider-config argument is set as appropriate
1.1.35 Ensure that the encryption provider is set to aescbc
1.1.36 Ensure that the admission control plugin EventRateLimit is set
1.1.37 Ensure that the AdvancedAuditing argument is not set to false
1.1.38 Ensure that the --request-timeout argument is set as appropriate
1.1.39 Ensure that the --authorization-mode argument includes RBAC
1.2.1 Ensure that the --profiling argument is set to false
1.2.2 Ensure that the --address argument is set to 127.0.0.1
1.3.1 Ensure that the --terminated-pod-gc-threshold argument is set as appropriate
1.3.2 Ensure that the --profiling argument is set to false
1.3.3 Ensure that the --use-service-account-credentials argument is set to true
1.3.4 Ensure that the --service-account-private-key-file argument is set as appropriate
1.3.5 Ensure that the --root-ca-file argument is set as appropriate
1.3.6 Ensure that the RotateKubeletServerCertificate argument is set to true
1.3.7 Ensure that the --address argument is set to 127.0.0.1
1.4.1 Ensure that the API server pod specification file permissions are set to 644 or more restrictive
1.4.2 Ensure that the API server pod specification file ownership is set to root:root
1.4.3 Ensure that the controller manager pod specification file permissions are set to 644 or more restrictive
1.4.4 Ensure that the controller manager pod specification file ownership is set to root:root
1.4.5 Ensure that the scheduler pod specification file permissions are set to 644 or more restrictive
1.4.6 Ensure that the scheduler pod specification file ownership is set to root:root
1.4.7 Ensure that the etcd pod specification file permissions are set to 644 or more restrictive
1.4.8 Ensure that the etcd pod specification file ownership is set to root:root
1.4.9 Ensure that the Container Network Interface file permissions are set to 644 or more restrictive
1.4.10 Ensure that the Container Network Interface file ownership is set to root:root
1.4.11 Ensure that the etcd data directory permissions are set to 700 or more restrictive
1.4.12 Ensure that the etcd data directory ownership is set to etcd:etcd
1.4.13 Ensure that the admin.conf file permissions are set to 644 or more restrictive
1.4.14 Ensure that the admin.conf file ownership is set to root:root
1.4.15 Ensure that the scheduler.conf file permissions are set to 644 or more restrictive
1.4.16 Ensure that the scheduler.conf file ownership is set to root:root
1.4.17 Ensure that the controller-manager.conf file permissions are set to 644 or more restrictive
1.4.18 Ensure that the controller-manager.conf file ownership is set to root:root
1.4.19 Ensure that the Kubernetes PKI directory and file ownership is set to root:root
1.4.20 Ensure that the Kubernetes PKI certificate file permissions are set to 644 or more restrictive
1.4.21 Ensure that the Kubernetes PKI certificate file permissions are set to 600 or more restrictive
1.5.1 Ensure that the --cert-file and --key-file arguments are set as appropriate
1.5.2 Ensure that the --client-cert-auth argument is set to true
1.5.3 Ensure that the --auto-tls argument is not set to true
1.5.4 Ensure that the --peer-cert-file and --peer-key-file arguments are set as appropriate
1.5.5 Ensure that the --peer-client-cert-auth argument is set to true
1.5.6 Ensure that the --peer-auto-tls argument is not set to true
1.5.7 Ensure that a unique Certificate Authority is used for etcd
1.6.1 Ensure that the cluster-admin role is only used where required
1.6.2 Create administrative boundaries between resources using namespaces
1.6.3 Create network segmentation using Network Policies
1.6.4 Ensure that the seccomp profile is set to docker/default in your pod definitions
1.6.5 Apply Security Context to Your Pods and Containers
1.6.6 Configure Image Provenance using ImagePolicyWebhook admission controller
1.6.7 Configure Network policies as appropriate
1.6.8 Place compensating controls in the form of PSP and RBAC for privileged containers usage
1.7.1 Do not admit privileged containers
1.7.2 Do not admit containers wishing to share the host process ID namespace
1.7.3 Do not admit containers wishing to share the host IPC namespace
1.7.4 Do not admit containers wishing to share the host network namespace
1.7.5 Do not admit containers with allowPrivilegeEscalation
1.7.6 Do not admit root containers
1.7.7 Do not admit containers with dangerous capabilities</pre>
</div>
</div>
</div>
<div class="sect6">
<h7 id="worker-node-rules-for-non-openshift-container-platform">Worker node rules for non-OpenShift Container Platform</h7>
<div class="listingblock">
<div class="content">
<pre>2.1.1 Ensure that the --anonymous-auth argument is set to false
2.1.2 Ensure that the --authorization-mode argument is not set to AlwaysAllow
2.1.3 Ensure that the --client-ca-file argument is set as appropriate
2.1.4 Ensure that the --read-only-port argument is set to 0
2.1.5 Ensure that the --streaming-connection-idle-timeout argument is not set to 0
2.1.6 Ensure that the --protect-kernel-defaults argument is set to true
2.1.7 Ensure that the --make-iptables-util-chains argument is set to true
2.1.8 Ensure that the --hostname-override argument is not set
2.1.9 Ensure that the --event-qps argument is set to 0
2.1.10 Ensure that the --tls-cert-file and --tls-private-key-file arguments are set as appropriate
2.1.11 Ensure that the --cadvisor-port argument is set to 0
2.1.12 Ensure that the --rotate-certificates argument is not set to false
2.1.13 Ensure that the RotateKubeletServerCertificate argument is set to true
2.1.14 Ensure that the Kubelet only makes use of Strong Cryptographic Ciphers
2.2.1 Ensure that the kubelet.conf file permissions are set to 644 or more restrictive
2.2.2 Ensure that the kubelet.conf file ownership is set to root:root
2.2.3 Ensure that the kubelet service file permissions are set to 644 or more restrictive
2.2.4 Ensure that the kubelet service file ownership is set to root:root
2.2.5 Ensure that the proxy kubeconfig file permissions are set to 644 or more restrictive
2.2.6 Ensure that the proxy kubeconfig file ownership is set to root:root
2.2.7 Ensure that the certificate authorities file permissions are set to 644 or more restrictive
2.2.8 Ensure that the client certificate authorities file ownership is set to root:root
2.2.9 Ensure that the kubelet configuration file ownership is set to root:root
2.2.10 Ensure that the kubelet configuration file has permissions set to 644 or more restrictive</pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="manage-security-policies">Manage security policies</h4>
<div class="paragraph">
<p>Review the following topics to learn more about creating and updating your security policies.
You can create the YAML files for your policies from the CLI and console:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="#managing-a-configuration-policy">Managing a configuration policy</a></p>
</li>
<li>
<p><a href="#managing-an-image-vulnerability-policy">Managing an image vulnerability policy</a></p>
</li>
<li>
<p><a href="#managing-a-memory-usage-policy">Managing a memory usage policy</a></p>
</li>
<li>
<p><a href="#managing-a-namespace-policy">Managing a namespace policy</a></p>
</li>
<li>
<p><a href="#managing-a-pod-nginx-policy">Managing a pod nginx policy</a></p>
</li>
<li>
<p><a href="#managing-a-pod-security-policy">Managing a pod security policy</a></p>
</li>
<li>
<p><a href="#managing-a-role-policy">Managing a role policy</a></p>
</li>
<li>
<p><a href="#managing-a-certificate-policy">Managing a certificate policy</a></p>
</li>
<li>
<p><a href="#managing-a-cis-policy">Managing a CIS policy</a></p>
</li>
<li>
<p><a href="#managing-a-iam-policy">Managing a IAM policy</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Refer to <a href="#governance-and-risk">Governance and risk</a> for more topics.</p>
</div>
<div class="sect4">
<h5 id="managing-a-security-policy">Managing a security policy</h5>
<div class="paragraph">
<p>Create a security policy to report and validate your cluster compliance based on your specified security standards, categories, and controls.
To create a policy for Red Hat Advanced Cluster Management for Kubernetes, you must create a YAML file on your managed clusters.</p>
</div>
<div class="sect5">
<h6 id="creating-a-security-policy">Creating a security policy</h6>
<div class="paragraph">
<p>You can create a security policy from the command line interface (CLI) or from the console.
Cluster administrator access is required.</p>
</div>
<div class="paragraph">
<p>The following objects are required for your Red Hat Advanced Cluster Management for Kubernetes policy:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><em>PlacementRule</em>: Defines a <em>cluster selector</em> where the policy must be deployed.</p>
</li>
<li>
<p><em>PlacementBinding</em>: Binds the placement to a PlacementPolicy.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>View more descriptions of the policy YAML files in the <a href="#policy-example">Policy example</a>.</p>
</div>
<div class="sect6">
<h7 id="creating-a-security-policy-from-the-command-line-interface">Creating a security policy from the command line interface</h7>
<div class="paragraph">
<p>Complete the following steps to create a policy from the command line interface (CLI):</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create a policy by running the following command:</p>
<div class="listingblock">
<div class="content">
<pre>kubectl create -f policy.yaml -n &lt;namespace&gt;</pre>
</div>
</div>
</li>
<li>
<p>Define the template that the policy uses.
Edit your <code>.yaml</code> file by adding a <code>templates</code> field to define a template.
Your policy might resemble the following YAML file:</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">apiVersion: policy.mcm.ibm.com/v1alpha1
kind: Policy
metadata:
  name: policy1
spec:
  remediationAction: "enforce" # or inform
  disabled: false # or true
  namespaces:
    include: ["default"]
    exclude: ["kube*"]
  role-templates:
    - apiVersion: roletemplate.mcm.ibm.com/v1alpha1
      kind: RoleTemplate
      metadata:
        namespace: kube-system # will be inferred
        name: operator
      selector:
        matchLabels:
          dev: "true"
      complianceType: "musthave" # at this level, it means the role must exist and must have the following rules
      rules:
        - complianceType: "musthave" # at this level, it means if the role exists the rule is a musthave
          policyRule:
            apiGroups: ["extensions", "apps"]
            resources: ["deployments"]
            verbs: ["get", "list", "watch", "create", "delete","patch"]</code></pre>
</div>
</div>
</li>
<li>
<p>Define a <code>PlacementRule</code>.
Be sure to change the <code>PlacementRule</code> to specify the clusters where the policies need to be applied, either by <code>clusterNames</code>, or <code>clusterLabels</code>.
View the <a href="../manage_applications">PlacementRule definition YAML structure</a>.
Your <code>PlacementRule</code> might resemble the following content:</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">apiVersion: apps.open-cluster-management.io/v1
kind: PlacementRule
metadata:
  name: placement1
spec:
  clusterConditions:
  - type: OK
  clusterNames:
  - "cluster1"
  - "cluster2"
  clusterLabels:
    matchLabels:
      cloud: IBM</code></pre>
</div>
</div>
</li>
<li>
<p>Define a <code>PlacementBinding</code> to bind your policy and your <code>PlacementRule</code>.
Your <code>PlacementBinding</code> might resemble the following YAML sample:</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">apiVersion: mcm.ibm.com/v1alpha1
kind: PlacementBinding
metadata:
  name: binding1
placementRef:
  name: placement1
  apiGroup: apps.open-cluster-management.io
  kind: PlacementRule
subjects:
- name: policy1
  apiGroup: policy.mcm.ibm.com
  kind: Policy</code></pre>
</div>
</div>
</li>
</ol>
</div>
<div class="sect7">
<h8 id="viewing-your-security-policy-from-the-cli">Viewing your security policy from the CLI</h8>
<div class="paragraph">
<p>Complete the following steps to view your security policy from the CLI:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>View details for a specific security policy by running the following command:</p>
<div class="listingblock">
<div class="content">
<pre>kubectl get securityepolicy &lt;policy-name&gt; -n &lt;namespace&gt; -o yaml</pre>
</div>
</div>
</li>
<li>
<p>View a description of your security policy by running the following command:</p>
<div class="listingblock">
<div class="content">
<pre>kubectl describe securitypolicy &lt;name&gt; -n &lt;namespace&gt;</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect6">
<h7 id="creating-a-cluster-security-policy-from-the-console">Creating a cluster security policy from the console</h7>
<div class="paragraph">
<p>As you create your new policy from the console, a YAML file is also created in the YAML editor.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>From the navigation menu, click <strong>Govern risk</strong>.</p>
</li>
<li>
<p>To create a policy, click <strong>Create policy</strong>.</p>
</li>
<li>
<p>From the <em>Create policy</em> page, enter the appropriate values for the following policy fields:</p>
<div class="ulist">
<ul>
<li>
<p>Name</p>
</li>
<li>
<p>Specifications</p>
</li>
<li>
<p>Cluster selector</p>
</li>
<li>
<p>Enforce (rememdiation action)</p>
</li>
<li>
<p>Standards</p>
</li>
<li>
<p>Categories</p>
</li>
<li>
<p>Controls</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
You can copy and paste an existing policy in to the <em>Policy YAML</em>.
The values for the parameter fields are automatically entered when you paste your existing policy.
You can search the contents in your policy YAML file with the search feature.
</td>
</tr>
</table>
</div>
</li>
<li>
<p>View the example Red Hat Advanced Cluster Management for Kubernetes security policy definition.
Copy and paste the YAML file for your policy.</p>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">
You must define a PlacementPolicy and PlacementBinding to apply your policy to a specific cluster.
Enter a value for the Cluster select field to define a PlacementPolicy and PlacementBinding.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Your YAML file might resemble the following policy:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml"> apiVersion: policy.mcm.ibm.com/v1alpha1
 kind: Policy
 metadata:
   name: policy-pod
   annotations:
     policy.mcm.ibm.com/categories: 'SystemAndCommunicationsProtections,SystemAndInformationIntegrity'
     policy.mcm.ibm.com/controls: 'control example'
     policy.mcm.ibm.com/standards: 'NIST,HIPAA'
 spec:
   complianceType: musthave
   namespaces:
     exclude: ["kube*"]
     include: ["default"]
   object-templates:
   - complianceType: musthave
     objectDefinition:
       apiVersion: v1
       kind: Pod
       metadata:
         name: nginx1
       spec:
         containers:
         - name: nginx
           image: 'nginx:1.7.9'
           ports:
           - containerPort: 80
   remediationAction: enforce
   disabled: false

 ---
 apiVersion: mcm.ibm.com/v1alpha1
 kind: PlacementBinding
 metadata:
   name: binding-pod
 placementRef:
   name: placement-pod
   kind: PlacementRule
   apiGroup: apps.open-cluster-management.io
 subjects:
 - name: policy-pod
   kind: Policy
   apiGroup: policy.mcm.ibm.com

 ---
 apiVersion: apps.open-cluster-management.io/v1
 kind: PlacementRule
 metadata:
   name: placement-pod
 spec:
   clusterConditions:
   - type: OK
   clusterLabels:
     matchLabels:
       cloud: "IBM"</code></pre>
</div>
</div>
</li>
</ol>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">
Be sure to add values for the <code>policy.mcm.ibm.com/controls</code> and <code>policy.mcm.ibm.com/standards</code> to display modal cards of what controls and standards are violated in the <em>Policy Overview</em> section.
</td>
</tr>
</table>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Click <strong>Create Policy</strong>.</p>
<div class="paragraph">
<p>Your policy is enabled by default.
You can disable your policy by selecting the <code>Disabled</code> check box.</p>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>A security policy is created from the console.</p>
</div>
<div class="sect7">
<h8 id="viewing-your-security-policy-from-the-console">Viewing your security policy from the console</h8>
<div class="paragraph">
<p>You can view any security policy and its status from the console.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Log in to your cluster from the console.</p>
</li>
<li>
<p>From the navigation menu, click <strong>Governance and risk</strong> to view a table list of your policies.</p>
</li>
</ol>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
You can filter the table list of your policies by selecting the <em>All policies</em> tab or <em>Cluster violations</em> tab.
</td>
</tr>
</table>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Select one of your policies to view more details.</p>
</li>
<li>
<p>View the policy violations by selecting the <em>Violations</em> tab.</p>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect5">
<h6 id="updating-security-policies">Updating security policies</h6>
<div class="sect6">
<h7 id="deleting-a-security-policy">Deleting a security policy</h7>
<div class="paragraph">
<p>Delete a security policy from the CLI or the console.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Delete a security policy from the CLI:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Delete a security policy by running the following command:</p>
<div class="listingblock">
<div class="content">
<pre> kubectl delete policy &lt;securitypolicy-name&gt; -n &lt;mcm namespace&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>After your policy is deleted, it is removed from your target cluster or clusters.</p>
</div>
</li>
<li>
<p>Verify that your policy is removed by running the following command:</p>
<div class="listingblock">
<div class="content">
<pre> kubectl get policy &lt;securitypolicy-name&gt; -n &lt;mcm namespace&gt;</pre>
</div>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>Delete a security policy from the console:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>From the navigation menu, click <strong>Govern risk</strong> to view a table list of your policies.</p>
</li>
<li>
<p>Click the <strong>Options</strong> icon for the policy you want to delete in the policy violation table.</p>
</li>
<li>
<p>Click <strong>Remove</strong>.</p>
</li>
<li>
<p>From the <em>Remove policy</em> dialog box, click <strong>Remove policy</strong></p>
</li>
</ol>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>To manage other policies, see <a href="#manage-security-policies">Manage security policies</a> for more information.
Refer to <a href="#governance-and-risk">Governance and risk</a> for more topics about policies.</p>
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="managing-a-configuration-policy">Managing a configuration policy</h5>
<div class="paragraph">
<p>Learn to create, apply, view, and update your configuration policies.</p>
</div>
<div class="sect5">
<h6 id="creating-a-configuration-policy">Creating a configuration policy</h6>
<div class="paragraph">
<p>You can create a YAML file for your configuration policy from the command line interface (CLI) or from the console.
View the following sections to create a configuration policy:</p>
</div>
<div class="sect6">
<h7 id="creating-a-configuration-policy-from-the-cli">Creating a configuration policy from the CLI</h7>
<div class="paragraph">
<p>Complete the following steps to create a configuration policy from the (CLI):</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create a YAML file for your configuration policy.
Run the following command:</p>
<div class="listingblock">
<div class="content">
<pre>kubectl create -f configpolicy-1.yaml</pre>
</div>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>Your configuration policy might resemble the following policy:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">   apiVersion: policy.mcm.ibm.com/v1alpha1
   kind: Policy
   metadata:
     name: policy-1
     namespace: kube-system
   spec:
     namespaces:
       include: ["default", "kube-*"]
       exclude: ["kube-system"]
     remediationAction: inform
     disabled: false
     complianceType: musthave
     object-templates:
      ...</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Apply the policy by running the following command:</p>
<div class="listingblock">
<div class="content">
<pre>kubectl apply -f &lt;policy-file-name&gt;  --namespace=&lt;namespace&gt;</pre>
</div>
</div>
</li>
<li>
<p>Verify and list the policies by running the following command:</p>
<div class="listingblock">
<div class="content">
<pre>kubectl get policy --namespace=&lt;namespace&gt;</pre>
</div>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>Your configuration policy is created.</p>
</div>
<div class="sect7">
<h8 id="viewing-your-configuration-policy-from-the-cli">Viewing your configuration policy from the CLI</h8>
<div class="paragraph">
<p>Complete the following steps to view your configuration policy from the CLI:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>View details for a specific configuration policy by running the following command:</p>
<div class="listingblock">
<div class="content">
<pre>kubectl get policy &lt;policy-name&gt; -n &lt;namespace&gt; -o yaml</pre>
</div>
</div>
</li>
<li>
<p>View a description of your configuration policy by running the following command:</p>
<div class="listingblock">
<div class="content">
<pre>kubectl describe policy &lt;name&gt; -n &lt;namespace&gt;</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect6">
<h7 id="creating-a-configuration-policy-from-the-console">Creating a configuration policy from the console</h7>
<div class="paragraph">
<p>As you create a configuration policy from the console, a YAML file is also created in the YAML editor.
Complete the following steps to create a configuration policy from the console:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Log in to your cluster from the console.</p>
</li>
<li>
<p>From the navigation menu, click <strong>Governance and risk</strong>.</p>
</li>
<li>
<p>Click <strong>Create policy</strong>.</p>
</li>
<li>
<p>Enter or select the appropriate values for the following fields:</p>
<div class="ulist">
<ul>
<li>
<p>Name</p>
</li>
<li>
<p>Namespace</p>
</li>
<li>
<p>Specifications</p>
</li>
<li>
<p>Cluster selector</p>
</li>
<li>
<p>Remediation action</p>
</li>
<li>
<p>Standards</p>
</li>
<li>
<p>Categories</p>
</li>
<li>
<p>Controls</p>
</li>
<li>
<p>Disabled</p>
</li>
</ul>
</div>
</li>
<li>
<p>Click <strong>Create</strong>.</p>
</li>
</ol>
</div>
<div class="sect7">
<h8 id="viewing-your-configuration-policy-from-the-console">Viewing your configuration policy from the console</h8>
<div class="paragraph">
<p>You can view any configuration policy and its status from the console.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Log in to your cluster from the console.</p>
</li>
<li>
<p>From the navigation menu, click <strong>Govern risk</strong> to view a table list of your policies.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
You can filter the table list of your policies by selecting the <em>All policies</em> tab or <em>Cluster violations</em> tab.
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Select one of your policies.</p>
</li>
<li>
<p>View the policy violations by selecting the <em>Violations</em> tab.</p>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect5">
<h6 id="updating-configuration-policies">Updating configuration policies</h6>
<div class="sect6">
<h7 id="disabling-configuration-policies">Disabling configuration policies</h7>
<div class="paragraph">
<p>Complete the following steps to disbale your policy:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Log in to your Red Hat Advanced Cluster Management for Kubernetes console.</p>
</li>
<li>
<p>From the navigation menu, click <strong>Govern risk</strong> to view a table list of your policies.</p>
</li>
<li>
<p>Disable your policy by clicking the <strong>Options</strong> icon &gt; <strong>Disable</strong>.
The <em>Disable Policy</em> dialog box appears.</p>
</li>
<li>
<p>Click <strong>Disable policy</strong>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Your policy is disbaled.</p>
</div>
</div>
</div>
<div class="sect5">
<h6 id="deleting-a-configuration-policy">Deleting a configuration policy</h6>
<div class="paragraph">
<p>Delete a configuration policy from the CLI or the console.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Delete a configuration policy from the CLI:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Delete a configuration policy by running the following command:</p>
<div class="listingblock">
<div class="content">
<pre>  kubectl delete policy &lt;policy-name&gt; -n &lt;mcm namespace&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>After your policy is deleted, it is removed from your target cluster or clusters.</p>
</div>
</li>
<li>
<p>Verify that your policy is removed by running the following command:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre>  kubectl get policy &lt;policy-name&gt; -n &lt;mcm namespace&gt;</pre>
</div>
</div>
</li>
<li>
<p>Delete a configuration policy from the console:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>From the navigation menu, click <strong>Govern risk</strong> to view a table list of your policies.</p>
</li>
<li>
<p>Click the <strong>Options</strong> icon for the policy you want to delete in the policy violation table.</p>
</li>
<li>
<p>Click <strong>Remove</strong>.</p>
</li>
<li>
<p>From the <em>Remove policy</em> dialog box, click <strong>Remove policy</strong>.</p>
</li>
</ol>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>Your policy is deleted.</p>
</div>
<div class="paragraph">
<p>View configuration policy samples, see <a href="#policy-samples">Policy samples</a>.
See <a href="#manage-security-policies">Manage security policies</a> to manage other policies.</p>
</div>
</div>
</div>
<div class="sect4">
<h5 id="managing-an-image-vulnerability-policy">Managing an image vulnerability policy</h5>
<div class="paragraph">
<p>Configuration policy controller monitors the status of image vulnerability policies.
Image vulnerability policies are applied to check if your containers have vulnerabilities.
Learn to create, apply, view, and update your image vulnerability policy.</p>
</div>
<div class="sect5">
<h6 id="creating-an-image-vulnerability-policy">Creating an image vulnerability policy</h6>
<div class="paragraph">
<p>You can create a YAML for your image vulnerability policy from the command line interface (CLI) or from the console.
View the following sections to create an image vulnerability policy:</p>
</div>
<div class="sect6">
<h7 id="creating-an-image-vulnerability-policy-from-the-cli">Creating an image vulnerability policy from the CLI</h7>
<div class="paragraph">
<p>Complete the following steps to create an image vulnerability policy from the CLI:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create a YAML file for your image vulnerability policy by running the following command:</p>
<div class="listingblock">
<div class="content">
<pre>kubectl create -f iamgevulnpolicy-1.yaml</pre>
</div>
</div>
</li>
<li>
<p>Apply the policy by running the following command:</p>
<div class="listingblock">
<div class="content">
<pre>kubectl apply -f &lt;imagevuln-policy-file-name&gt;  --namespace=&lt;namespace&gt;</pre>
</div>
</div>
</li>
<li>
<p>List and verify the policies by running the following command:</p>
<div class="listingblock">
<div class="content">
<pre>kubectl get imagevulnpolicy --namespace=&lt;namespace&gt;</pre>
</div>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>Your image vulnerability policy is created.</p>
</div>
<div class="sect7">
<h8 id="viewing-your-image-vulnerability-policy-from-the-cli">Viewing your image vulnerability policy from the CLI</h8>
<div class="paragraph">
<p>Complete the following steps to view your image vulnerability policy from the CLI:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>View details for a specific image vulnerability policy by running the following command:</p>
<div class="listingblock">
<div class="content">
<pre>kubectl get imagevulnpolicy &lt;policy-name&gt; -n &lt;namespace&gt; -o yaml</pre>
</div>
</div>
</li>
<li>
<p>View a description of your image vulnerability policy by running the following command:</p>
<div class="listingblock">
<div class="content">
<pre>kubectl describe imagevulnpolicy &lt;name&gt; -n &lt;namespace&gt;</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect5">
<h6 id="creating-an-image-vulnerability-policy-from-the-console">Creating an image vulnerability policy from the console</h6>
<div class="paragraph">
<p>As you create an image vulnerability policy from the console, a YAML file is also created in the YAML editor.
Complete the following steps to create the image vulnerability policy from the console:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Log in to your cluster from the console.</p>
</li>
<li>
<p>From the navigation menu, click <strong>Governance and risk</strong>.</p>
</li>
<li>
<p>Click <strong>Create policy</strong>.</p>
</li>
<li>
<p>Select <strong>ImageManifestVulnPolicy</strong> from the <em>Specifications</em> field.
Parameter values are automatically set.
You can edit your values.</p>
</li>
<li>
<p>Click <strong>Create</strong>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>An image vulnerability policy is created.</p>
</div>
</div>
<div class="sect5">
<h6 id="viewing-image-vulnerability-violations-from-the-console">Viewing image vulnerability violations from the console</h6>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>From the navigation menu, click <strong>Govern risk</strong> to view a table list of your policies.</p>
</li>
<li>
<p>Select the <strong><code>policy-imagemanifestvulnpolicy</code></strong> policy &gt; <strong><em>Violations</em> tab</strong> to view the cluster location of the violation.</p>
<div class="paragraph">
<p>Your image vulnerability violation might resemble the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>imagemanifestvulns exist and should be deleted: [sha256.7ac7819e1523911399b798309025935a9968b277d86d50e5255465d6592c0266] in namespace default; [sha256.4109631e69d1d562f014dd49d5166f1c18b4093f4f311275236b94b21c0041c0] in namespace calamari; [sha256.573e9e0a1198da4e29eb9a8d7757f7afb7ad085b0771bc6aa03ef96dedc5b743, sha256.a56d40244a544693ae18178a0be8af76602b89abe146a43613eaeac84a27494e, sha256.b25126b194016e84c04a64a0ad5094a90555d70b4761d38525e4aed21d372820] in namespace multicluster-endpoint; [sha256.64320fbf95d968fc6b9863581a92d373bc75f563a13ae1c727af37450579f61a] in namespace openshift-cluster-version</pre>
</div>
</div>
</li>
<li>
<p>Navigate to your OpenShift Container Platform console by selecting the <em>Cluster</em> link.</p>
</li>
<li>
<p>From the navigation menu on the OpenShift Container Platform console, click <strong>Administration</strong> &gt; <strong>Custom Resource Definitions</strong>.</p>
</li>
<li>
<p>Select <strong><code>imagemanifestvulns</code></strong> &gt; <strong><em>Instances</em> tab</strong> to view all of the <code>imagemanifestvulns</code> instances.</p>
</li>
<li>
<p>Select an entry to view more details.</p>
</li>
</ol>
</div>
</div>
<div class="sect5">
<h6 id="updating-image-vulnerability-policies">Updating image vulnerability policies</h6>
<div class="sect6">
<h7 id="deleting-an-image-vulnerability-policy">Deleting an image vulnerability policy</h7>
<div class="paragraph">
<p>Delete the image vulnerability policy from the CLI or the console.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Delete an image vulnerability policy from the CLI:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Delete a certificate policy by running the following command:</p>
<div class="listingblock">
<div class="content">
<pre> kubectl delete policy &lt;imagevulnpolicy-name&gt; -n &lt;mcm namespace&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>After your policy is deleted, it is removed from your target cluster or clusters.</p>
</div>
</li>
<li>
<p>Verify that your policy is removed by running the following command:</p>
<div class="listingblock">
<div class="content">
<pre> kubectl get policy &lt;imagevulnpolicy-name&gt; -n &lt;mcm namespace&gt;</pre>
</div>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>Delete an image vulnerability policy from the console:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>From the navigation menu, click <strong>Govern risk</strong> to view a table list of your policies.</p>
</li>
<li>
<p>Click the <strong>Options</strong> icon for the policy you want to delete in the policy violation table.</p>
</li>
<li>
<p>Click <strong>Remove</strong>.</p>
</li>
<li>
<p>From the <em>Remove policy</em> dialog box, click <strong>Remove policy</strong>.</p>
</li>
</ol>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>Your image vulnerability policy is deleted.</p>
</div>
<div class="paragraph">
<p>View a sample of an image vulnerability policy, see <em>Image vulnerability policy sample</em> from the <a href="#image-vulnerability-policy">Image vulnerability policy</a> page.
See <a href="#kubernetes-configuration-policy-controller">Kubernetes configuration policy controller</a> to learn about other policies that are monitored by the Kubernetes configuration policy controller.
See <a href="#manage-security-policies">Manage security policies</a> to manage other policies.</p>
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="managing-the-memory-usage-policy">Managing the memory usage policy</h5>
<div class="paragraph">
<p>Apply a memory usage policy to limit or restrict your memory and compute usage.
Learn to create, apply, view, and update your memory usage policy in the following sections.</p>
</div>
<div class="sect5">
<h6 id="creating-a-memory-usage-policy">Creating a memory usage policy</h6>
<div class="paragraph">
<p>You can create a YAML file for your memory usage policy from the command line interface (CLI) or from the console.
View the following sections to create a memory usage policy:</p>
</div>
<div class="sect6">
<h7 id="creating-a-memory-usage-policy-from-the-cli">Creating a memory usage policy from the CLI</h7>
<div class="paragraph">
<p>Complete the following steps to create a memory usage policy from the CLI:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create a YAML file for your memory usage policy by running the following command:</p>
<div class="listingblock">
<div class="content">
<pre>kubectl create -f memorypolicy-1.yaml</pre>
</div>
</div>
</li>
<li>
<p>Apply the policy by running the following command:</p>
<div class="listingblock">
<div class="content">
<pre>kubectl apply -f &lt;memory-policy-file-name&gt;  --namespace=&lt;namespace&gt;</pre>
</div>
</div>
</li>
<li>
<p>List and verify the policies by running the following command:</p>
<div class="listingblock">
<div class="content">
<pre>kubectl get memorypolicy --namespace=&lt;namespace&gt;</pre>
</div>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>Your memory usage policy is created from the CLI.</p>
</div>
<div class="sect7">
<h8 id="viewing-your-policy-from-the-cli">Viewing your policy from the CLI</h8>
<div class="paragraph">
<p>Complete the following steps to view your memory usage policy from the CLI:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>View details for a specific memory usage policy by running the following command:</p>
<div class="listingblock">
<div class="content">
<pre>kubectl get memorypolicy &lt;policy-name&gt; -n &lt;namespace&gt; -o yaml</pre>
</div>
</div>
</li>
<li>
<p>View a description of your memory usage policy by running the following command:</p>
<div class="listingblock">
<div class="content">
<pre>kubectl describe memorypolicy &lt;name&gt; -n &lt;namespace&gt;</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect6">
<h7 id="creating-an-memory-usage-policy-from-the-console">Creating an memory usage policy from the console</h7>
<div class="paragraph">
<p>As you create a memory usage policy from the console, a YAML file is also created in the YAML editor.
Complete the following steps to create the memory usage policy from the console:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Log in to your Red Hat Advanced Cluster Management for Kubernetes console.</p>
</li>
<li>
<p>From the navigation menu, click <strong>Governance and risk</strong>.</p>
</li>
<li>
<p>Click <strong>Create policy</strong>.</p>
</li>
<li>
<p>Select <strong>Limitrange</strong> from the <em>Specifications</em> field.
Parameter values are automatically set.
You can edit your values.</p>
</li>
<li>
<p>Click <strong>Create</strong>.</p>
</li>
</ol>
</div>
<div class="sect7">
<h8 id="viewing-your-memory-usage-policy-from-the-console">Viewing your memory usage policy from the console</h8>
<div class="paragraph">
<p>You can view any memory usage policy and its status from the console.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Log in to your cluster from the console.</p>
</li>
<li>
<p>From the navigation menu, click <strong>Govern risk</strong> to view a table list of your policies.</p>
</li>
</ol>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
You can filter the table list of your policies by selecting the All policies tab or Cluster violations tab.
</td>
</tr>
</table>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Select one of your policies to view more details.</p>
</li>
<li>
<p>View the policy violations by selecting the <em>Violations</em> tab.</p>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect5">
<h6 id="updating-memory-usage-policies">Updating memory usage policies</h6>
<div class="sect6">
<h7 id="deleting-a-memory-usage-policy">Deleting a memory usage policy</h7>
<div class="paragraph">
<p>Delete the memory usage policy from the CLI or the console.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Delete a memory usage policy from the CLI:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Delete a memory usage policy by running the following command:</p>
<div class="listingblock">
<div class="content">
<pre> kubectl delete policy &lt;memorypolicy-name&gt; -n &lt;mcm namespace&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>After your policy is deleted, it is removed from your target cluster or clusters.</p>
</div>
</li>
<li>
<p>Verify that your policy is removed by running the following command:</p>
<div class="listingblock">
<div class="content">
<pre> kubectl get policy &lt;memorypolicy-name&gt; -n &lt;mcm namespace&gt;</pre>
</div>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>Delete a memory usage policy from the console:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>From the navigation menu, click <strong>Govern risk</strong> to view a table list of your policies.</p>
</li>
<li>
<p>Click the <strong>Options</strong> icon for the policy you want to delete in the policy violation table.</p>
</li>
<li>
<p>Click <strong>Remove</strong>.</p>
</li>
<li>
<p>From the <em>Remove policy</em> dialog box, click <strong>Remove policy</strong>.</p>
</li>
</ol>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>Your memory usage policy is deleted.</p>
</div>
<div class="paragraph">
<p>View a sample of a memory usage policy, see <em>Memory usage policy sample</em> from the <a href="#memory-usage-policy">Memory usage policy</a> page.
See <a href="#kubernetes-configuration-policy-controller">Kubernetes configuration policy controller</a> to learn about other configuration policies.
See <a href="#manage-security-policies">Manage security policies</a> to manage other policies.</p>
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="managing-a-namespace-policy">Managing a namespace policy</h5>
<div class="paragraph">
<p>Namespace policies are applied to define specific rules for your namespace.
Learn to create, apply, view, and update your memory usage policy in the following sections.</p>
</div>
<div class="sect5">
<h6 id="creating-a-namespace-policy">Creating a namespace policy</h6>
<div class="paragraph">
<p>You can create a YAML file for your namespace policy from the command line interface (CLI) or from the console.
View the following sections to create a namespace policy:</p>
</div>
<div class="sect6">
<h7 id="creating-a-namespace-policy-from-the-cli">Creating a namespace policy from the CLI</h7>
<div class="paragraph">
<p>Complete the following steps to create a namespace policy from the CLI:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create a YAML file for your namespace policy by running the following command:</p>
<div class="listingblock">
<div class="content">
<pre>kubectl create -f namespacepolicy-1.yaml</pre>
</div>
</div>
</li>
<li>
<p>Apply the policy by running the following command:</p>
<div class="listingblock">
<div class="content">
<pre>kubectl apply -f &lt;namespace-policy-file-name&gt;  --namespace=&lt;namespace&gt;</pre>
</div>
</div>
</li>
<li>
<p>List and verify the policies by running the following command:</p>
<div class="listingblock">
<div class="content">
<pre>kubectl get namespacepolicy --namespace=&lt;namespace&gt;</pre>
</div>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>Your namespace policy is created from the CLI.</p>
</div>
<div class="sect7">
<h8 id="viewing-your-namespace-policy-from-the-cli">Viewing your namespace policy from the CLI</h8>
<div class="paragraph">
<p>Complete the following steps to view your namespace policy from the CLI:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>View details for a specific namespace policy by running the following command:</p>
<div class="listingblock">
<div class="content">
<pre>kubectl get namespacepolicy &lt;policy-name&gt; -n &lt;namespace&gt; -o yaml</pre>
</div>
</div>
</li>
<li>
<p>View a description of your namespace policy by running the following command:</p>
<div class="listingblock">
<div class="content">
<pre>kubectl describe namespacepolicy &lt;name&gt; -n &lt;namespace&gt;</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect6">
<h7 id="creating-a-namespace-policy-from-the-console">Creating a namespace policy from the console</h7>
<div class="paragraph">
<p>As you create a namespace policy from the console, a YAML file is also created in the YAML editor.
Complete the following steps to create a namespace policy from the console:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Log in to your Red Hat Advanced Cluster Management for Kubernetes console.</p>
</li>
<li>
<p>From the navigation menu, click <strong>Governance and risk</strong>.</p>
</li>
<li>
<p>Click <strong>Create policy</strong>.</p>
</li>
<li>
<p>Select <strong>Namespace</strong> from the <em>Specifications</em> field.
Parameter values are automatically set.
You can edit your values.</p>
</li>
<li>
<p>Click <strong>Create</strong>.</p>
</li>
</ol>
</div>
<div class="sect7">
<h8 id="viewing-your-namespace-policy-from-the-console">Viewing your namespace policy from the console</h8>
<div class="paragraph">
<p>You can view any namespace policy and its status from the console.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Log in to your cluster from the console.</p>
</li>
<li>
<p>From the navigation menu, click <strong>Governance and risk</strong> to view a table list of your policies.</p>
</li>
</ol>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
You can filter the table list of your policies by selecting the <em>All policies</em> tab or <em>Cluster violations</em> tab.
</td>
</tr>
</table>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Select one of your policies to view more details.</p>
</li>
<li>
<p>View the policy violations by selecting the <em>Violations</em> tab.</p>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect5">
<h6 id="updating-namespace-policies">Updating namespace policies</h6>
<div class="sect6">
<h7 id="deleting-a-namespace-policy">Deleting a namespace policy</h7>
<div class="paragraph">
<p>Delete a namespace policy from the CLI or the console.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Delete a namespace policy from the CLI:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Delete a namespace policy by running the following command:</p>
<div class="listingblock">
<div class="content">
<pre> kubectl delete policy &lt;memorypolicy-name&gt; -n &lt;mcm namespace&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>After your policy is deleted, it is removed from your target cluster or clusters.</p>
</div>
</li>
<li>
<p>Verify that your policy is removed by running the following command:</p>
<div class="listingblock">
<div class="content">
<pre> kubectl get policy &lt;memorypolicy-name&gt; -n &lt;mcm namespace&gt;</pre>
</div>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>Delete a namespace policy from the console:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>From the navigation menu, click <strong>Govern risk</strong> to view a table list of your policies.</p>
</li>
<li>
<p>Click the <strong>Options</strong> icon for the policy you want to delete in the policy violation table.</p>
</li>
<li>
<p>Click <strong>Remove</strong>.</p>
</li>
<li>
<p>From the <em>Remove policy</em> dialog box, click <strong>Remove policy</strong>.</p>
</li>
</ol>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>Your namespace policy is deleted.</p>
</div>
<div class="paragraph">
<p>View a sample of a namespace policy, see <em>Namespace policy sample</em> on the <a href="#namespace-policy-page">Namespace policy page</a>.
See <a href="#kubernetes-configuration-policy-controller">Kubernetes configuration policy controller</a> to learn about other configuration policies.
See <a href="#manage-security-policies">Manage security policies</a> to manage other policies.</p>
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="managing-a-pod-nginx-policy">Managing a pod nginx policy</h5>
<div class="paragraph">
<p>Kubernetes configuration policy controller monitors the status of you pod nginx policies.
Pod nginx policies are applied to to define the container rules for your pods.
Learn to create, apply, view, and update your pod nginx policy.</p>
</div>
<div class="sect5">
<h6 id="creating-a-pod-nginx-policy">Creating a pod nginx policy</h6>
<div class="paragraph">
<p>You can create a YAML for your pod nginx policy from the command line interface (CLI) or from the console.
View the following sections to create a pod nginx policy:</p>
</div>
<div class="sect6">
<h7 id="creating-a-pod-nginx-policy-from-the-cli">Creating a pod nginx policy from the CLI</h7>
<div class="paragraph">
<p>Complete the following steps to create a pod nginx policy from the CLI:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create a YAML file for your pod nginx policy by running the following command:</p>
<div class="listingblock">
<div class="content">
<pre>kubectl create -f podnginxpolicy-1.yaml</pre>
</div>
</div>
</li>
<li>
<p>Apply the policy by running the following command:</p>
<div class="listingblock">
<div class="content">
<pre>kubectl apply -f &lt;podnginx-policy-file-name&gt;  --namespace=&lt;namespace&gt;</pre>
</div>
</div>
</li>
<li>
<p>List and verify the policies by running the following command:</p>
<div class="listingblock">
<div class="content">
<pre>kubectl get podnginxpolicy --namespace=&lt;namespace&gt;</pre>
</div>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>Your image pod nginx policy is created from the CLI.</p>
</div>
<div class="sect7">
<h8 id="viewing-your-nginx-policy-from-the-cli">Viewing your nginx policy from the CLI</h8>
<div class="paragraph">
<p>Complete the following steps to view your pod nginx policy from the CLI:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>View details for a specific pod nginx policy by running the following command:</p>
<div class="listingblock">
<div class="content">
<pre>kubectl get podnginxpolicy &lt;policy-name&gt; -n &lt;namespace&gt; -o yaml</pre>
</div>
</div>
</li>
<li>
<p>View a description of your pod nginx policy by running the following command:</p>
<div class="listingblock">
<div class="content">
<pre>kubectl describe podnginxpolicy &lt;name&gt; -n &lt;namespace&gt;</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect5">
<h6 id="creating-an-pod-nginx-policy-from-the-console">Creating an pod nginx policy from the console</h6>
<div class="paragraph">
<p>As you create a pod nginx policy from the console, a YAML file is also created in the YAML editor.
Complete the following steps to create the pod nginx policy from the console:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Log in to your Red Hat Advanced Cluster Management for Kubernetes console.</p>
</li>
<li>
<p>From the navigation menu, click <strong>Govern risk</strong>.</p>
</li>
<li>
<p>Click <strong>Create policy</strong>.</p>
</li>
<li>
<p>Select <strong>Pod</strong> from the <em>Specifications</em> field.
Parameter values are automatically set.
You can edit your values.</p>
</li>
<li>
<p>Click <strong>Create</strong>.</p>
</li>
</ol>
</div>
<h8 id="viewing-your-pod-nginx-policy-from-the-console" class="discrete">Viewing your pod nginx policy from the console</h8>
<div class="paragraph">
<p>You can view any pod nginx policy and its status from the console.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Log in to your cluster from the console.</p>
</li>
<li>
<p>From the navigation menu, click <strong>Govern risk</strong> to view a table list of your policies.</p>
</li>
</ol>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
You can filter the table list of your policies by selecting the <em>All policies</em> tab or <em>Cluster violations</em> tab.
</td>
</tr>
</table>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Select one of your policies to view more details.</p>
</li>
<li>
<p>View the policy violations by selecting the <em>Violations</em> tab.</p>
</li>
</ol>
</div>
</div>
<div class="sect5">
<h6 id="updating-pod-nginx-policies">Updating pod nginx policies</h6>
<div class="sect6">
<h7 id="deleting-a-pod-nginx-policy">Deleting a pod nginx policy</h7>
<div class="paragraph">
<p>Delete the pod nginx policy from the CLI or the console.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Delete a pod nginx policy from the CLI:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Delete a pod nginx policy by running the following command:</p>
<div class="listingblock">
<div class="content">
<pre> kubectl delete policy &lt;podnginxpolicy-name&gt; -n &lt;mcm namespace&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>After your policy is deleted, it is removed from your target cluster or clusters.</p>
</div>
</li>
<li>
<p>Verify that your policy is removed by running the following command:</p>
<div class="listingblock">
<div class="content">
<pre> kubectl get policy &lt;podnginxpolicy-name&gt; -n &lt;mcm namespace&gt;</pre>
</div>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>Delete a pod nginx policy from the console:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>From the navigation menu, click <strong>Govern risk</strong> to view a table list of your policies.</p>
</li>
<li>
<p>Click the <strong>Options</strong> icon for the policy you want to delete in the policy violation table.</p>
</li>
<li>
<p>Click <strong>Remove</strong>.</p>
</li>
<li>
<p>From the <em>Remove policy</em> dialog box, click <strong>Remove policy</strong>.</p>
</li>
</ol>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>Your pod nginx policy is deleted.</p>
</div>
<div class="paragraph">
<p>View a sample of a pod nginx policy, see <em>Pod nginx policy sample</em> on the <a href="#pod-nginx-sample">Pod nginx sample</a>.
See <a href="#kubernetes-configuration-policy-controller">Kubernetes configuration policy controller</a> to learn about other configuration policies.
See <a href="#manage-security-policies">Manage security policies</a> to manage other policies.</p>
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="managing-a-pod-security-policy">Managing a pod security policy</h5>
<div class="paragraph">
<p>Apply a pod security policy to secure pods and containers.
Learn to create, apply, view, and update your pod security policy in the following sections.</p>
</div>
<div class="sect5">
<h6 id="creating-a-pod-security-policy">Creating a pod security policy</h6>
<div class="paragraph">
<p>You can create a YAML file for your pod security policy from the command line interface (CLI) or from the console.
View the following sections to create a pod security policy:</p>
</div>
<div class="sect6">
<h7 id="creating-a-pod-security-policy-from-the-cli">Creating a pod security policy from the CLI</h7>
<div class="paragraph">
<p>Complete the following steps to create a pod security from the CLI:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create a YAML file for your pod security policy by running the following command:</p>
<div class="listingblock">
<div class="content">
<pre>kubectl create -f podsecuritypolicy-1.yaml</pre>
</div>
</div>
</li>
<li>
<p>Apply the policy by running the following command:</p>
<div class="listingblock">
<div class="content">
<pre>kubectl apply -f &lt;podsecurity-policy-file-name&gt;  --namespace=&lt;namespace&gt;</pre>
</div>
</div>
</li>
<li>
<p>List and verify the policies by running the following command:</p>
<div class="listingblock">
<div class="content">
<pre>kubectl get podsecuritypolicy --namespace=&lt;namespace&gt;</pre>
</div>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>Your pod security policy is created from the CLI.</p>
</div>
<div class="sect7">
<h8 id="viewing-your-pod-security-policy-from-the-cli">Viewing your pod security policy from the CLI</h8>
<div class="paragraph">
<p>Complete the following steps to view your pod security policy from the CLI:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>View details for a specific pod security policy by running the following command:</p>
<div class="listingblock">
<div class="content">
<pre>kubectl get podsecuritypolicy &lt;policy-name&gt; -n &lt;namespace&gt; -o yaml</pre>
</div>
</div>
</li>
<li>
<p>View a description of your pod security policy by running the following command:</p>
<div class="listingblock">
<div class="content">
<pre>kubectl describe podsecuritypolicy &lt;name&gt; -n &lt;namespace&gt;</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect6">
<h7 id="creating-a-pod-security-policy-from-the-console">Creating a pod security policy from the console</h7>
<div class="paragraph">
<p>As you create a pod security policy from the console, a YAML file is also created in the YAML editor.
Complete the following steps to create the pod security policy from the console:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Log in to your Red Hat Advanced Cluster Management for Kubernetes console.</p>
</li>
<li>
<p>From the navigation menu, click <strong>Govern risk</strong>.</p>
</li>
<li>
<p>Click <strong>Create policy</strong>.</p>
</li>
<li>
<p>Select <strong>Podsecuritypolicy</strong> from the <em>Specifications</em> field.
Parameter values are automatically set.
You can edit your values.</p>
</li>
<li>
<p>Click <strong>Create</strong>.</p>
</li>
</ol>
</div>
<div class="sect7">
<h8 id="viewing-your-pod-security-policy-from-the-console">Viewing your pod security policy from the console</h8>
<div class="paragraph">
<p>You can view any pod security policy and its status from the console.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Log in to your cluster from the console.</p>
</li>
<li>
<p>From the navigation menu, click <strong>Govern risk</strong> to view a table list of your policies.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
You can filter the table list of your policies by selecting the All policies tab or Cluster violations tab.
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Select one of your policies to view more details.</p>
</li>
<li>
<p>View the policy violations by selecting the <em>Violations</em> tab.</p>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect5">
<h6 id="updating-pod-security-policies">Updating pod security policies</h6>
<div class="sect6">
<h7 id="deleting-a-pod-security-policy">Deleting a pod security policy</h7>
<div class="paragraph">
<p>Delete the pod security policy from the CLI or the console.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Delete a pod security policy from the CLI:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Delete a pod security policy by running the following command:</p>
<div class="listingblock">
<div class="content">
<pre> kubectl delete policy &lt;podsecurity-policy-name&gt; -n &lt;mcm namespace&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>After your policy is deleted, it is removed from your target cluster or clusters.</p>
</div>
</li>
<li>
<p>Verify that your policy is removed by running the following command:</p>
<div class="listingblock">
<div class="content">
<pre> kubectl get policy &lt;podsecurity-policy-name&gt; -n &lt;mcm namespace&gt;</pre>
</div>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>Delete a pod security policy from the console:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>From the navigation menu, click <strong>Govern risk</strong> to view a table list of your policies.</p>
</li>
<li>
<p>Click the <strong>Options</strong> icon for the policy you want to delete in the policy violation table.</p>
</li>
<li>
<p>Click <strong>Remove</strong>.</p>
</li>
<li>
<p>From the <em>Remove policy</em> dialog box, click <strong>Remove policy</strong>.</p>
</li>
</ol>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>Your pod security policy is deleted.</p>
</div>
<div class="paragraph">
<p>View a sample of a pod security policy, see <em>Pod security policy sample</em> on the <a href="#pod-security-policy">Pod security policy</a> page.
See <a href="#kubernetes-configuration-policy-controller">Kubernetes configuration policy controller</a> to learn about other configuration policies.
See <a href="#manage-security-policies">Manage security policies</a> to manage other policies.</p>
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="managing-a-role-policy">Managing a role policy</h5>
<div class="paragraph">
<p>Kubernetes configuration policy controller monitors the status of role policies.
Apply a role policy to set rules and permissions for specific roles in your cluster.
Learn to create, apply, view, and update your role policy in the following sections.</p>
</div>
<div class="sect5">
<h6 id="creating-a-role-policy">Creating a role policy</h6>
<div class="paragraph">
<p>You can create a YAML file for your role policy from the command line interface (CLI) or from the console.
View the following sections to create a role policy:</p>
</div>
<div class="sect6">
<h7 id="creating-a-role-policy-from-the-cli">Creating a role policy from the CLI</h7>
<div class="paragraph">
<p>Complete the following steps to create a role from the CLI:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create a YAML file for your role policy by running the following command:</p>
<div class="listingblock">
<div class="content">
<pre>kubectl create -f rolepolicy-1.yaml</pre>
</div>
</div>
</li>
<li>
<p>Apply the policy by running the following command:</p>
<div class="listingblock">
<div class="content">
<pre>kubectl apply -f &lt;role-policy-file-name&gt;  --namespace=&lt;namespace&gt;</pre>
</div>
</div>
</li>
<li>
<p>List and verify the policies by running the following command:</p>
<div class="listingblock">
<div class="content">
<pre>kubectl get rolepolicy --namespace=&lt;namespace&gt;</pre>
</div>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>Your role policy is created from the CLI.</p>
</div>
<div class="sect7">
<h8 id="viewing-your-role-policy-from-the-cli">Viewing your role policy from the CLI</h8>
<div class="paragraph">
<p>Complete the following steps to view your role policy from the CLI:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>View details for a specific role policy by running the following command:</p>
<div class="listingblock">
<div class="content">
<pre>kubectl get rolepolicy &lt;policy-name&gt; -n &lt;namespace&gt; -o yaml</pre>
</div>
</div>
</li>
<li>
<p>View a description of your role policy by running the following command:</p>
<div class="listingblock">
<div class="content">
<pre>kubectl describe rolepolicy &lt;name&gt; -n &lt;namespace&gt;</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect6">
<h7 id="creating-a-role-policy-from-the-console">Creating a role policy from the console</h7>
<div class="paragraph">
<p>As you create a role policy from the console, a YAML file is also created in the YAML editor.
Complete the following steps to create the role policy from the console:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Log in to your Red Hat Advanced Cluster Management for Kubernetes console.</p>
</li>
<li>
<p>From the navigation menu, click <strong>Govern risk</strong>.</p>
</li>
<li>
<p>Click <strong>Create policy</strong>.</p>
</li>
<li>
<p>Select <strong>Role</strong> from the <em>Specifications</em> field.
Parameter values are automatically set.
You can edit your values.</p>
</li>
<li>
<p>Click <strong>Create</strong>.</p>
</li>
</ol>
</div>
<div class="sect7">
<h8 id="viewing-your-role-policy-from-the-console">Viewing your role policy from the console</h8>
<div class="paragraph">
<p>You can view any role policy and its status from the console.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Log in to your cluster from the console.</p>
</li>
<li>
<p>From the navigation menu, click <strong>Govern risk</strong> to view a table list of your policies.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
You can filter the table list of your policies by selecting the All policies tab or Cluster violations tab.
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Select one of your policies to view more details.</p>
</li>
<li>
<p>View the policy violations by selecting the <em>Violations</em> tab.</p>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect5">
<h6 id="updating-role-policies">Updating role policies</h6>
<div class="sect6">
<h7 id="deleting-a-role-policy">Deleting a role policy</h7>
<div class="paragraph">
<p>Delete the role policy from the CLI or the console.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Delete a role policy from the CLI:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Delete a role policy by running the following command:</p>
<div class="listingblock">
<div class="content">
<pre> kubectl delete policy &lt;podsecurity-policy-name&gt; -n &lt;mcm namespace&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>After your policy is deleted, it is removed from your target cluster or clusters.</p>
</div>
</li>
<li>
<p>Verify that your policy is removed by running the following command:</p>
<div class="listingblock">
<div class="content">
<pre> kubectl get policy &lt;podsecurity-policy-name&gt; -n &lt;mcm namespace&gt;</pre>
</div>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>Delete a role policy from the console:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>From the navigation menu, click <strong>Govern risk</strong> to view a table list of your policies.</p>
</li>
<li>
<p>Click the <strong>Options</strong> icon for the policy you want to delete in the policy violation table.</p>
</li>
<li>
<p>Click <strong>Remove</strong>.</p>
</li>
<li>
<p>From the <em>Remove policy</em> dialog box, click <strong>Remove policy</strong>.</p>
</li>
</ol>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>Your role policy is deleted.</p>
</div>
<div class="paragraph">
<p>View a sample of a role policy, see <em>Role policy sample</em> on the <a href="#role-policy">Role policy</a> page.
See <a href="#kubernetes-configuration-policy-controller">Kubernetes configuration policy controller</a> to learn about other configuration policies.
See <a href="#manage-security-policies">Manage security policies</a> to manage other policies.</p>
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="managing-a-certificate-policy">Managing a certificate policy</h5>
<div class="paragraph">
<p>Learn to create, apply, view, and update your certificate policies.</p>
</div>
<div class="sect5">
<h6 id="creating-a-certificate-policy">Creating a certificate policy</h6>
<div class="paragraph">
<p>You can create a YAML file for your certificate policy from the command line interface (CLI) or from the console.
View the following sections to create a certificate policy:</p>
</div>
<div class="sect6">
<h7 id="creating-a-certificate-policy-from-the-cli">Creating a certificate policy from the CLI</h7>
<div class="paragraph">
<p>Complete the following steps to create a certificate policy from the CLI:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create a YAML file for your certificate policy.
Run the following command:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre>  kubectl create -f policy-1.yaml</pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Apply the policy by running the following command:</p>
<div class="listingblock">
<div class="content">
<pre>kubectl apply -f &lt;certificate-policy-file-name&gt;  --namespace=&lt;namespace&gt;</pre>
</div>
</div>
</li>
<li>
<p>Verify and list the policies by running the following command:</p>
<div class="listingblock">
<div class="content">
<pre>kubectl get certificatepolicy --namespace=&lt;namespace&gt;</pre>
</div>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>Your certificate policy is created.</p>
</div>
<div class="sect7">
<h8 id="viewing-your-certificate-policy-from-the-cli">Viewing your certificate policy from the CLI</h8>
<div class="paragraph">
<p>Complete the following steps to view your certificate policy from the CLI:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>View details for a specific certificate policy by running the following command:</p>
<div class="listingblock">
<div class="content">
<pre>kubectl get certificatepolicy &lt;policy-name&gt; -n &lt;namespace&gt; -o yaml</pre>
</div>
</div>
</li>
<li>
<p>View a description of your certificate policy by running the following command:</p>
<div class="listingblock">
<div class="content">
<pre>kubectl describe certificatepolicy &lt;name&gt; -n &lt;namespace&gt;</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect6">
<h7 id="creating-a-certificate-policy-from-the-console">Creating a certificate policy from the console</h7>
<div class="paragraph">
<p>As you create a certificate policy from the console, a YAML file is also created in the YAML editor.
Complete the following steps to create a certificate policy from the console:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Log in to your cluster from the console.</p>
</li>
<li>
<p>From the navigation menu, click <strong>Governance and risk</strong>.</p>
</li>
<li>
<p>Click <strong>Create policy</strong>.</p>
</li>
<li>
<p>Enter or select the appropriate values for the following fields:</p>
<div class="ulist">
<ul>
<li>
<p>Name</p>
</li>
<li>
<p>Specifications</p>
</li>
<li>
<p>Cluster selector</p>
</li>
<li>
<p>Remediation action</p>
</li>
<li>
<p>Standards</p>
</li>
<li>
<p>Categories</p>
</li>
<li>
<p>Controls</p>
</li>
<li>
<p>Disabled</p>
</li>
</ul>
</div>
</li>
<li>
<p>Click <strong>Create</strong>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>A certificate policy is created.</p>
</div>
<div class="sect7">
<h8 id="viewing-your-certificate-policy-from-the-console">Viewing your certificate policy from the console</h8>
<div class="paragraph">
<p>You can view any certificate policy and its status from the console.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Log in to your cluster from the console.</p>
</li>
<li>
<p>From the navigation menu, click <strong>Governance and risk</strong> to view a table list of your policies.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
You can filter the table list of your policies by selecting the <em>All policies</em> tab or <em>Cluster violations</em> tab.
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Select one of your policies to view more details.</p>
</li>
<li>
<p>View the certificate policy violations by selecting the <em>Violations</em> tab.</p>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect5">
<h6 id="updating-certificate-policies">Updating certificate policies</h6>
<div class="sect6">
<h7 id="bringing-your-own-certificates">Bringing your own certificates</h7>
<div class="paragraph">
<p>You can monitor your own certificates with the certificate policy controller.
You must complete one of the following requirements to monitor your own certificates:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Create a Kubernetes TLS Secret for your certificate.</p>
</li>
<li>
<p>Add the label <code>certificate_key_name</code> into your Kubernetes secret to monitor your certificates.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Create a Kubernetes TLS secret to monitor your own certificates by running the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>   kubectl -n &lt;namespace&gt; create secret tls &lt;secret name&gt; --cert=&lt;path to certificate&gt;/&lt;certificate name&gt; --key=&lt;path to key&gt;/&lt;key name&gt;</pre>
</div>
</div>
</div>
<div class="sect6">
<h7 id="adding-a-label-into-your-kubernetes-secret">Adding a label into your Kubernetes secret</h7>
<div class="paragraph">
<p>Update the <code>metadata</code> parameter in your TLS Secret by adding the <code>certificate_key_name</code> label.
Run the following command to add the <code>certificate_key_name</code> label:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>   kubectl label secret my-certificate -n default certificate_key_name=cert</pre>
</div>
</div>
<div class="paragraph">
<p>Your updated TLS Secret might resemble the following content:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">   apiVersion: v1
   kind: Secret
   metadata:
     name: my-certificate
     namespace: default
     labels:
       certificate_key_name: cert
   type: Opaque
   data:
     cert: &lt;Certificate Data&gt;
     key: &lt;Private Key Data&gt;</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
When you add the label from the console, you must manually add the label into the TLS Secret YAML file.
</td>
</tr>
</table>
</div>
</div>
<div class="sect6">
<h7 id="disabling-certificate-policies">Disabling certificate policies</h7>
<div class="paragraph">
<p>When you create a certificate policy, it is enabled by default.
Complete the following steps to disable a certificate policy from the CLI or the console:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Disable a certificate policy from the CLI:</p>
</li>
</ul>
</div>
<div class="ulist">
<ul>
<li>
<p>Disable a certificate policy from the console:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Log in to your Red Hat Advanced Cluster Management for Kubernetes console.</p>
</li>
<li>
<p>From the navigation menu, click <strong>Govern risk</strong> to view a table list of your policies.</p>
</li>
<li>
<p>Disable your policy by clicking the <strong>Options</strong> icon &gt; <strong>Disable</strong>.
The <em>Disable Policy</em> dialog box appears.</p>
</li>
<li>
<p>Click <strong>Disable policy</strong>.</p>
</li>
</ol>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>Your policy is disbaled.</p>
</div>
</div>
<div class="sect6">
<h7 id="deleting-a-certificate-policy">Deleting a certificate policy</h7>
<div class="paragraph">
<p>Delete the certificate policy from the CLI or the console.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Delete a certificate policy from the CLI:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Delete a certificate policy by running the following command:</p>
<div class="listingblock">
<div class="content">
<pre> kubectl delete policy &lt;cert-policy-name&gt; -n &lt;mcm namespace&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>After your policy is deleted, it is removed from your target cluster or clusters.</p>
</div>
</li>
<li>
<p>Verify that your policy is removed by running the following command:</p>
<div class="listingblock">
<div class="content">
<pre> kubectl get policy &lt;policy-name&gt; -n &lt;mcm namespace&gt;</pre>
</div>
</div>
</li>
</ol>
</div>
</li>
<li>
<p>Delete a certificate policy from the console:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>From the navigation menu, click <strong>Govern risk</strong> to view a table list of your policies.</p>
</li>
<li>
<p>Click the <strong>Options</strong> icon for the policy you want to delete in the policy violation table.</p>
</li>
<li>
<p>Click <strong>Remove</strong>.</p>
</li>
<li>
<p>From the <em>Remove policy</em> dialog box, click <strong>Remove policy</strong>.</p>
</li>
</ol>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>Your certificate policy is deleted.</p>
</div>
<div class="paragraph">
<p>View a sample of a certificate policy, see <em>Certificate policy sample</em> on the <a href="#certificate-policy-controller">Certificate policy controller</a> page.
For more information about other policy controllers, see <a href="#policy-controllers">Policy controllers</a>.
See <a href="#manage-security-policies">Manage security policies</a> to manage other policies.</p>
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="managing-a-cis-policy">Managing a CIS policy</h5>
<div class="paragraph">
<p>Apply a CIS policy to monitor the nodes in a cluster for compliance against CIS Kubernetes benchmark checks.
Learn to create, apply, view, and update your CIS policies in the following sections.</p>
</div>
<div class="sect5">
<h6 id="creating-a-cis-policy">Creating a CIS policy</h6>
<div class="paragraph">
<p>You can create a YAML file for your CIS policy from the command line interface (CLI) or from the console.
View the following sections to create a certificate policy:</p>
</div>
<div class="sect6">
<h7 id="creating-a-cis-policy-from-the-cli">Creating a CIS policy from the CLI</h7>
<div class="paragraph">
<p>Complete the following steps to create a certificate policy from the command line interface (CLI):</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create a YAML file for your CIS policy by including a set of exclude rules for master node and worker node.
Run the following command:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre>  kubectl create -f CisPolicy.yaml</pre>
</div>
</div>
<div class="paragraph">
<p>Your YAML might resemble the following file:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">  apiVersion: policies.ibm.com/v1alpha1
  kind: CisPolicy
  metadata:
    labels:
      controller-tools.k8s.io: "1.0"
      pci-category: "system-integrity"
    name: cispolicy-pci-sample
  spec:
    cisSpecVersion: 1.4
    severity: medium
    kubernetesCisPolicy:
      masterNodeExcludeRules:
      1.1 Maintain default behavior for anonymous access
      1.2 Verify that the basic-auth-file method is not enabled
      1.3 Insecure Tokens
      1.4 Secure communications between the API server and master nodes
      1.5 Prevent insecure bindings
      1.6 Prevent insecure port access
      1.7 Use Secure Ports for API Server Traffic
      1.8 Do not expose API server profiling data
      1.9 Verify repair-malformed-updates argument for API compatibility
      1.10 Verify that the AlwaysAdmit admission controller is disabled
      1.11 Manage the AlwaysPullImages admission controller
      1.12 Use Security Context Constraints instead of DenyEscalatingExec admission
      1.13 Use Security Context Constraints instead of the SecurityContextDeny admission controller
      1.14 Manage the NamespaceLifecycle admission controller
      1.15 Configure API server auditing - audit log file path
      1.16 Configure API server auditing - audit log retention
      1.17 Configure API server auditing - audit log backup retention
      1.18 Configure audit log file size</code></pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Apply the policy by running the following command:</p>
<div class="listingblock">
<div class="content">
<pre>kubectl apply -f &lt;cis-policy-file&gt; --namespace=&lt;namespace&gt;</pre>
</div>
</div>
</li>
<li>
<p>Verify and list the policies by running the following command:</p>
<div class="listingblock">
<div class="content">
<pre>kubectl get cispolicy --namespace=&lt;namespace&gt;</pre>
</div>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>Your CIS policy is created.</p>
</div>
<div class="sect7">
<h8 id="viewing-a-cis-policy-from-command-line-interface-cli">Viewing a CIS policy from command line interface (CLI)</h8>
<div class="paragraph">
<p>Complete the following steps to view the CIS policy from the managed cluster CLI:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Get a list of the CIS policies that are on your hub cluster by running the following command:</p>
<div class="listingblock">
<div class="content">
<pre>oc get cispolicy --all-namespaces</pre>
</div>
</div>
</li>
<li>
<p>Run the following command to view which policies are listed <code>NonCompliant</code>:</p>
<div class="listingblock">
<div class="content">
<pre>oc describe cispolicy -n &lt;namespace&gt; &lt;policyname&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>Your output might resemble the following response:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>  Status:
    Cis Policy Status:
      Endpoint 4:
        Cluster Name:  endpoint4
        Compliancy:    NonCompliant
        Node Status:
          150 . 238 . 253 . 105:  NonCompliant
          150 . 238 . 253 . 106:  NonCompliant
          150 . 238 . 253 . 121:  NonCompliant
        Risk Score:
          Highest Risk Score:  5
          Risk Category:       medium
     Observed Generation:       2
  Events:
    Type     Reason       Age                From            Message
    ----     ------       ----               ----            -------
    Warning  Medium Risk  12s (x2 over 26s)  cis-controller  Medium Risk detected!</pre>
</div>
</div>
</li>
<li>
<p>Verify which nodes are non-compliant by running the following commands:</p>
<div class="listingblock">
<div class="content">
<pre>oc get nodes -o wide

oc describe node &lt;node-name&gt;</pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
The node name that appear might be a label for the node, for instance <code>ibm-cloud.kubernetes.io/external-ip=150.238.253.106</code>.
</td>
</tr>
</table>
</div>
</li>
<li>
<p>View the risk scores for the CIS rules in your policy by running the following command:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre>  kubectl -n &lt;namespace&gt; describe configmap endpoint-cisctrl-controller-config</pre>
</div>
</div>
</div>
</div>
<div class="sect6">
<h7 id="creating-a-cis-policy-from-the-console">Creating a CIS policy from the console</h7>
<div class="paragraph">
<p>As you create your CIS policy from the console, a YAML file is also created in the YAML editor.
Complete the following steps to create CIS policy from the console:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Log in to the Red Hat Advanced Cluster Management for Kubernetes console.</p>
</li>
<li>
<p>From the navigation menu, click <strong>Govern risk</strong>.</p>
</li>
<li>
<p>Click <strong>Create Policy</strong>.</p>
</li>
<li>
<p>Enter the name for the CIS policy in the <strong>Name</strong> field.</p>
</li>
<li>
<p>For <strong>Specifications</strong>, select <code>Cispolicy-cis compliance for OCP</code> from the drop-down list.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
You must enable the feature flag to make the <code>Cispolicy-cis compliance for OCP</code> option available.
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Use the drop-down list and make selections for the following parameters:</p>
<div class="ulist">
<ul>
<li>
<p>Cluster selector</p>
</li>
<li>
<p>Standards</p>
</li>
<li>
<p>Categories</p>
</li>
<li>
<p>Controls</p>
</li>
</ul>
</div>
</li>
<li>
<p>Click <strong>Create</strong>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>A policy is created and is embedded into the policy.</p>
</div>
<div class="sect7">
<h8 id="viewing-a-cis-policy-from-the-console">Viewing a CIS policy from the console</h8>
<div class="paragraph">
<p>View any CIS Policy and its status from the console.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Log in to the Red Hat Advanced Cluster Management for Kubernetes console.</p>
</li>
<li>
<p>From the navigation menu, click <strong>Govern risk</strong> to view a table list of your policies.</p>
</li>
</ol>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
You can filter the table list of your policies by selecting the <em>All policies</em> tab or <em>Cluster violations</em> tab.
</td>
</tr>
</table>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Select one of your policies.</p>
</li>
<li>
<p>View the policy violations by selecting the <em>Violations</em> tab.</p>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect5">
<h6 id="updating-cis-policies">Updating CIS policies</h6>
<div class="sect6">
<h7 id="enabling-the-cis-policy-controller-from-the-cli">Enabling the CIS policy controller from the CLI</h7>
<div class="paragraph">
<p>The CIS policy controller monitors the nodes in a cluster for compliance against CIS Kubernetes benchmark checks.
The CIS policies that list the rules to exclude can be applied to the managed clusters.
The controller checks the cluster for any violations that are not in the exclude list.</p>
</div>
<div class="paragraph">
<p>When you install the Klusterlet, the CIS policy controller is disabled by default.
Enable the controller after your cluster is imported by running the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>  kubectl patch endpointconfig $CLUSTER_NAME -n $CLUSTER_NAMESPACE --type='json' -p='[{"op": "replace", "path": "/spec/cisController/enabled", "value":true}]'</pre>
</div>
</div>
</div>
<div class="sect6">
<h7 id="enabling-the-cis-policy-controller-from-the-console">Enabling the CIS policy controller from the console</h7>
<div class="paragraph">
<p>Complete the following steps to enable the CIS policy controller feature flag from the console.
The CIS policy specification becomes available:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Log in to your hub cluster and open the Visual Web terminal.</p>
</li>
<li>
<p>Edit the deployment to enable the feature flag.
Run the following command:</p>
<div class="listingblock">
<div class="content">
<pre>oc edit deployment $(oc get deployment -o custom-columns=:.metadata.name | grep 'grcui$')</pre>
</div>
</div>
</li>
<li>
<p>Update the <code>env.value</code> parameter to <code>"yes"</code>.
Your deployment might resemble the following content:</p>
<div class="listingblock">
<div class="content">
<pre>-env
  - name: featureFlags_cisPolicyTemplate
    value: "yes"</pre>
</div>
</div>
</li>
<li>
<p>Save your deployment and close the Visual Web Terminal.</p>
</li>
<li>
<p>The associated pod restarts.
Attempt to create the policy again.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect5">
<h6 id="remediating-cis-policy-violation">Remediating CIS policy violation</h6>
<div class="paragraph">
<p>Verify rule failures to remediate your CIS policy violations.
Complete the following steps:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Log in to your OpenShift Container Platform from the CLI.
Run the following command to port-forward the CIS controller MinIO endpoint:</p>
<div class="listingblock">
<div class="content">
<pre>oc port-forward endpoint-cisctrl-minio-0 9123:9000</pre>
</div>
</div>
</li>
<li>
<p>Log in to your MinIO account with your access key and secret key, which is contained on the endpoint in a secret.
Obtain the endpoint secret by running the following command:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre>  oc get secret -n multicluster-endpoint endpoint-cisctrl-secret -o yaml</pre>
</div>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Decode the encoded values by completing the following steps:</p>
</li>
<li>
<p>Decode the access key and secret key by running the following commands:</p>
<div class="listingblock">
<div class="content">
<pre>echo &lt;encoded_access_key_value&gt; | base64 --decode

echo &lt;encoded_secret_key_value&gt; | base64 --decode</pre>
</div>
</div>
</li>
<li>
<p>Copy and paste the decoded values into the appropriate fields from the MinIO console.</p>
</li>
<li>
<p>Verify what nodes are labeled <code>NonCompliant</code>.
From the MinIO menu browser, select <strong>cis-k8s</strong> &gt; <strong>icp-local</strong> &gt; <strong>recent</strong> &gt; <strong>IP address for worker or master node</strong>.</p>
</li>
<li>
<p>Click the non-compliant node and select the attached file to download.
Click <strong>Download object</strong> and then open the file.
The nodes rules that have failed are shown with the following label: <code>[FAIL]</code>.</p>
</li>
<li>
<p>Remediate the non-compliant node manually by referencing the <code>Remediation</code> section of the attached file.
If a rule does not apply to your environment, add the rule to the <code>masterNodeExcludeRules</code> or <code>workerNodeExcludeRules</code> in your CIS policy.
Your <code>Remediation</code> section might resemble the following content:</p>
<div class="listingblock">
<div class="content">
<pre>== Remediations ==
7.9 Reset to the OpenShift defaults

7.12 Reset to the OpenShift default values.

7.14 Edit the Openshift node config file /etc/origin/node/node-config.yaml and set RotateKubeletClientCertificate to true.

7.15 Edit the Openshift node config file /etc/origin/node/node-config.yaml and set RotateKubeletServerCertificate to true.

8.2
8.3 Run the below command on each worker node.
chmod 644 $nodesvc

8.4 audit test did not run: failed to run: stat -c %U:%G $nodesvc, command: [stat -c %U:%G $nodesvc], error: exit status 1</pre>
</div>
</div>
</li>
</ol>
</div>
<div class="sect6">
<h7 id="deleting-a-cis-poicy">Deleting a CIS poicy</h7>
<div class="paragraph">
<p>Delete a CIS policy from the CLI or the console.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Delete a CIS policy from the CLI:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Delete a CIS policy by running the following command:</p>
<div class="listingblock">
<div class="content">
<pre>  kubectl delete policy &lt;cis-policy-name&gt; -n &lt;mcm namespace&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>After your policy is deleted, it is removed from your target cluster or clusters.</p>
</div>
</li>
<li>
<p>Verify that your policy is removed by running the following command:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre>  kubectl get policy &lt;policy-name&gt; -n &lt;mcm namespace&gt;</pre>
</div>
</div>
</li>
<li>
<p>Delete a policy from the console:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>From the navigation menu, click <strong>Govern risk</strong> to view a table list of your policies.</p>
</li>
<li>
<p>Click the <strong>Options</strong> icon for the policy you want to delete in the policy violation table.</p>
</li>
<li>
<p>Click <strong>Remove</strong>.</p>
</li>
<li>
<p>From the <em>Remove policy</em> dialog box, click <strong>Remove policy</strong>.</p>
</li>
</ol>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>Your policy is deleted.</p>
</div>
<div class="paragraph">
<p>View a sample of a CIS policy, see <em>CIS policy sample</em> from the <a href="#cis-policy-controller">CIS policy controller</a> page.
For more information about other policy controllers, see <a href="#policy-controllers">Policy controllers</a>.</p>
</div>
</div>
</div>
</div>
<div class="sect4">
<h5 id="managing-iam-policies">Managing IAM policies</h5>
<div class="paragraph">
<p>Apply an IAM policy to check the number of cluster administrators that you allow in your cluster.
Learn to create, apply, view, and update your IAM policies in the following sections.</p>
</div>
<div class="sect5">
<h6 id="creating-an-iam-policy">Creating an IAM policy</h6>
<div class="paragraph">
<p>You can create a YAML file for your IAM policy from the command line interface (CLI) or from the console.</p>
</div>
<div class="sect6">
<h7 id="creating-an-iam-policy-from-the-cli">Creating an IAM policy from the CLI</h7>
<div class="paragraph">
<p>Complete the following steps to create an IAM policy from the CLI:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create a YAML file with the IAM policy definition.
Run the following command:</p>
<div class="listingblock">
<div class="content">
<pre>kubectl create -f iam-policy-1.yaml</pre>
</div>
</div>
<div class="paragraph">
<p>Your IAM policy might resemble the following YAML file:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-yaml" data-lang="yaml">apiVersion: iam.policies.ibm.com/v1alpha1
kind: IamPolicy
metadata:
  name: iam-grc-policy
  label:
    category: "System-Integrity"
spec:
  namespaceSelector:
    include: ["default","kube-*"]
    exclude: ["kube-system"]
  remediationAction: inform
  disabled: false
  maxClusterRoleBindingUsers: 5
  maxRoleBindingViolationsPerNamespace: 2</code></pre>
</div>
</div>
</li>
<li>
<p>Apply the policy by running the following command:</p>
<div class="listingblock">
<div class="content">
<pre>kubectl apply -f &lt;iam-policy-file-name&gt;  --namespace=&lt;mcm_namespace&gt;</pre>
</div>
</div>
</li>
<li>
<p>Verify and list the policy by running the following command:</p>
<div class="listingblock">
<div class="content">
<pre>kubectl get &lt;iam-policy-file-name&gt; --namespace=&lt;mcm_namespace&gt;</pre>
</div>
</div>
</li>
</ol>
</div>
<div class="paragraph">
<p>Your IAM policy is created.</p>
</div>
<div class="sect7">
<h8 id="viewing-your-iam-policy-from-the-cli">Viewing your IAM policy from the CLI</h8>
<div class="paragraph">
<p>Complete the following steps to view your IAM policy:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>View details for.
specific IAM policy by running the following command:</p>
<div class="listingblock">
<div class="content">
<pre>kubectl get iampolicy &lt;policy-name&gt; -n &lt;namespace&gt; -o yaml</pre>
</div>
</div>
</li>
<li>
<p>View a description of your IAM policy by running the following command:</p>
<div class="listingblock">
<div class="content">
<pre>kubectl describe iampolicy &lt;name&gt; -n &lt;namespace&gt;</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect6">
<h7 id="creating-an-iam-policy-from-the-console">Creating an IAM policy from the console</h7>
<div class="paragraph">
<p>As you create your IAM policy from the console, a YAML file is also created in the YAML editor.
Complete the following steps to create an IAM policy from the console:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Log in to your cluster from the console.</p>
</li>
<li>
<p>From the navigation menu, click <strong>Govern risk</strong>.</p>
</li>
<li>
<p>Click <strong>Create policy</strong>.</p>
</li>
<li>
<p>Enter or select the apapropriate values for the following fields:</p>
<div class="ulist">
<ul>
<li>
<p>Name</p>
</li>
<li>
<p>Specifications</p>
</li>
<li>
<p>Cluster selector</p>
</li>
<li>
<p>Remediation action</p>
</li>
<li>
<p>Standards</p>
</li>
<li>
<p>Categories</p>
</li>
<li>
<p>Controls</p>
</li>
<li>
<p>Disabled</p>
</li>
</ul>
</div>
</li>
<li>
<p>Click <strong>Create</strong>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>An IAM policy is created.</p>
</div>
<div class="sect7">
<h8 id="viewing-your-iam-policy-from-the-console">Viewing your IAM policy from the console</h8>
<div class="paragraph">
<p>You can view any IAM policy and its status from the console.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Log in to your cluster from the console.</p>
</li>
<li>
<p>From the navigation menu, click <strong>Govern risk</strong> to view a table list of your policies.</p>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
You can filter the table list of your policies by selecting the All policies tab or Cluster violations tab.
</td>
</tr>
</table>
</div>
</li>
<li>
<p>Select one of your policies to view more details.</p>
</li>
<li>
<p>View the IAM policy violations by selecting the <em>Violations</em> tab.</p>
</li>
</ol>
</div>
</div>
</div>
</div>
<div class="sect5">
<h6 id="updating-iam-policies">Updating IAM policies</h6>
<div class="sect6">
<h7 id="disabling-iam-policies">Disabling IAM policies</h7>
<div class="paragraph">
<p>Complete the following steps to disbale your IAM policy:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Log in to your Red Hat Advanced Cluster Management for Kubernetes console.</p>
</li>
<li>
<p>From the navigation menu, click <strong>Govern risk</strong> to view a table list of your policies.</p>
</li>
<li>
<p>Disable your policy by clicking the <strong>Options</strong> icon &gt; <strong>Disable</strong>.
The <em>Disable Policy</em> dialog box appears.</p>
</li>
<li>
<p>Click <strong>Disable policy</strong>.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Your policy is disbaled.</p>
</div>
</div>
</div>
<div class="sect5">
<h6 id="deleting-an-iam-policy">Deleting an IAM policy</h6>
<div class="paragraph">
<p>Delete a configuration policy from the CLI or the console.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Delete an IAM policy from the CLI:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>Delete an IAM policy by running the following command:</p>
<div class="listingblock">
<div class="content">
<pre>  kubectl delete policy &lt;iam-policy-name&gt; -n &lt;mcm namespace&gt;</pre>
</div>
</div>
<div class="paragraph">
<p>After your policy is deleted, it is removed from your target cluster or clusters.</p>
</div>
</li>
<li>
<p>Verify that your policy is removed by running the following command:</p>
</li>
</ol>
</div>
<div class="listingblock">
<div class="content">
<pre>  kubectl get policy &lt;iam-policy-name&gt; -n &lt;mcm namespace&gt;</pre>
</div>
</div>
</li>
<li>
<p>Delete an IAM policy from the console:</p>
<div class="olist loweralpha">
<ol class="loweralpha" type="a">
<li>
<p>From the navigation menu, click <strong>Govern risk</strong> to view a table list of your policies.</p>
</li>
<li>
<p>Click the <strong>Options</strong> icon for the policy you want to delete in the policy violation table.</p>
</li>
<li>
<p>Click <strong>Remove</strong>.</p>
</li>
<li>
<p>From the <em>Remove policy</em> dialog box, click <strong>Remove policy</strong>.</p>
</li>
</ol>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>Your policy is deleted.</p>
</div>
<div class="paragraph">
<p>View the <em>IAM policy sample</em> from the <a href="#iam-policy-comtroller">IAM policy comtroller</a> page.
See <a href="#manage-security-policies">Manage security policies</a> for more topics.</p>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2020-05-20 21:50:29 +1000
</div>
</div>
</body>
</html>